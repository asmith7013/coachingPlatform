{
  "success": true,
  "data": [
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "End of Unit Assessment: 8.3",
      "assignment_id": 18399,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/18399/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 18934,
            "questionContent": {
              "questionText": "Select all the points that are on the graph of the line 2x + 4y = 20.\n\nA. (0, 5)\n\nB. (0, 10)\n\nC. (1, 2)\n\nD. (4, 2)\n\nE. (5, 0)\n\nF. (10, 0)\n\nExplain your thinking.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 310.2155477031802,
                        "y": 329.8833922261484,
                        "z": 0.5279850746268657
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:1936136196": {
                      "id": "asset:1936136196",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 524,
                        "w": 1072,
                        "src": "https://www.podsie.org/api/public-assets/638",
                        "name": "tldrawFile",
                        "fileSize": 93061,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:IuvLif1sRW7spkxkt3K33": {
                      "x": -85.80697879858661,
                      "y": 688.1526060070671,
                      "id": "shape:IuvLif1sRW7spkxkt3K33",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a290X",
                      "props": {
                        "w": 500,
                        "font": "sans",
                        "size": "m",
                        "color": "black",
                        "scale": 1.3412562198024085,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Explain your thinking.",
                                  "type": "text"
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:JuAS_4jvrGRfgcoFilHEI": {
                      "x": -189,
                      "y": 107,
                      "id": "shape:JuAS_4jvrGRfgcoFilHEI",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 524,
                        "w": 1072,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:1936136196",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/639",
              "acceptanceCriteria": "Solution: A, F\n- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. As long as their work or explanation demonstrates basic understanding of the concept, students should be given full explanation score.\n- all mathematically valid explanations OR work shown should be given full explanation score. ",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 18935,
            "questionContent": {
              "questionText": "For two weeks, the highest temperature each day was recorded in four different cities, represented by the lines **, *m*, *n*, and *p*. Which statement is true?\n\n\\[Image shows: A coordinate graph with temperature (degrees) on the y-axis and time passed (days) on the x-axis. Four lines are plotted: Line ** is horizontal and remains constant at the highest temperature level. Line *m* starts high (just below *)* and decreases steadily with a negative slope. Line *n* starts at the origin and increases steadily with a steep positive slope. Line *p* starts at the origin and increases with a shallower positive slope than line *n*. Both lines n and p intersect with line m, line n intersects at an earlier time\\]\n\nA. The high temperature in the city represented by line ** increased as time passed.\n\nB. The high temperature in the city represented by line *m* decreased steadily.\n\nC. Initially, the high temperature was warmer in the city represented by line *p* than in the city represented by line *m*.\n\nD. The high temperature in the city represented by line *p* increased faster than the high temperature in the city represented by line *n*.\n\nExplain your thinking.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 505.4195804195805,
                        "y": 539.354895104895,
                        "z": 0.40915593705293274
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-370455669": {
                      "id": "asset:-370455669",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 936,
                        "w": 1398,
                        "src": "https://www.podsie.org/api/public-assets/642",
                        "name": "tldrawFile",
                        "fileSize": 536052,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "asset:1936136196": {
                      "id": "asset:1936136196",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 524,
                        "w": 1072,
                        "src": "https://www.podsie.org/api/public-assets/641",
                        "name": "tldrawFile",
                        "fileSize": 93061,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:b9l8qck-FsK6ZnEP3KEGD": {
                      "x": -349.00000000000006,
                      "y": -94.49999999999989,
                      "id": "shape:b9l8qck-FsK6ZnEP3KEGD",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 936,
                        "w": 1398,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-370455669",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:wssUUTLaAEemCy1BGj5NC": {
                      "x": -256.2404392482518,
                      "y": 861.1846317744756,
                      "id": "shape:wssUUTLaAEemCy1BGj5NC",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a27kW",
                      "props": {
                        "w": 500,
                        "font": "sans",
                        "size": "m",
                        "color": "black",
                        "scale": 1.7457542457542459,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Explain your thinking.",
                                  "type": "text"
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/644",
              "acceptanceCriteria": "- Solution: B\n\n- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. As long as their work or explanation demonstrates basic understanding of the concept, students should be given full explanation score.\n- all mathematically valid explanations OR work shown should be given full explanation score. ",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 18936,
            "questionContent": {
              "questionText": "Jada earns twice as much money per hour as Diego. Which graph best represents this scenario?\n\n**A**\n\n\\[Image shows: A graph with \"money earned (dollars)\" on the x-axis and \"time worked (hours)\" on the y-axis. Two lines originate from the origin: Jada's line (black) has a steeper slope than Diego's line (blue).\\]\n\n**B**\n\n\\[Image shows: A graph with \"time worked (hours)\" on the x-axis and \"money earned (dollars)\" on the y-axis. Two lines originate from the origin: Jada's line (black) has a steeper slope than Diego's line (blue).\\]\n\n**C**\n\n\\[Image shows: A graph with \"time worked (hours)\" on the x-axis and \"money earned (dollars)\" on the y-axis. Two lines originate from the origin: Diego's line (blue) has a steeper slope than Jada's line (black).\\]\n\n**D**\n\n\\[Image shows: A graph with \"money earned (dollars)\" on the x-axis and \"time worked (hours)\" on the y-axis. Two lines originate from the origin: Diego's line (blue) has a steeper slope than Jada's line (black).\\]\n\nA. Graph A\n\nB. Graph B\n\nC. Graph C\n\nD. Graph D\n\nExplain your thinking.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 556.8776223776225,
                        "y": -1139.0052447552453,
                        "z": 0.4774624373956594
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:STIhC2zHbAXUG5EpdChz_"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:1508085861": {
                      "id": "asset:1508085861",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1252,
                        "w": 1198,
                        "src": "https://www.podsie.org/api/public-assets/645",
                        "name": "tldrawFile",
                        "fileSize": 341450,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:STIhC2zHbAXUG5EpdChz_": {
                      "x": -143.83793159965043,
                      "y": 1109.9208233173078,
                      "id": "shape:STIhC2zHbAXUG5EpdChz_",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a2BAV",
                      "props": {
                        "w": 500,
                        "font": "sans",
                        "size": "m",
                        "color": "black",
                        "scale": 1.4960039960039961,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Explain your thinking.",
                                  "type": "text"
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:x8RBALVwEkzuFivf_yjL6": {
                      "x": -249,
                      "y": -252.5,
                      "id": "shape:x8RBALVwEkzuFivf_yjL6",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1252,
                        "w": 1198,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:1508085861",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/646",
              "acceptanceCriteria": "- Solution: B\n\n- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. As long as their work or explanation demonstrates basic understanding of the concept, students should be given full explanation score.\n- all mathematically valid explanations OR work shown should be given full explanation score. ",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 18937,
            "questionContent": {
              "questionText": "Write an equation for each line.\n\n\\[Image shows: A coordinate plane with x and y axes marked from -9 to 9. Four lines are graphed and labeled:\n\n- Line ** (red/orange): A horizontal line passing through y = 4\n- Line *p* (blue): A vertical line passing through x = -4\n- Line *n* (green): A line with positive slope passing through y=-1, with a slope of 1\n- Line *m* (black): A line with negative slope passing through approximately (0, 4) and (2, 0), with a slope of -2\\]",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 48.92025734597462,
                        "y": 82.17200413427588,
                        "z": 0.6088346220464051
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:127789916": {
                      "id": "asset:127789916",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 768,
                        "w": 1472,
                        "src": "https://www.podsie.org/api/public-assets/648",
                        "name": "tldrawFile",
                        "fileSize": 204776,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:cABipoYhk9OYZ2SgmmnGU": {
                      "x": -386,
                      "y": -10.5,
                      "id": "shape:cABipoYhk9OYZ2SgmmnGU",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 768,
                        "w": 1472,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:127789916",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/837",
              "acceptanceCriteria": "Solution:\n\n- line **: *y* = 4 (or equivalent)\n- line *m*: *y* = 4  2*x* (or equivalent)\n- line *n*: *y* = *x*  1 (or equivalent)\n- line *p*: *x* = -4\n\nThis question is special because there's not much you can \"explain\", so as long as students write the correct equation for each line, they should get full credit for the explanation score too without needing a separate explanation. To be clear, explanations are NOT required, as long as the equations are identified correctly, then isCorrect is true AND explanation score should be 3/3.",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 18938,
            "questionContent": {
              "questionText": "Three runners are training for a race. One day, they all run a lap around a track, each at their own constant speed.\n\n- The graph shows the distance in meters that Runner #1 runs with respect to the time in seconds.\n\n\\[Image shows: A coordinate graph with \"time (seconds)\" on the x-axis (ranging from 0 to 60) and \"distance (meters)\" on the y-axis (ranging from 0 to 350). A straight line passes through the origin with a positive slope, representing Runner #1's distance over time. The line has a slope of 40 since it passes through the point (50, 200)\\]\n\n- Runner #3's information is in the table:\n\n| time (seconds) | distance (meters) |\n| --- | --- |\n| 9 | 45 |\n| 11 | 55 |\n| 25 | 125 |\n| 45 | 225 |\n| 60 | 300 |\n\n- The equation that relates Runner #2's distance (in meters) with time (in seconds) is *d* = 6.5*t*.\n\nWhich of the three runners runs the fastest? Explain your reasoning.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 576.3986013986014,
                        "y": 615.0996503496503,
                        "z": 0.37780713342140027
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:841691695": {
                      "id": "asset:841691695",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1094,
                        "w": 1514,
                        "src": "https://www.podsie.org/api/public-assets/651",
                        "name": "tldrawFile",
                        "fileSize": 493349,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:ZVZiIcKm-q5cGmrmncL3e": {
                      "x": -407,
                      "y": -173.5,
                      "id": "shape:ZVZiIcKm-q5cGmrmncL3e",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1094,
                        "w": 1514,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:841691695",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/653",
              "acceptanceCriteria": "**Solution** Runner #2 runs the fastest.\n\n- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. As long as their work or explanation demonstrates basic understanding of the concept, students should be given full explanation score.\n- all mathematically valid explanations OR work shown should be given full explanation score. \n\n**Sample Responses:**\n\n- Using the points (0, 0) and (50, 200) from Runner #1's graph, the slope is 4, showing that they run 4 meters every second. Runner #2's equation shows that they run 6.5 meters every second. Within the table, the unit rate for Runner #3 is 5 meters per second because 45  9 = 5. Since Runner #2 travels farther every second, Runner #2 is the fastest.\n- Runner #1 goes at 4 meters per second, Runner #2 goes at 6.5 meters per second, and Runner #3 goes at 5 meters per second. Runner #2 is the fastest because they travel the greatest distance in 1 second.",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 18939,
            "questionContent": {
              "questionText": "A linear equation is described in terms of a constraint on the total cost to purchase a combination of notebooks and pencils with a given budget. The constraint gives an equation that students produce. Students then graph the solutions to the equation.\n\nA store is selling notebooks for $1.00 and pencils for $0.25. Jada has $10.00 to spend on school supplies.\n\na. Complete the table showing three ways Jada can spend all $10.00 on notebooks and pencils.\n\n| number of notebooks (*n*) | number of pencils (*p*) |\n| --- | --- |\n| 6 |  |\n|  | 4 |\n| 2 |  |\n\nb. Write an equation describing the number of notebooks *n*, and pencils *p* that Jada can buy for $10.00.\n\nc. Draw a graph of the solutions to your equation.\n\n\\[Image shows: A blank coordinate grid with axes and the origin marked, but no other labels or scales marked.\\]\n\nd. Notebooks still cost $1.00 and pencils still cost $0.25, but now Jada has $15 to spend on supplies. How would a graph representing this new situation be the same and different from the graph representing when Jada had $10 to spend?\n\nExplain your thinking for each part.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 401.9615384615386,
                        "y": 298.4423076923074,
                        "z": 0.45614035087719296
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-513243371": {
                      "id": "asset:-513243371",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1260,
                        "w": 1254,
                        "src": "https://www.podsie.org/api/public-assets/654",
                        "name": "tldrawFile",
                        "fileSize": 504044,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:WugUUFpdSdB6MuZci3c7c": {
                      "x": -145.86403245192287,
                      "y": 1105.5423677884614,
                      "id": "shape:WugUUFpdSdB6MuZci3c7c",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a2BYb",
                      "props": {
                        "w": 500,
                        "font": "sans",
                        "size": "m",
                        "color": "black",
                        "scale": 1.2878877918956049,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Explain your thinking for each part.",
                                  "type": "text"
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:YgYFEGC6PMjKfkxsDHI2W": {
                      "x": -277,
                      "y": -256.5,
                      "id": "shape:YgYFEGC6PMjKfkxsDHI2W",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1260,
                        "w": 1254,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-513243371",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/658",
              "acceptanceCriteria": "\na. Students complete the table\n\n| number of notebooks (*n*) | number of pencils (*p*) |\n| --- | --- |\n| 6 | 16 |\n| 9 | 4 |\n| 2 | 32 |\n\nb. *n* + 0.25*p* = 10 (or equivalent)\n\nc. Sample graph: \n\n- The graph may be a continuous line, or it may consist only of points representing whole numbers of notebooks and pencils.\n- The graph may have the axes and labels reversed, where the number of pencils is on the horizontal axis, and the number of notebooks is on the vertical axis.\n- The intercepts show 40 pencils and 10 notebooks (depending upon axes)\n\nd. Sample responses: The two graphs would have the same slope but different vertical intercepts. The graph of the new line would be parallel to the graph of the original line.\n\n\nThis question is a special type where the explanation score is ONLY for part d. Parts a, b, and c do not need to be considered for the explanation score, all that is required for those parts are the correct answers. \n\nFor Part D:\n- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. As long as their work or explanation demonstrates basic understanding of the concept, students should be given full explanation score.\n- all mathematically valid explanations OR work shown should be given full explanation score.",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 18940,
            "questionContent": {
              "questionText": "Han has a music playlist and each day he adds more songs to his list. The equation *y* = 4*x* + 20 describes Han's playlist, where *x* is the number of days, and *y* is the total number of songs.\n\nTyler also has a music playlist. A graph representing the number of songs on Tyler's playlist each day has a vertical intercept at (0, 12) and is parallel to the graph describing Han's music playlist.\n\nTyler says that in 3 days he will have more songs on his playlist than Han will have on his. Do you agree or disagree with Tyler? Explain your reasoning.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 499.3006993006993,
                        "y": 532.8251748251748,
                        "z": 0.41210374639769454
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-1638995547": {
                      "id": "asset:-1638995547",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 474,
                        "w": 1388,
                        "src": "https://www.podsie.org/api/public-assets/659",
                        "name": "tldrawFile",
                        "fileSize": 411251,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:J8KquL51zJzEQS4_akQ6O": {
                      "x": -344,
                      "y": 136.5,
                      "id": "shape:J8KquL51zJzEQS4_akQ6O",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 474,
                        "w": 1388,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-1638995547",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/660",
              "acceptanceCriteria": "Students analyze the descriptions of two nonproportional linear relationships and use what they know about slopes and vertical intercepts to determine whether a given statement is true.\n\n**Solution**\nI disagree with Tyler. \n\n- An explanation that compares the slopes and vertical intercepts without providing numbers, or an explanation that includes a graph or equation is also acceptable.\n\n**Sample reasoning:** \n\n- The equation that represents Hans music playlist has a slope of 4 and a y-intercept of 20, which means that Han starts out with 20 songs on his playlist and adds 4 songs each day. The graph representing Tylers playlist has a -intercept of 12 and is parallel to a graph of Hans playlist, which means that Tyler starts out with 12 songs on his playlist and also adds 4 songs each day. Both Han and Tyler add the same amount of songs each day, so the rate of change for both situations is the same. However, since Han started out with more songs, Tyler will never catch up or have more songs on his playlist than Han.\n\n\n- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. As long as their work or explanation demonstrates basic understanding of the concept, students should be given full explanation score.\n- all mathematically valid explanations OR work shown should be given full explanation score.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Peanut Butter & Jelly Sandwich",
      "assignment_id": 17917,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17917/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16320,
            "questionContent": {
              "questionText": "Explain the steps to make a peanut butter and jelly sandwich to someone who has never made a peanut butter and jelly sandwich before.\n\n(students see an image of two pieces of bread, on with peanut butter and one with jelly on it, both with smiles on their faces)",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": -656,
                        "y": -31.000244140625,
                        "z": 1
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:427704366": {
                      "id": "asset:427704366",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 459,
                        "w": 612,
                        "src": "https://www.podsie.org/api/public-assets/223",
                        "name": "tldrawFile",
                        "fileSize": 144574,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "asset:2124796425": {
                      "id": "asset:2124796425",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 420,
                        "w": 651,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile72e62b40-5037-414a-b369-92e97c583f62.png",
                        "name": "tldrawFile",
                        "fileSize": 82131,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:WrBS0bshNFqjsBfml9ENR": {
                      "x": 1507.375,
                      "y": 332.412353515625,
                      "id": "shape:WrBS0bshNFqjsBfml9ENR",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a69mA",
                      "props": {
                        "h": 141.244140625,
                        "w": 188.32552083333334,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:427704366",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:cNW3EfQU-p8d9i3EPA8qb": {
                      "x": 767.1953125,
                      "y": 255.359375,
                      "id": "shape:cNW3EfQU-p8d9i3EPA8qb",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a1",
                      "props": {
                        "w": 920,
                        "font": "draw",
                        "size": "m",
                        "color": "black",
                        "scale": 1,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Explain the steps to make a peanut butter and jelly sandwich to someone who has never made a peanut butter and jelly sandwich before.",
                                  "type": "text"
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/226",
              "acceptanceCriteria": "Criteria for success for an excellent student response would include:\n- Stating each step in a sequential order.\n- Providing descriptions that would allow someone to visualize the process.\n- Including at least 4 steps that cover the basic parts of making a peanut butter and jelly sandwich, such as getting the bread, opening the jars of the peanut butter and the jelly, using a knife to spread the jelly and peanut butter on the bread, and putting the piece of bread together.\n\nAdditional notes:\n- Creativity should be accepted while maintaining the recognizable form of a peanut butter and jelly sandwich.\n- These are students, and the key point is to give them a fun way to practice explaining something clearly, so don't be overly nitpicky.\n- Expect simple language appropriate for an elementary school student",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up #1: Introduction to the Coordinate Plane",
      "assignment_id": 17644,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17644/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 15202,
            "questionContent": {
              "questionText": "Label the coordinate plane below and explain each part.\n\nLABELS: X-axis Y-axis Origin Ordered pair Quadrant II\n\n**Image Description:** A coordinate plane with visual markers showing different components. The blue vertical line represents the y-axis, the purple horizontal line represents the x-axis, the red dot marks the origin where the axes intersect, the green dot located at (-3, -3) represents an ordered pair (plotted point), and the orange shaded area indicates Quadrant II (upper left section).",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 772.1597444089455,
                        "y": 419.15654952076676,
                        "z": 0.4735249621785174
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:Y7LMOolx_0p-ROZ7Onp6_"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-233435044": {
                      "id": "asset:-233435044",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1322,
                        "w": 2404,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfilee7b9a215-6d0c-4861-ba36-ea41ad5b456d.png",
                        "name": "tldrawFile",
                        "fileSize": 490939,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:Y7LMOolx_0p-ROZ7Onp6_": {
                      "x": -507.5,
                      "y": -284,
                      "id": "shape:Y7LMOolx_0p-ROZ7Onp6_",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1322,
                        "w": 2404,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-233435044",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close0aee6519-40f2-40bd-a03d-724b2125f334.png",
              "acceptanceCriteria": "- Student correctly matches all five visual elements to their corresponding labels (blue line = Y-axis, purple line = X-axis, red dot = Origin, green dot = Ordered pair, orange area = Quadrant II) with mathematically sound reasoning\n- Explanation is not required to be marked correct - student response can be correct simply by labeling all five visual elements correctly\n- If present, explanation does not need to be mathematically rigorous nor thorough\n- If a term is misspelled in the student response but the intended term is still clearly apparent (for example: orign vs. origin), the student response should still be marked correct - give feedback on this spelling error in the feedback\n\n**Sample responses:**\n\n- \"Blue line = Y-axis: The vertical line that measures up and down movement. Purple line = X-axis: The horizontal line that measures left and right movement. Red dot = Origin: The center point (0, 0) where the axes meet. Green dot = Ordered pair: A point with specific coordinates. Orange area = Quadrant II: The upper left section where x is negative and y is positive.\"\n- \"The Y-axis goes vertically, the X-axis goes horizontally, the Origin is at (0, 0), the Ordered pair shows a plotted point's location, and Quadrant II is in the upper left where coordinates have the form (-x, +y).\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up #2: Which Solution Makes the Equation True?",
      "assignment_id": 17645,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17645/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 15203,
            "questionContent": {
              "questionText": "What is the value of b in this equation? Show your work and explain how you solved.\n\nEquation: 8b - 12 = 52",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": -39.67660535151006,
                        "y": -281.3218363787787,
                        "z": 1.0036463081130356
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:oIltqGx7sQK1itrtASngy"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:1612532135": {
                      "id": "asset:1612532135",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 283,
                        "w": 1097,
                        "src": "https://www.podsie.org/api/public-assets/740",
                        "name": "tldrawFile",
                        "fileSize": 101801,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "asset:-2076604201": {
                      "id": "asset:-2076604201",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1332,
                        "w": 2406,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile45f1bcce-f761-4d70-81b5-490a47a97304.png",
                        "name": "tldrawFile",
                        "fileSize": 372700,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:oIltqGx7sQK1itrtASngy": {
                      "x": 103.44408945686882,
                      "y": 784.47124600639,
                      "id": "shape:oIltqGx7sQK1itrtASngy",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 283,
                        "w": 1097,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:1612532135",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/741",
              "acceptanceCriteria": "- Student correctly identifies 8 as the answer\n- Student demonstrates the algebraic solution process by isolating the variable through inverse operations (adding 12 to both sides, then dividing by 8) or an alternative, mathematically sound method\n- Explanation does not need to be mathematically rigorous nor thorough\n\n**Sample responses:**\n\n- \"First I added 12 to both sides: 8b - 12 + 12 = 52 + 12, so 8b = 64. Then I divided both sides by 8: 8b  8 = 64  8, so b = 8.\"\n- \"The answer is  8. I solved by using inverse operations to isolate b. Adding 12 to both sides gives 8b = 64, then dividing by 8 gives b = 8.\"\n- \"8. To check: 8(8) - 12 = 64 - 12 = 52 . I solved by first adding 12 to both sides, then dividing by 8.\"\n- \"I need to isolate b. Step 1: 8b - 12 + 12 = 52 + 12  8b = 64. Step 2: 8b  8 = 64  8  b = 8.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up #3: Independent & Dependent Variables",
      "assignment_id": 17646,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17646/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 15204,
            "questionContent": {
              "questionText": "Fill in the blanks below and explain how you know.\n\ny = 2x - 14\n\n\\_*\\_ is the independent variable \\_*\\_ is the dependent variable",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 820.9744408945687,
                        "y": 445.6549520766773,
                        "z": 0.4582723279648609
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:uKPtDPFYOvICE6bJQHGEI"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:453881308": {
                      "id": "asset:453881308",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1366,
                        "w": 2724,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfilebb4e0694-4bdb-443d-b9a1-ae071f049e60.png",
                        "name": "tldrawFile",
                        "fileSize": 397131,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:uKPtDPFYOvICE6bJQHGEI": {
                      "x": -667.5,
                      "y": -306,
                      "id": "shape:uKPtDPFYOvICE6bJQHGEI",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1366,
                        "w": 2724,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:453881308",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-closebfe9545f-8c66-45d8-b4f2-f5c5aa230e0d.png",
              "acceptanceCriteria": "- Student correctly identifies x as the independent variable and y as the dependent variable\n- Student demonstrates understanding of the relationship between variables (independent variable is the input that can be chosen, dependent variable is the output that depends on the input) with mathematically sound reasoning (or an alternative, valid explanation)\n- Explanation does not need to be mathematically rigorous nor thorough\n\n**Sample responses:**\n\n- \"x is the independent variable and y is the dependent variable. The independent variable is the input that I can choose any value for, and the dependent variable is the output that depends on what I choose for x.\"\n- \"x is independent because I can pick any value for x. y is dependent because its value depends on what I choose for x. When I substitute a value for x, it determines what y will be.\"\n- \"The independent variable is x because it's the input. The dependent variable is y because it depends on the value of x. For example, if x = 10, then y = 2(10) - 14 = 6.\"\n- \"x is independent and y is dependent. In the equation y = 2x - 14, y's value is determined by whatever value I put in for x, so y depends on x.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up #4: Two-variable Relationships",
      "assignment_id": 17647,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17647/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 15205,
            "questionContent": {
              "questionText": "What is the value of y when x = 5? Show your work and explain how you solved.\n\ny = 2x - 14",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 811.2597145122918,
                        "y": 440.3814432989691,
                        "z": 0.4612289685442575
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:lwqo_Vo9V1v01sm8Ahibk"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-1754289097": {
                      "id": "asset:-1754289097",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 848,
                        "w": 2734,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile1f9e285c-2165-4556-8a98-a0ed0e9ae808.png",
                        "name": "tldrawFile",
                        "fileSize": 309813,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:lwqo_Vo9V1v01sm8Ahibk": {
                      "x": -672.5,
                      "y": -47,
                      "id": "shape:lwqo_Vo9V1v01sm8Ahibk",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 848,
                        "w": 2734,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-1754289097",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close99aeb05f-75f8-41ea-97ee-881c51c32c7d.png",
              "acceptanceCriteria": "- Student correctly calculates y = -4\n- Student demonstrates one of the following strategies:\n    - the substitution and calculation process (substituting x = 5 and following order of operations to get y = 2(5) - 14 = 10 - 14 = -4) or an alternative, mathematically sound method\n    - solving with balanced moved (i.e. adding 14 to both sides then dividing both sides by 2)\n    - or another alternative, valid mathematical strategy\n- Interpret steps taken in the student response to find the value of y, but do not penalize students if they fail to provide Step 1:  Step 2:  \n- When providing feedback to students, organize feedback according to the steps provided in the student response\n- Explanation does not need to be mathematically rigorous nor thorough\n\n**Sample responses:**\n\n- \"y = -4. I substituted x = 5 into the equation: y = 2(5) - 14 = 10 - 14 = -4.\"\n- \"When x = 5, y = -4. I solved by replacing x with 5 in the equation y = 2x - 14, which gives me y = 2(5) - 14 = 10 - 14 = -4.\"\n- \"y = -4. First I multiplied 2  5 = 10, then subtracted 14: 10 - 14 = -4.\"\n- \"I substituted 5 for x: y = 2(5) - 14. Following order of operations: y = 10 - 14 = -4.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up #5: Equivalent Expressions Using Like Terms",
      "assignment_id": 17648,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17648/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 15206,
            "questionContent": {
              "questionText": "Which expression is equivalent to the expression shown below? Show your work and explain how you solved.\n\n9(-4+2-4v)\n\nA. -18 - 36v B. 18 - 36v C. -36 - 36v D. -54 - 36v",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 960.7619808306708,
                        "y": 521.5367412140575,
                        "z": 0.4195710455764075
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:_4c3AfXcSgRoOUzt4EDAe"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-775428823": {
                      "id": "asset:-775428823",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1492,
                        "w": 2716,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile7be063e1-3669-4b9d-a932-c0f828ce16bd.png",
                        "name": "tldrawFile",
                        "fileSize": 505723,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:_4c3AfXcSgRoOUzt4EDAe": {
                      "x": -663.5,
                      "y": -369,
                      "id": "shape:_4c3AfXcSgRoOUzt4EDAe",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1492,
                        "w": 2716,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-775428823",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close87057e5d-48c2-4e45-9a12-452055567574.png",
              "acceptanceCriteria": "- Student correctly identifies A. -18 - 36v as the answer\n- Student demonstrates mathematically valid application of the distributive property (distributing 9 to each term and combining like terms) or an alternative, mathematically sound method\n- Interpret steps taken in the student response to find the value of y, but do not penalize students if they fail to provide Step 1:  Step 2: \n- When providing feedback to students, organize feedback according to the steps provided in the student response\n- Explanation does not need to be mathematically rigorous nor thorough\n\n**Sample responses:**\n\n- \"A. -18 - 36v. I used the distributive property: 9(-4+2-4v) = 9(-4) + 9(2) + 9(-4v) = -36 + 18 - 36v = -18 - 36v.\"\n- \"The answer is A. I distributed the 9 to each term: 9(-4) = -36, 9(2) = 18, and 9(-4v) = -36v. Then I combined: -36 + 18 - 36v = -18 - 36v.\"\n- \"A. -18 - 36v. First I simplified inside the parentheses: -4 + 2 = -2, so I have 9(-2 - 4v). Then I distributed: 9(-2) + 9(-4v) = -18 - 36v.\"\n- \"Using the distributive property, I multiply 9 by each term inside: 9(-4) + 92 + 9(-4v) = -36 + 18 - 36v = -18 - 36v. The answer is A.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up #6: Proportional Relationships",
      "assignment_id": 17649,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17649/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 15207,
            "questionContent": {
              "questionText": "Are the pairs of pants proportional to the number of boxes?\n\nShow your work and explain how you know.\n\n| Boxes | Pairs of Pants |\n| --- | --- |\n| 3 | 15 |\n| 5 | 25 |\n| 7 | 35 |\n| 9 | 45 |\n",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 802.4476605868358,
                        "y": 435.5979381443299,
                        "z": 0.463944076526858
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:4RReTSmjspPPAujJLtt3c"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:1577066718": {
                      "id": "asset:1577066718",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1324,
                        "w": 2718,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile603252b4-e65d-4ceb-8f63-83094df84b02.png",
                        "name": "tldrawFile",
                        "fileSize": 429482,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:4RReTSmjspPPAujJLtt3c": {
                      "x": -664.5,
                      "y": -285,
                      "id": "shape:4RReTSmjspPPAujJLtt3c",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1324,
                        "w": 2718,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:1577066718",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close12d39f63-2caf-420b-a3cb-0e27240725bb.png",
              "acceptanceCriteria": "- Student correctly identifies A. -18 - 36v as the answer\n- Student demonstrates mathematically valid application of the distributive property (distributing 9 to each term and combining like terms) or an alternative, mathematically sound method\n- Interpret steps taken in the student response to find the value of y, but do not penalize students if they fail to provide Step 1:  Step 2: \n- When providing feedback to students, organize feedback according to the steps provided in the student response\n- Explanation does not need to be mathematically rigorous nor thorough\n\n**Sample responses:**\n\n- \"Yes, they are proportional. I calculated the ratio for each row: 153=5, 255=5, 357=5, 459=5. Since all ratios equal 5, the relationship is proportional with a constant of proportionality of 5.\"\n- \"Yes, it's proportional. The ratio of pairs of pants to boxes is always 5:1. This means there are always 5 pairs of pants for every 1 box.\"\n- \"Yes, they are proportional because the relationship can be written as y = 5x, where x is boxes and y is pairs of pants. The constant rate is 5 pairs per box.\"\n- \"The relationship is proportional. I can tell because when I divide pairs of pants by boxes, I always get 5. This constant ratio means it's a proportional relationship.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 5: Introduction to Linear Relationships",
      "assignment_id": 17892,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17892/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16289,
            "questionContent": {
              "questionText": "A different style of cup is stacked. The graph shows the height of the stack in centimeters for different numbers of cups. How much does each cup after the first add to the height of the stack? Explain your reasoning.\n\n**Image Description:** Graph of line with points plotted including (3, 5.5) and (8, 8). The x-axis shows \"number of cups\" from 0 to 10, and the y-axis shows \"height in centimeters\" from 0 to 18. A straight line passes through the plotted points.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 484.42592592592655,
                        "y": 110.47222222222203,
                        "z": 0.6352941176470588
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:346027022": {
                      "id": "asset:346027022",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 774,
                        "w": 1530,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/imagecc25d8d6-b066-459b-93fe-cd7965dba60d.webp",
                        "name": "image.webp",
                        "fileSize": 40800,
                        "mimeType": "image/webp",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:TnzLZT-YmMjjlbdPW8AQL": {
                      "x": -231,
                      "y": -4,
                      "id": "shape:TnzLZT-YmMjjlbdPW8AQL",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 774,
                        "w": 1530,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:346027022",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close4972c297-ba18-484c-8b93-2b69a94a937a.png",
              "acceptanceCriteria": "- Student correctly identifies that each cup after the first adds 0.5 centimeters to the height with sound mathematical reasoning\n- Student strategies may use slope calculation, point analysis, or proportional reasoning to explain\nSample response:\nEach cup after the first adds 0.5 centimeters (or equivalent). Since 5 cups add 2.5 centimeters to the height of the stack, each cup adds 0.5 centimeters.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 6: More Linear Relationships",
      "assignment_id": 17897,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17897/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16294,
            "questionContent": {
              "questionText": "### Question Text\n\nThe graph shows the savings in Andre's bank account.\n\n1. Calculate the slope and explain what it represents in this situation.\n2. Determine the vertical intercept and explain what it represents in this situation.\n\n**Image Description:** Graph with horizontal axis labeled \"time in weeks\" (scale 0 to 10, by 1's) and vertical axis labeled \"savings in dollars\" (scale 0 to 80, by 20's). A line starts at (0, 40), passing through (4, 60) and (8, 80).",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 513.90888066605,
                        "y": 364.2844588344126,
                        "z": 0.5405
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:309435104": {
                      "id": "asset:309435104",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1097,
                        "w": 2000,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile121811f6-7300-4cf7-ac46-d143fd284f32.png",
                        "name": "tldrawFile",
                        "fileSize": 271364,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:UjSXGXTpA6fgb4sJcLBlK": {
                      "x": -395.5,
                      "y": -120,
                      "id": "shape:UjSXGXTpA6fgb4sJcLBlK",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1097,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:309435104",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close50a84df5-628b-4d97-b6fe-e51bf3f9f4ca.png",
              "acceptanceCriteria": "- Student correctly calculates the slope as 5 (or equivalent such as 20/4)\n- Student explains that the slope represents Andre saving $5 per week\n- Student correctly identifies the vertical intercept as 40\n- Student explains that the vertical intercept represents Andre's initial amount of $40 in his bank account\n\n**Sample responses:**\n\n1. The slope is 5 and means that Andre saves 5 dollars every week.\n2. The vertical intercept is 40 and means that Andre initially had 40 dollars in his bank account.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 8: Translating to y=mx+b",
      "assignment_id": 17898,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17898/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16295,
            "questionContent": {
              "questionText": "### Question Text\n\nDescribe how the graph of y = 2x is the same and different from the graph of y = 2x - 7.\n\nExplain or show your reasoning.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 513.90888066605,
                        "y": 364.2844588344126,
                        "z": 0.5405
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:2-D0RAhKndmnbHvMsjcbS"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:2098683047": {
                      "id": "asset:2098683047",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 361,
                        "w": 2000,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfileaa143c5c-58cf-4fc5-a61a-064a0c327e43.png",
                        "name": "tldrawFile",
                        "fileSize": 91230,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:2-D0RAhKndmnbHvMsjcbS": {
                      "x": -395.5,
                      "y": 248,
                      "id": "shape:2-D0RAhKndmnbHvMsjcbS",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 361,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:2098683047",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close96439103-2069-4146-a874-f4d10242c95c.png",
              "acceptanceCriteria": "- Student identifies that both lines have the same slope (2) with sound mathematical reasoning - could also be called rate of change\n- Student recognizes that the lines have different y-intercepts (also called vertical intercepts) (0 for y = 2x and -7 for y = 2x - 7)\n- The lines are parallel to each other, with one line being a translation of the other line.\n- Students need to reference at least one of the above strategies.\n\n**Sample responses:**\n\n- Both lines have a slope of 2, but one line has a y-intercept of 0 while the other has a y-intercept at -7.\n- Both lines have the same slope but different vertical intercepts.\n- The lines are parallel to each other, with one line being a translation of the other line.\n- Both lines have the same rate of change, but cross the y-axis (or x-axis) at different points.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 9: Slopes Don't Have to be Positive",
      "assignment_id": 17902,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17902/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16302,
            "questionContent": {
              "questionText": "### Question Text\n\nMatch each graph with the situation that could describe the line.\n\n1. A tank is set up to collect rainwater. During a storm, 3 gallons of rainwater is collected each minute.\n2. After the storm, no water is used and no additional water is collected.\n3. Several days later, rainwater from the tank is used to irrigate a garden at a rate of 8 gallons of water per minute.\n\nExplain or show your reasoning.\n\n**Image Description:** Three coordinate plane graphs labeled A, B, and C showing different linear relationships between time (minutes) on the x-axis and water (gallons) on the y-axis.\n\n- Graph A: A line with negative slope (decreasing)\n- Graph B: A horizontal line (constant)\n- Graph C: A line with positive slope (increasing)",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 1013.304526748971,
                        "y": 718.281207133059,
                        "z": 0.37365453613531524
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:eQj3wapmMLYDFAoItZK56"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-1230558758": {
                      "id": "asset:-1230558758",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1951,
                        "w": 2000,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile0b73612b-842c-466f-ae9c-ac94cf619265.png",
                        "name": "tldrawFile",
                        "fileSize": 442379,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:eQj3wapmMLYDFAoItZK56": {
                      "x": -395.5,
                      "y": -547,
                      "id": "shape:eQj3wapmMLYDFAoItZK56",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1951,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-1230558758",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close5f70912b-15b6-4a66-8eae-4c90100351f7.png",
              "acceptanceCriteria": "- Student correctly matches Graph A with Situation 3 (negative slope represents water being used/removed) with sound mathematical reasoning\n- Student correctly matches Graph B with Situation 2 (horizontal line represents no change)  with sound mathematical reasoning\n- Student correctly matches Graph C with Situation 1 (positive slope represents water being collected/added) with sound mathematical reasoning\n\n**Sample response:**\nGraph A: Situation 3\nGraph B: Situation 2\nGraph C: Situation 1",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 10: Calculating Slope",
      "assignment_id": 17904,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17904/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16303,
            "questionContent": {
              "questionText": "### Question Text\n\nFind the slope of the line that passes through each pair of points.\n\n1. (0, 5) and (8, 2)\n2. (2, -1) and (6, 1)\n3. (-3, -2) and (-1, -5)\n\nExplain or show your reasoning.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 513.90888066605,
                        "y": 364.2844588344126,
                        "z": 0.5405
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:G9uoXUKag33o6Bb2D9mou"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-1771902078": {
                      "id": "asset:-1771902078",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 630,
                        "w": 2000,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile7d385336-ca3e-4848-b4f9-527abce6c973.png",
                        "name": "tldrawFile",
                        "fileSize": 131404,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:G9uoXUKag33o6Bb2D9mou": {
                      "x": -395.5,
                      "y": 113.5,
                      "id": "shape:G9uoXUKag33o6Bb2D9mou",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 630,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-1771902078",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-close9094d46c-0ae2-4813-a24c-f640611e47f9.png",
              "acceptanceCriteria": "- Student correctly calculates slope using sound mathematical reasoning\n    - Such as:\n        - using the slope formula: (y2 - y1)/(x2 - x1)\n        - drawing each point and finding the (change in vertical)/(change in horizontal)\n        - or another valid mathematical strategy to find slope\n- Each calculated slope can be a decimal or any equivalent fraction matching the sample responses below\n\n**Sample responses:**\n\n1. 3/8 (or equivalent)\n2. 1/2 (or equivalent)\n3. 3/2 (or equivalent)",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 12: Equations of All Kinds of Lines",
      "assignment_id": 17905,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17905/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16304,
            "questionContent": {
              "questionText": "### Question Text\n\nHere are 5 lines in the coordinate plane:\n\nWrite equations for lines a, b, c, d, and e.\n\nLine *a*:\n\nLine *b*:\n\nLine *c*:\n\nLine *d*:\n\nExplain or show your reasoning.\n\n**Image Description:**\n\nCoordinate plane showing 5 lines labeled a, b, c, d, and e. The graph displays various types of lines including horizontal, vertical, and lines with different slopes for students to analyze and write equations.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 896.8876040703094,
                        "y": 246.37370626445417,
                        "z": 0.5405
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-528977732": {
                      "id": "asset:-528977732",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1222,
                        "w": 2000,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile5971cdd4-4fe3-4813-b09d-69652c21aee5.png",
                        "name": "tldrawFile",
                        "fileSize": 315180,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:1sFnlm_ijPnD-uVJEyZU-": {
                      "x": -334.81400323774426,
                      "y": 818.5907363812441,
                      "id": "shape:1sFnlm_ijPnD-uVJEyZU-",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a326E",
                      "props": {
                        "w": 500,
                        "font": "sans",
                        "size": "s",
                        "color": "black",
                        "scale": 2.728010723253224,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Line e:",
                                  "type": "text"
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:YI-7wqHak1atmLjVjaYEP": {
                      "x": -404.7362395929696,
                      "y": 1061.5376387604074,
                      "id": "shape:YI-7wqHak1atmLjVjaYEP",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a2Boh",
                      "props": {
                        "h": 142.4440333024977,
                        "w": 2000,
                        "url": "",
                        "crop": {
                          "topLeft": {
                            "x": 0,
                            "y": 0.8834336879684962
                          },
                          "bottomRight": {
                            "x": 1,
                            "y": 1
                          }
                        },
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-528977732",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:mWxwhR8JjOwfKo2l23q20": {
                      "x": -395.5,
                      "y": -182.5,
                      "id": "shape:mWxwhR8JjOwfKo2l23q20",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1082.1121646623496,
                        "w": 2000,
                        "url": "",
                        "crop": {
                          "topLeft": {
                            "x": 0,
                            "y": 0
                          },
                          "bottomRight": {
                            "x": 1,
                            "y": 0.8855255029970128
                          }
                        },
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-528977732",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/687",
              "acceptanceCriteria": "- Student writes vertical lines in the format: x = constant\n    - Yellow line and red line\n- Student writes horizontal lines in the format: y = constant\n    - Blue line and green line\n- Student correctly determines slope and y-intercept for non-horizontal/vertical lines and writes in slope-intercept form (or equivalent form): y = mx + b\n    - line *e*\n\n**Sample responses:**\nline a: x = -4, line b: x = 4, line c: y = 4, line d: y = -2, line e: y = -3/4 x + 1 (or equivalent)",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 13: Solutions to Linear Equations",
      "assignment_id": 17907,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17907/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16306,
            "questionContent": {
              "questionText": "Select all the coordinates that represent a point on the graph of the line x - 9y = 12.\n\nA. (12, 0)\n\nB. (0, 12)\n\nC. (3, -1)\n\nD. (0, -4/3)\n\nE. (-3, 1)\n\nExplain or show your reasoning.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 513.90888066605,
                        "y": 364.2844588344126,
                        "z": 0.5405
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:2eYWruXjTLjWQqdQrPFQZ"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:1516850009": {
                      "id": "asset:1516850009",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 863,
                        "w": 2000,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile1f1eba0a-83e4-40ec-81b8-547fd77f1bde.png",
                        "name": "tldrawFile",
                        "fileSize": 144731,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:2eYWruXjTLjWQqdQrPFQZ": {
                      "x": -395.5,
                      "y": -3,
                      "id": "shape:2eYWruXjTLjWQqdQrPFQZ",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 863,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:1516850009",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-closed65fbfe8-bbb3-4b92-9178-e862b18ba14f.png",
              "acceptanceCriteria": "- Student correctly identifies options A, C, and D as points on the line with mathematically sound reasoning\n- Student demonstrates a valid verification method (including but not limited to substitution, graphing, slope analysis, or intercept method) to determine which coordinate pairs satisfy the equation x - 9y = 12 with mathematically sound reasoning\n\n**Sample response:**\nA, C, D",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 14: More Solutions to Linear Equations",
      "assignment_id": 17908,
      "module_name": "Alg 1 Unit 8.3",
      "assignment_url": "http://www.podsie.org/student/assignments/17908/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 16307,
            "questionContent": {
              "questionText": "### Question Text\n\nDoes the graph of the line for 3x - y = -6 pass through the points (-2, 0) and (0, -6)? Explain your reasoning.",
              "explanation": "n/a",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 251.0827937095282,
                        "y": 177.98011100832554,
                        "z": 0.7065359477124183
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:dgK1iF9wm4NhvmPih-vGT"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:30778368": {
                      "id": "asset:30778368",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 190,
                        "w": 1530,
                        "src": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/tldrawfile825eb239-c066-464f-b5c2-18cab5aa6d00.png",
                        "name": "tldrawFile",
                        "fileSize": 52841,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:dgK1iF9wm4NhvmPih-vGT": {
                      "x": -160.5,
                      "y": 333.5,
                      "id": "shape:dgK1iF9wm4NhvmPih-vGT",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 190,
                        "w": 1530,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:30778368",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 3,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://api.podsie.org/storage/v1/object/public/images/message-attachments/images/canvas-preview-closec8a6f81b-936c-4865-9cea-fa99112e9925.png",
              "acceptanceCriteria": "- Student correctly determines that the line passes through (-2, 0) but not through (0, -6) with mathematically sound reasoning\n- Student demonstrates a valid verification method (substitution, graphing, or algebraic analysis) to test whether each point satisfies the equation with mathematically sound reasoning\n\n**Sample response:**\nThe graph passes through the point (-2, 0) but not through the point (0, -6). \nSample reasoning: Since 3(-2) - 0 = -6, the point (-2, 0) is a solution to the equation and will lie on the line. Since 3(0) - (-6) = 6, and not -6, the point (0, -6) is not a solution and will not lie on the line.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Month 1 Student Survey",
      "assignment_id": 18634,
      "module_name": "Student Surveys",
      "assignment_url": "http://www.podsie.org/student/assignments/18634/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19871,
            "questionContent": {
              "questionText": "Do you learn math better with the new model we're using this school year (Zearn + Podsie) or the way you learned math last school year?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "a7d23d0a-1253-40d5-a252-68197bd65f89",
                  "answerText": "Much better this year with the new model",
                  "isCorrect": true
                },
                {
                  "id": "cddac2b2-6113-4d63-8226-bedd07f42a3c",
                  "answerText": "A little better this school year with the new model",
                  "isCorrect": false
                },
                {
                  "id": "600b65e3-894c-46f9-8249-860fd92b0239",
                  "answerText": "About the same",
                  "isCorrect": false
                },
                {
                  "id": "d2e3c130-1fbb-45c9-8015-540464c5c217",
                  "answerText": "A little better last year",
                  "isCorrect": false
                },
                {
                  "id": "408e0094-4d54-4978-a9eb-69211c6662d1",
                  "answerText": "Much better last year",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19872,
            "questionContent": {
              "questionText": "Do you learn more math with the new model we're using this school year (Zearn + Podsie), or the way you learned math last school year?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "016f83c6-f65c-4ed9-ab26-b0b4e8725169",
                  "answerText": "Much more this year with the new model",
                  "isCorrect": true
                },
                {
                  "id": "e86af037-6cfb-4d82-b01b-86cd8ecf21f3",
                  "answerText": "A little more this year with the new model",
                  "isCorrect": false
                },
                {
                  "id": "c41d8d76-5d14-4519-9c2c-68a36436a438",
                  "answerText": "About the same",
                  "isCorrect": false
                },
                {
                  "id": "645fbc9c-b715-4408-97c6-e0edc371fbe8",
                  "answerText": "A little more last year",
                  "isCorrect": false
                },
                {
                  "id": "f4ae1268-288b-454c-aa12-26502c751e18",
                  "answerText": "Much more last year",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19873,
            "questionContent": {
              "questionText": "How challenged do you feel in this class?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "33f043d7-896b-4d34-8b21-30662657721d",
                  "answerText": "Too easy for me",
                  "isCorrect": true
                },
                {
                  "id": "213cdf36-1417-4e7d-90d3-8b34a99a89db",
                  "answerText": "Just right for me",
                  "isCorrect": false
                },
                {
                  "id": "8297662a-11ad-4c68-a09a-909a9769ce91",
                  "answerText": "Too hard for me",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19874,
            "questionContent": {
              "questionText": "How much are you able to learn at your own pace?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "613cc996-c5cd-4e78-9aaa-24552d11ef49",
                  "answerText": "Not at all",
                  "isCorrect": true
                },
                {
                  "id": "399ed629-8cf3-404f-aca6-e7d2c9c9ef3e",
                  "answerText": "A little",
                  "isCorrect": false
                },
                {
                  "id": "c83440c2-d501-4f8c-80e6-2ed48f7c28ad",
                  "answerText": "Some",
                  "isCorrect": false
                },
                {
                  "id": "011ab135-c3a2-4bf7-8c30-7396d560892b",
                  "answerText": "Very",
                  "isCorrect": false
                },
                {
                  "id": "e386ec6a-3d28-4eb0-8482-aac083fd4664",
                  "answerText": "Completely",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19875,
            "questionContent": {
              "questionText": "Would you rather your math class be like this school year's model (Zearn + Podsie), or how you learned in last school year's math class?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "65abe30a-33ec-44a6-80f5-e834f3e41db1",
                  "answerText": "This school year's model",
                  "isCorrect": true
                },
                {
                  "id": "38ce52b9-58dd-4a9a-83ad-6caa9f47f49c",
                  "answerText": "How we learned last school year",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19876,
            "questionContent": {
              "questionText": "Why do you feel this way?",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19877,
            "questionContent": {
              "questionText": "Do your teachers have a good understanding of your math abilities?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "24f320db-c9df-4f59-9b66-26a4110ce1c9",
                  "answerText": "Yes",
                  "isCorrect": true
                },
                {
                  "id": "3216885b-d009-4e9b-8027-e5da4d39754d",
                  "answerText": "Kind of",
                  "isCorrect": false
                },
                {
                  "id": "b26800b5-32fd-4fb3-b7b5-c4cb6792d8ca",
                  "answerText": "No",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19879,
            "questionContent": {
              "questionText": "How supported do you feel by your math teachers?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "da9d3240-ed97-40ae-b394-697125c4b045",
                  "answerText": "Not at all supported",
                  "isCorrect": true
                },
                {
                  "id": "c5173816-36fd-4cd4-986b-4690b23ea97c",
                  "answerText": "A little supported",
                  "isCorrect": false
                },
                {
                  "id": "061de811-dd50-494e-9bc7-733386729b83",
                  "answerText": "Somewhat supported",
                  "isCorrect": false
                },
                {
                  "id": "1243587e-0c85-4e17-b472-5b64b3430268",
                  "answerText": "Very supported",
                  "isCorrect": false
                },
                {
                  "id": "4913da8f-ad0d-4ebf-9f86-2f5fb1f67b55",
                  "answerText": "Extremely supported",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19880,
            "questionContent": {
              "questionText": "Share any additional thoughts or comments on your math teachers' support and understanding of your math abilities. (**optional,** put \"**n/a**\" if nothing additional to share)",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19881,
            "questionContent": {
              "questionText": "Do you feel like you are getting better at math this school year?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "dc7e4635-310e-4fb0-906d-267a99120439",
                  "answerText": "Yes",
                  "isCorrect": true
                },
                {
                  "id": "4bd7552f-b5d4-437a-9796-4820615b21d4",
                  "answerText": "Kind of",
                  "isCorrect": false
                },
                {
                  "id": "0fdba8a8-f53d-41dc-8aa2-521002391b23",
                  "answerText": "No",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19882,
            "questionContent": {
              "questionText": "What have you gotten better at in math this school year? (**optional,** put \"**n/a**\" if nothing additional to share)",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19883,
            "questionContent": {
              "questionText": "How likely are you to recommend this math class to a friend?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "39e882ae-7651-4f89-8b80-8a9451d291b0",
                  "answerText": "0",
                  "isCorrect": true
                },
                {
                  "id": "8ab9f75d-88ca-4b2a-b4d8-46dd052c7896",
                  "answerText": "1",
                  "isCorrect": false
                },
                {
                  "id": "b9ed0f42-7a27-41ae-8d29-75c5b82975ec",
                  "answerText": "2",
                  "isCorrect": false
                },
                {
                  "id": "50e92971-849e-46e7-80c7-97ce253b18cd",
                  "answerText": "3",
                  "isCorrect": false
                },
                {
                  "id": "82a48a4f-2610-4eec-8a86-34bd02a6fd54",
                  "answerText": "4",
                  "isCorrect": false
                },
                {
                  "id": "0f66a825-3213-4959-9af1-af687f047f07",
                  "answerText": "5",
                  "isCorrect": false
                },
                {
                  "id": "b5add438-fd3b-406e-bfe1-d60a359a8a5f",
                  "answerText": "6",
                  "isCorrect": false
                },
                {
                  "id": "74408576-04b3-49c9-8090-6ba6e95749d4",
                  "answerText": "7",
                  "isCorrect": false
                },
                {
                  "id": "903481ed-20b9-4fdf-86b7-176705d263bd",
                  "answerText": "8",
                  "isCorrect": false
                },
                {
                  "id": "c56bb769-bb2a-4df9-8b6b-d5bb3173231d",
                  "answerText": "9",
                  "isCorrect": false
                },
                {
                  "id": "e069ba23-963f-4e6a-a43f-490ad5cefbac",
                  "answerText": "10",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19886,
            "questionContent": {
              "questionText": "How do you feel when you're in this class?",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19887,
            "questionContent": {
              "questionText": "Is there anything you want your teacher to know about you? (**optional,** put \"**n/a**\" if nothing additional to share)",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19888,
            "questionContent": {
              "questionText": "How motivated are you to learn in math class this school year?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "9100b059-1d78-4207-9030-d606f6e7d31e",
                  "answerText": "Not at all motivated",
                  "isCorrect": true
                },
                {
                  "id": "6c35bdc6-7764-451a-87fd-c1249a236655",
                  "answerText": "A little motivated",
                  "isCorrect": false
                },
                {
                  "id": "913f2c26-a5cc-4015-b041-edd5fb50d48d",
                  "answerText": "Somewhat motivated",
                  "isCorrect": false
                },
                {
                  "id": "79ebccfb-bc8e-44c4-b615-adc030e152e5",
                  "answerText": "Very motivated",
                  "isCorrect": false
                },
                {
                  "id": "875824f6-64c3-4350-a484-f50c37d5b95d",
                  "answerText": "Extremely motivated",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19889,
            "questionContent": {
              "questionText": "How motivated are you to do the Zearn lessons?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "8341d68b-5df7-473f-9bc7-fa48832b3169",
                  "answerText": "Not at all motivated",
                  "isCorrect": true
                },
                {
                  "id": "93a3b101-c8a8-4974-8f6c-1480d7ea37a7",
                  "answerText": "A little motivated",
                  "isCorrect": false
                },
                {
                  "id": "c6830ed4-0a45-48dd-888e-f633b83160f9",
                  "answerText": "Somewhat motivated",
                  "isCorrect": false
                },
                {
                  "id": "76df8427-e8a6-40cd-9550-4a213ee3dfbd",
                  "answerText": "Very motivated",
                  "isCorrect": false
                },
                {
                  "id": "47133722-a5ea-4736-aa6a-43372aac7b33",
                  "answerText": "Extremely motivated",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19890,
            "questionContent": {
              "questionText": "What makes you want to or not want to do the Zearn lessons?",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19891,
            "questionContent": {
              "questionText": "How motivated are you to do the Podsie mastery checks?",
              "explanation": "N/A",
              "type": "multiple_choice",
              "answerChoices": [
                {
                  "id": "8aa917f5-cbe7-4817-b2ea-64fe3cf19abe",
                  "answerText": "Not at all motivated",
                  "isCorrect": true
                },
                {
                  "id": "9a86f6f2-f7a2-4dcc-83ff-da73738c05bc",
                  "answerText": "A little motivated",
                  "isCorrect": false
                },
                {
                  "id": "8dbc9f18-369e-4bc0-bd52-a124d1360da8",
                  "answerText": "Somewhat motivated",
                  "isCorrect": false
                },
                {
                  "id": "1a284132-f2ec-415f-8884-3cef962b3ffc",
                  "answerText": "Very motivated",
                  "isCorrect": false
                },
                {
                  "id": "71fe18b6-3710-4360-9da8-a76d651a352e",
                  "answerText": "Extremely motivated",
                  "isCorrect": false
                }
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19892,
            "questionContent": {
              "questionText": "What makes you want to or not want to do the Podsie mastery checks?",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19893,
            "questionContent": {
              "questionText": "What is working or helpful in math class? (**optional,** put \"**n/a**\" if nothing additional to share)",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19894,
            "questionContent": {
              "questionText": "What, if anything, could be improved in math class? (**optional,** put \"**n/a**\" if nothing additional to share)",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        },
        {
          "questions": {
            "id": 19895,
            "questionContent": {
              "questionText": "Is there anything else you'd like to share or ask about math class? (**optional,** put \"**n/a**\" if nothing additional to share)",
              "explanation": "N/A",
              "type": "free_response",
              "acceptanceCriteria": "Any response provided",
              "acceptableAnswers": [
                "Sample response"
              ]
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "End of Unit Assessment 8.6",
      "assignment_id": 19265,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/19265/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 23099,
            "questionContent": {
              "questionText": "1\\. Jada gathered data at her school among 7th and 8th graders to see if there was an association between grade level and playing sports. The table shows her data, but the number of 8th graders who play sports is missing.\n\nA table and bar graph showing sports participation data for 7th and 8th grade students. The table shows: 7th grade has 112 students who play sports and 52 who don't play sports; 8th grade has a blank entry for students who play sports and 84 who don't play sports.\n\nThe bar graph displays this data with two groups of bars (one for each grade level). Blue bars represent students who play sports and yellow bars represent students who don't play sports. For 7th grade, the blue bar reaches approximately 112 and the yellow bar reaches approximately 52. For 8th grade, there is no blue bar visible, and the yellow bar reaches approximately 84.\n\nJada found there was no evidence of an association between grade level and playing\n\nsports. Which of these could be the number of 8th graders who play sports?\n\nShow or explain your reasoning.\n\nA. 312\n\nB. 181\n\nC. 98\n\nD. 69",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 143.9853181076672,
                        "y": 177.09298531810765,
                        "z": 0.7530712530712531
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-394521385": {
                      "id": "asset:-394521385",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 768,
                        "w": 814,
                        "src": "https://www.podsie.org/api/public-assets/1725",
                        "name": "Screenshot 2025-11-14 at 10.00.51AM.png",
                        "fileSize": 229914,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:BvxN3GOhdpRAeN4XkrlCw": {
                      "x": 444.43323052610106,
                      "y": 575.5489014070147,
                      "id": "shape:BvxN3GOhdpRAeN4XkrlCw",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a21Ci",
                      "props": {
                        "w": 669.5223524094503,
                        "font": "draw",
                        "size": "m",
                        "color": "black",
                        "scale": 0.9012722964593667,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Show or explain your reasoning.",
                                  "type": "text",
                                  "marks": [
                                    {
                                      "type": "code"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:vxO0CF2pTsiVkUuCBuDlr": {
                      "x": 263.3207203303425,
                      "y": -20.50980067292005,
                      "id": "shape:vxO0CF2pTsiVkUuCBuDlr",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 768,
                        "w": 814,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-394521385",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.shape.tape-diagram": 0,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1765",
              "acceptanceCriteria": "Solution: B\n- Award full credit for getting the correct answer, B\n",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 23100,
            "questionContent": {
              "questionText": "A scatter plot is shown below.\n\nA scatter plot on a coordinate plane with x-axis ranging from 0 to 60 and y-axis ranging from 0 to 60. Approximately 30 black dots are plotted showing a positive correlation between x and y values. The points start in the lower left around (5, 5) and trend upward to the upper right around (50, 53). The data points show a generally linear positive relationship with some scatter\n\nWhich statement best describes the association between and ?\n\nA. There is a positive, linear association.\n\nB. There is a negative, linear association.\n\nC. There is a positive, nonlinear association.\n\nD. There is a negative, nonlinear association.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": -86.2357259380098,
                        "y": 109.32626427406201,
                        "z": 0.910846953937593
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-841814015": {
                      "id": "asset:-841814015",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 687,
                        "w": 673,
                        "src": "https://www.podsie.org/api/public-assets/1728",
                        "name": "Screenshot 2025-11-14 at 10.03.18AM.png",
                        "fileSize": 179961,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:Flfyl-ctpH-Rmn_7cATWz": {
                      "x": 156.5,
                      "y": 56.701226039967366,
                      "id": "shape:Flfyl-ctpH-Rmn_7cATWz",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 629.7987739600326,
                        "w": 673,
                        "url": "",
                        "crop": {
                          "topLeft": {
                            "x": 0,
                            "y": 0.08326233775832222
                          },
                          "bottomRight": {
                            "x": 1,
                            "y": 1
                          }
                        },
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-841814015",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:oOIpLTdXX1sEKiZRNnxwV": {
                      "x": 235.2556841353997,
                      "y": 678.8009596757747,
                      "id": "shape:oOIpLTdXX1sEKiZRNnxwV",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "line",
                      "index": "a30Yp",
                      "props": {
                        "dash": "draw",
                        "size": "m",
                        "color": "black",
                        "scale": 1,
                        "points": {
                          "a1": {
                            "x": 0,
                            "y": 0,
                            "id": "a1",
                            "index": "a1"
                          },
                          "a21dE": {
                            "x": 539.3981473023828,
                            "y": 0,
                            "id": "a21dE",
                            "index": "a21dE"
                          }
                        },
                        "spline": "line"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:zwjTDFt2hY5ftWs_z-wc9": {
                      "x": 237.9017447491844,
                      "y": 644.6466213805055,
                      "id": "shape:zwjTDFt2hY5ftWs_z-wc9",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a22UQ",
                      "props": {
                        "w": 500,
                        "font": "draw",
                        "size": "m",
                        "color": "black",
                        "scale": 1.2047290880310115,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Show or explain your reasoning.",
                                  "type": "text",
                                  "marks": [
                                    {
                                      "type": "code"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.shape.tape-diagram": 0,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1763",
              "acceptanceCriteria": "Solution: A\n- Award full credit for getting the correct answer, A",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 23101,
            "questionContent": {
              "questionText": "A deli owner noticed that as the outside temperature increased, they sold less soup.\n\nFor each day soup was sold, they plotted the point (EMOJI, EMOJI), where EMOJI represents high\n\ntemperature and EMOJI represents bowls of soup sold.\n\nA scatter plot with horizontal axis labeled 't' ranging from 0 to approximately 95, and vertical axis labeled 's' ranging from 0 to beyond 100. Approximately 25 black dots are plotted showing a strong negative correlation. The points begin in the upper left region (around t=5-10, s=105-110) and descend in a roughly linear pattern to the lower right region (around t=90-95, s=20-35). The data suggests an inverse relationship where as t increases, s decreases.\n\na. On the same axes, draw a line that you think is a good fit for the data.\n\nb. The deli owner found that the line EMOJI = EMOJI + 120 is a good fit for the data. Use this equation to predict how many bowls of soup they might sell on a day when the high temperature is 32 degrees.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 256.7732463295269,
                        "y": 217.4290375203915,
                        "z": 0.6841517857142858
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-52533692": {
                      "id": "asset:-52533692",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 567,
                        "w": 896,
                        "src": "https://www.podsie.org/api/public-assets/1731",
                        "name": "Screenshot 2025-11-14 at 10.07.17AM.png",
                        "fileSize": 213962,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "asset:508927248": {
                      "id": "asset:508927248",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 571,
                        "w": 634,
                        "src": "https://www.podsie.org/api/public-assets/1734",
                        "name": "Screenshot 2025-11-14 at 10.08.36AM.png",
                        "fileSize": 101814,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:A3G38M7FBdC2Xe2TEgjl_": {
                      "x": -238.33686786296892,
                      "y": 574.278955954323,
                      "id": "shape:A3G38M7FBdC2Xe2TEgjl_",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a27yO",
                      "props": {
                        "h": 164.23735725938013,
                        "w": 896,
                        "url": "",
                        "crop": {
                          "topLeft": {
                            "x": 0,
                            "y": 0.7103397579199645
                          },
                          "bottomRight": {
                            "x": 1,
                            "y": 1
                          }
                        },
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-52533692",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:Wnu424R_pK_3nqE4Kl_It": {
                      "x": 0.3752039151710278,
                      "y": 135.86735993536462,
                      "id": "shape:Wnu424R_pK_3nqE4Kl_It",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a3Aqi",
                      "props": {
                        "h": 395.5510739961198,
                        "w": 439.1933115823817,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:508927248",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:tocTKqRhf1wl_fx_4xkIV": {
                      "x": -210,
                      "y": 16.5,
                      "id": "shape:tocTKqRhf1wl_fx_4xkIV",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 122.55709624796089,
                        "w": 896,
                        "url": "",
                        "crop": {
                          "topLeft": {
                            "x": 0,
                            "y": 0
                          },
                          "bottomRight": {
                            "x": 1,
                            "y": 0.21615008156606857
                          }
                        },
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-52533692",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.shape.tape-diagram": 0,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1736",
              "acceptanceCriteria": "- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. As long as their work or explanation demonstrates basic understanding of the concept, students should be given full explanation score.\n- all mathematically valid explanations OR work shown should be given full explanation score. \n\nSolution:\na. Student draws a line that reasonably represents a fitting line for the data.\nb. 88 bowls. -32 + 120 = 88\n",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 23102,
            "questionContent": {
              "questionText": "A set of data is graphed on a scatter plot. Which scatter plot of the data shows a line that\n\ncould be used to best model the relationship of the data?\n\n4 coordinate planes with x-axis from 0 to 10 and y-axis from 0 to 8. The same seven black dots are scattered on each graph at approximate positions: (2, 6), (3, 4), (6, 3.5), (7, 2.5), (8, 2), and (10, 2)\n\n**Graph A:** A straight line with negative slope extends from approximately (0, 7.5) to (10, 1.5). Data points generally follow the downward trend of the line.\n\n**Graph B:** A horizontal line is drawn at y = 3. The points do not follow the horizontal line closely.\n\n**Graph C:** A straight line with negative slope extends from approximately (0, 7) to (10, 1). Data points fit the downward trend very closely.\n\n**Graph D:** A straight line with positive slope extends from approximately (0, 1) to (10, 7.5). The points show considerable vertical spread and many do not follow the upward trend of the line.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 325.7087134636508,
                        "y": -17.43004168124702,
                        "z": 0.8014156938088436
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": [
                        "shape:XIPHt31DDvg1pQw0Yc3qX"
                      ]
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-487173256": {
                      "id": "asset:-487173256",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 685,
                        "w": 924,
                        "src": "https://www.podsie.org/api/public-assets/1738",
                        "name": "Screenshot 2025-11-14 at 10.13.25AM.png",
                        "fileSize": 190753,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "asset:1833672799": {
                      "id": "asset:1833672799",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 62,
                        "w": 849,
                        "src": "https://www.podsie.org/api/public-assets/1737",
                        "name": "Screenshot 2025-11-14 at 10.12.39AM.png",
                        "fileSize": 34257,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:DEFrNbroSqBDuteINnzrP": {
                      "x": -172.1796875,
                      "y": 255.5234375,
                      "id": "shape:DEFrNbroSqBDuteINnzrP",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 62,
                        "w": 849,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:1833672799",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:OC3wqK-wZ0hbZus2uhobt": {
                      "x": 373.2692068933892,
                      "y": 285.2578519433572,
                      "id": "shape:OC3wqK-wZ0hbZus2uhobt",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "text",
                      "index": "a3AFE",
                      "props": {
                        "w": 477.758769396333,
                        "font": "draw",
                        "size": "m",
                        "color": "black",
                        "scale": 0.9853916593392588,
                        "autoSize": false,
                        "richText": {
                          "type": "doc",
                          "content": [
                            {
                              "type": "paragraph",
                              "attrs": {
                                "dir": "auto"
                              },
                              "content": [
                                {
                                  "text": "Show or explain your reasoning.",
                                  "type": "text",
                                  "marks": [
                                    {
                                      "type": "code"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        "textAlign": "start"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:XIPHt31DDvg1pQw0Yc3qX": {
                      "x": 366.5964448158408,
                      "y": 316.04711157242207,
                      "id": "shape:XIPHt31DDvg1pQw0Yc3qX",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "line",
                      "index": "a4AGm",
                      "props": {
                        "dash": "draw",
                        "size": "m",
                        "color": "black",
                        "scale": 1,
                        "points": {
                          "a1": {
                            "x": 0,
                            "y": 0,
                            "id": "a1",
                            "index": "a1"
                          },
                          "a22Vu": {
                            "x": 451.30501718016,
                            "y": 0,
                            "id": "a22Vu",
                            "index": "a22Vu"
                          }
                        },
                        "spline": "line"
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "shape:er1_2teIftyUcchdCnHba": {
                      "x": -172.237726855628,
                      "y": 336.28878848898853,
                      "id": "shape:er1_2teIftyUcchdCnHba",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a29l9",
                      "props": {
                        "h": 685,
                        "w": 924,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-487173256",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.shape.tape-diagram": 0,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1767",
              "acceptanceCriteria": "Solution: C\n- Award full credit for getting the correct answer, C",
              "recording": "optional"
            }
          }
        },
        {
          "questions": {
            "id": 23103,
            "questionContent": {
              "questionText": "The equation EMOJI = 1. 5EMOJI + 29 is used to model the yearly salary, EMOJI, of an employee, in thousands of dollars, where EMOJI\n\nis the number of years the employee has worked for the company. What does the slope of the line represent in this situation?\n\n***Explain your answer.***",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:page",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:page",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:page": {
                      "id": "page:page",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "asset:-1503474991": {
                      "id": "asset:-1503474991",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 159,
                        "w": 845,
                        "src": "https://www.podsie.org/api/public-assets/1741",
                        "name": "Screenshot 2025-11-14 at 10.20.50AM.png",
                        "fileSize": 66949,
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    },
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "shape:cRoiGcRrSfwkwD1so8TZe": {
                      "x": 145.5,
                      "y": 285.5,
                      "id": "shape:cRoiGcRrSfwkwD1so8TZe",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 159,
                        "w": 845,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "",
                        "assetId": "asset:-1503474991",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:page",
                      "rotation": 0,
                      "typeName": "shape"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.shape.tape-diagram": 0,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1744",
              "acceptanceCriteria": "- this is a summative assessment where students do not have that much time to provide deeply thorough explanations so do not nit pick. \n- all mathematically valid explanations should be given full explanation score. \n\nExample responses:\n- With every year working at that company, you get $1500 more in your salary.\n- For every year the employee worked at the company, their salary increased by $1500\n- Slope of the line could be used to show a raise for how much money they make per year. This equation is showing a starting salary of 29 thousand and an increase of 1.5 thousand per year.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 1: Visual Representations of Data",
      "assignment_id": 18451,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18451/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19205,
            "questionContent": {
              "questionText": "Use the table below to create a scaled bar graph. Use a scale where each square represents 2 students. Remember to include a title and key. Explain how you created your graph.\n\n\\[Image shows: A two-column table with headers \"Activity\" and \"Number of Students\". The table contains four rows of data:\n\n- Sports: 12\n- Reading: 8\n- Video Games: 16\n- Art: 6\n\nTo the right of the table is a blank graph grid with a y-axis labeled from 2 to 18 in increments of 2. The grid contains horizontal lines for creating bars.\\]",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:Jl1HEt-SMKPXJqA3N_38g",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:Jl1HEt-SMKPXJqA3N_38g",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:Jl1HEt-SMKPXJqA3N_38g": {
                      "id": "page:Jl1HEt-SMKPXJqA3N_38g",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:yjiaCvsfey04sDBtdFi_e": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:yjiaCvsfey04sDBtdFi_e",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:e8196dea-9213-4fbe-b8ac-d548e380e85e",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:Jl1HEt-SMKPXJqA3N_38g",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:e8196dea-9213-4fbe-b8ac-d548e380e85e": {
                      "id": "asset:e8196dea-9213-4fbe-b8ac-d548e380e85e",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "src": "https://www.podsie.org/api/public-assets/708",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/708",
              "acceptanceCriteria": "- Student creates bar graph with bar for each of the 4 rows:\n  - Height of sports bar: 6\n  - Height of reading bar: 4\n  - Height of video games bar: 8\n  - Height of art bar: 3",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 2: Linear Relationships",
      "assignment_id": 18452,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18452/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19206,
            "questionContent": {
              "questionText": "A community center is filling the pool for the summer. The pool starts empty and water is added at a constant rate. Which table below represents this situation? Explain how you know.\n\n\\[Image shows: Three tables labeled Table A, Table B, and Table C, each showing \"Time (hours)\" and \"Water (gallons)\" data:\n\n**Table A:**\n\n- Time (hours): 0, 1, 2, 3, 4\n- Water (gallons): 0, 50, 100, 150, 200\n\n**Table B:**\n\n- Time (hours): 0, 1, 2, 3, 4\n- Water (gallons): 100, 150, 200, 250, 300\n\n**Table C:**\n\n- Time (hours): 0, 1, 2, 3, 4\n- Water (gallons): 0, 50, 150, 300, 500\\]",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:ZwM8z35uJutF3tzqprVBe",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:ZwM8z35uJutF3tzqprVBe",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:ZwM8z35uJutF3tzqprVBe": {
                      "id": "page:ZwM8z35uJutF3tzqprVBe",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:ssphvajJp8DDXYvbmbjvD": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:ssphvajJp8DDXYvbmbjvD",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:226a78cd-e507-4996-8dd3-96866c007ad6",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:ZwM8z35uJutF3tzqprVBe",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:226a78cd-e507-4996-8dd3-96866c007ad6": {
                      "id": "asset:226a78cd-e507-4996-8dd3-96866c007ad6",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "src": "https://www.podsie.org/api/public-assets/709",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/709",
              "acceptanceCriteria": "- Student correctly identifies Table A and explains that at 0 hours the pool is empty (0 gallons) and each hour 50 gallons of water is added (a constant rate).\n- Sample responses\n  - \"Table A represents this situation because at 0 hours the pool is empty (0 gallons) and each hour 50 gallons of water is added, which is a constant rate.\"\n  - \"It's Table A. The pool starts empty at 0 hours with 0 gallons. Then it increases by 50 gallons every hour (50, 100, 150, 200), which means the rate is constant.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 3: What is a Function?",
      "assignment_id": 18453,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18453/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19207,
            "questionContent": {
              "questionText": "Which graph represents a function? Explain how you know.\n\n\\[Image shows: Four coordinate plane graphs labeled A, B, C, and D:\n\n**Graph A:** Shows a curved line that resembles a sideways parabola opening to the left, symmetric about the x-axis\n\n**Graph B:** Shows a vertical line at x = -1\n\n**Graph C:** Shows a curved line that resembles an S-curve or sigmoid function, increasing from bottom left to top right\n\n**Graph D:** Shows a circle centered at the origin\\]",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:PEfKv_BRE68FOyOOjn0h3",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:PEfKv_BRE68FOyOOjn0h3",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:PEfKv_BRE68FOyOOjn0h3": {
                      "id": "page:PEfKv_BRE68FOyOOjn0h3",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:s9N8gZfVB-5aKalI33W7I": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:s9N8gZfVB-5aKalI33W7I",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:daa55c02-503d-429d-b08f-b56dddce522b",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:PEfKv_BRE68FOyOOjn0h3",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:daa55c02-503d-429d-b08f-b56dddce522b": {
                      "id": "asset:daa55c02-503d-429d-b08f-b56dddce522b",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "src": "https://www.podsie.org/api/public-assets/710",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/710",
              "acceptanceCriteria": "- Student correctly identifies Graph C as the function and explains why using the vertical line test or the definition of a function (one output for every one input)\n- Sample responses\n  - \"Graph C represents a function. I can tell because if I draw any vertical line through the graph, it only touches the curve once. This means each input (x-value) has exactly one output (y-value).\"\n  - \"C is a function because it passes the vertical line test. For every x-value, there is only one y-value. The other graphs fail because A and D have multiple y-values for some x-values, and B is a vertical line which has infinitely many y-values for one x-value.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 4: Linearity",
      "assignment_id": 18454,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18454/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19208,
            "questionContent": {
              "questionText": "Which graph(s) represents a linear function? Explain how you know.\n\n\\[Image shows: Six coordinate plane graphs labeled A through F:\n\n**Graph A:** Shows a straight line with positive slope going through the origin - first point is (0,0)\n\n**Graph B:** Shows a curved line\n\n**Graph C:** Shows two straight line segments forming a V-shape (absolute value type graph)\n\n**Graph D:** Shows a vertical line\n\n**Graph E:** Shows a straight line with negative slope (y-intercept at 2)\n\n**Graph F:** Shows a horizontal line at x = -3.5",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:2kPkOhdl2Cz1jgKnDuBTv",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:2kPkOhdl2Cz1jgKnDuBTv",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:2kPkOhdl2Cz1jgKnDuBTv": {
                      "id": "page:2kPkOhdl2Cz1jgKnDuBTv",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:jdEqP-gJkSLKeg8d-n--Z": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:jdEqP-gJkSLKeg8d-n--Z",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:daae501b-c49d-4fda-a126-8d135cb6d221",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:2kPkOhdl2Cz1jgKnDuBTv",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:daae501b-c49d-4fda-a126-8d135cb6d221": {
                      "id": "asset:daae501b-c49d-4fda-a126-8d135cb6d221",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "src": "https://www.podsie.org/api/public-assets/711",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/711",
              "acceptanceCriteria": "- Student correctly identifies Graphs A and E as linear functions and explains that they are straight lines with constant rates of change.\n- Sample responses\n  - \"Graphs A and E represent linear functions. They are both straight lines, which means they have a constant rate of change (slope). A has a positive slope and goes through the origin, and E has a negative slope with a y-intercept at 2.\"\n  - \"A and E are linear functions because they are straight lines. Linear functions have equations in the form y = mx + b, and these graphs show that pattern. The others are either curved (B), piecewise (C), vertical (D), or horizontal (F).\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 5: Unit Rate Problems",
      "assignment_id": 18455,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18455/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19209,
            "questionContent": {
              "questionText": "If a train traveled 250 hours in 5 hours, what was the average speed of the train in miles per hour? Explain how you solved.\n\n**Note:** The question text appears to contain a typo - it likely should read \"250 miles in 5 hours\" rather than \"250 hours in 5 hours.\"",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:LG_iwReXx3CiWxS-0tItP",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:LG_iwReXx3CiWxS-0tItP",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:LG_iwReXx3CiWxS-0tItP": {
                      "id": "page:LG_iwReXx3CiWxS-0tItP",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:DQOXJ3XPnHIVqwVD_Mnsm": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:DQOXJ3XPnHIVqwVD_Mnsm",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:3723c67b-47d7-48c7-9762-027636ece484",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:LG_iwReXx3CiWxS-0tItP",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:3723c67b-47d7-48c7-9762-027636ece484": {
                      "id": "asset:3723c67b-47d7-48c7-9762-027636ece484",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "src": "https://www.podsie.org/api/public-assets/712",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/712",
              "acceptanceCriteria": "- Student calculates the correct answer of 50 miles per hour and explains their solution process.\n- Sample responses\n  - \"The train traveled at 50 miles per hour. I divided 250 miles by 5 hours to get 50 mph (250  5 = 50).\"\n  - \"50 miles per hour. To find average speed, I used the formula: speed = distance  time. So 250 miles  5 hours = 50 miles per hour.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 6: Percent Problems",
      "assignment_id": 18456,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18456/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19210,
            "questionContent": {
              "questionText": "What percent is 3 out of 5? Explain how you solved.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:aT4usuI87VYGPwFzumgos",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:aT4usuI87VYGPwFzumgos",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:aT4usuI87VYGPwFzumgos": {
                      "id": "page:aT4usuI87VYGPwFzumgos",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:Z3E3wNj3rr1K1hr6mGbPB": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:Z3E3wNj3rr1K1hr6mGbPB",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:73441d0c-0e37-4ae1-9f51-156e74f797c2",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:aT4usuI87VYGPwFzumgos",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:73441d0c-0e37-4ae1-9f51-156e74f797c2": {
                      "id": "asset:73441d0c-0e37-4ae1-9f51-156e74f797c2",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "src": "https://www.podsie.org/api/public-assets/713",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/713",
              "acceptanceCriteria": "- Student calculates the correct answer of 60% and explains their solution process.\n- Sample responses\n  - \"60%. I divided 3 by 5 to get 0.6, then multiplied by 100 to convert to a percent: 0.6  100 = 60%.\"\n  - \"The answer is 60%. I thought of 3 out of 5 as the fraction 3/5. Then I converted it to a decimal by dividing: 3  5 = 0.6. Finally, I changed 0.6 to a percent by multiplying by 100, which gives 60%.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 7: Slope and Similar Triangles",
      "assignment_id": 18457,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18457/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19211,
            "questionContent": {
              "questionText": "What is the equation of the line shown below? Explain what each value in your equation represents.\n\n\\[Image shows: A coordinate plane with x-axis labeled from -6 to 7 and y-axis (labeled as \"y-axis\") labeled from -3 to 6. A green straight line is graphed on the plane. The line has a slope of -2 and a y-intercept of 3\\]",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:0qs4TuGFtIFKTyIPsHbha",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:0qs4TuGFtIFKTyIPsHbha",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:0qs4TuGFtIFKTyIPsHbha": {
                      "id": "page:0qs4TuGFtIFKTyIPsHbha",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:x2vWCRQsd3ecHBwd_wyIq": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:x2vWCRQsd3ecHBwd_wyIq",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:186648a8-e597-498a-a83a-bb91740e3b50",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:0qs4TuGFtIFKTyIPsHbha",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:186648a8-e597-498a-a83a-bb91740e3b50": {
                      "id": "asset:186648a8-e597-498a-a83a-bb91740e3b50",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1215,
                        "w": 2160,
                        "src": "https://www.podsie.org/api/public-assets/714",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/714",
              "acceptanceCriteria": "- Student correctly writes the equation y = -2x + 3 and explains what each value represents (slope and y-intercept).\n- Sample responses\n  - \"The equation is y = -2x + 3. The -2 is the slope, which means the line goes down 2 units for every 1 unit it goes right. The 3 is the y-intercept, which is where the line crosses the y-axis.\"\n  - \"y = -2x + 3. In this equation, -2 represents the slope (rate of change), showing that for each increase of 1 in x, y decreases by 2. The +3 represents the y-intercept, which is the point (0, 3) where the line crosses the y-axis.\"",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 1: Organizing Data",
      "assignment_id": 18550,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18550/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19397,
            "questionContent": {
              "questionText": "20 volunteers are cleaning the litter from a beach. The number of minutes each volunteer has worked and the number of meters left to clean on their section are recorded.\n\nHere is a scatter plot that shows the data for each volunteer.\n\n1. Label the vertical axis of the scatter plot.\n2. If a volunteer has worked 45 minutes, should they have closer to 60 meters or 120 meters of beach left to clean? Explain your reasoning.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:sSWjf_R96vLKqN8mScHGk",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:sSWjf_R96vLKqN8mScHGk",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:sSWjf_R96vLKqN8mScHGk": {
                      "id": "page:sSWjf_R96vLKqN8mScHGk",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:fU57irK0lJJD0PDgSwUuF": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:fU57irK0lJJD0PDgSwUuF",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1600,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:580bcee7-15ab-4762-90be-72a8a8f866ad",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:sSWjf_R96vLKqN8mScHGk",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:580bcee7-15ab-4762-90be-72a8a8f866ad": {
                      "id": "asset:580bcee7-15ab-4762-90be-72a8a8f866ad",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1600,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/795",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/795",
              "acceptanceCriteria": "- Label the vertical axis appropriately\n- Determine whether 60 or 120 meters is more appropriate and explain reasoning\n- Sample response:\n  1. beach left to clean (meters)\n  2. 60 meters. When the time spent cleaning increases, the amount of beach left to clean tends to decrease. To keep in line with the rest of the data, the length left to clean should be closer to 60 meters than 120 meters.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 2: Plotting Data",
      "assignment_id": 18551,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18551/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19398,
            "questionContent": {
              "questionText": "The table shows measurements of right hand length and right foot length for 5 people.\n\n|  | right hand length (cm) | right foot length (cm) |\n| --- | --- | --- |\n| person A | 19 | 27 |\n| person B | 21 | 30 |\n| person C | 17 | 23 |\n| person D | 18 | 24 |\n| person E | 19 | 26 |\n\nBlank grid. Horizontal axis, right hand length in centimeters, scale 0 to 30, by 5's. Vertical axis, right foot length in centimeters, scale 0 to 30, by 5's.\n\n1. Draw a scatter plot for the data.\n2. Circle the point in the scatter plot that represents Person D's measurements.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:5YVQtmym_ivwIu41RR6kf",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:5YVQtmym_ivwIu41RR6kf",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:5YVQtmym_ivwIu41RR6kf": {
                      "id": "page:5YVQtmym_ivwIu41RR6kf",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:ZQ1AZygZd30uIPT2A4u0j": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:ZQ1AZygZd30uIPT2A4u0j",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 2480,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:f725bf77-2c3d-4666-8733-e682d8ce5010",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:5YVQtmym_ivwIu41RR6kf",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:f725bf77-2c3d-4666-8733-e682d8ce5010": {
                      "id": "asset:f725bf77-2c3d-4666-8733-e682d8ce5010",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 2480,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/796",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/796",
              "acceptanceCriteria": "- Draw a scatter plot with all 5 data points correctly plotted\n- Circle the point representing Person D (18, 24)\n- Sample response: Scatterplot with all points plotted and Person D's point circled",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 3: What a Point in a Scatter Plot Means",
      "assignment_id": 18552,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18552/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19399,
            "questionContent": {
              "questionText": "In football, a quarterback can be rated by a formula that assigns a number to how well they play. A higher number generally means they played better.\n\nHere are a table and scatter plot that show ratings and wins for quarterbacks who started every game in a season.\n\n| player | quarterback rating | number of wins |\n| --- | --- | --- |\n| A | 93.8 | 4 |\n| B | 102.2 | 12 |\n| C | 93.6 | 6 |\n| D | 89 | 8 |\n| E | 88.2 | 5 |\n| F | 97 | 7 |\n| G | 88.7 | 6 |\n| H | 91.1 | 7 |\n| I | 92.7 | 10 |\n| J | 88 | 10 |\n| K | 101.6 | 9 |\n| L | 104.6 | 13 |\n| M | 84.2 | 6 |\n| N | 99.4 | 15 |\n| O | 110.1 | 10 |\n| P | 95.4 | 11 |\n| Q | 88.7 | 11 |\n\nA scatterplot. The horizontal axis is labeled \"quarterback rating\" and the numbers 80 through 120, in increments of 10, are indicated. The vertical axis is labeled \"number of wins\" and the numbers 0 through 20, in increments of 5, are indicated.\n\n1. Circle the point in the scatter plot that represents Player K's data.\n2. Which quarterback's data are represented by the point farthest to the left?\n3. Player R is not included in the table. He has a quarterback rating of 99.4 and his team won 8 games. On the scatter plot, plot a point that represents Player R's data.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 1193.7505766003774,
                        "y": 374.3119578910854,
                        "z": 0.26755456535568933
                      },
                      "pageId": "page:mAsXNpDaGV-vn6r3Y1QsQ",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:mAsXNpDaGV-vn6r3Y1QsQ",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "page:mAsXNpDaGV-vn6r3Y1QsQ": {
                      "id": "page:mAsXNpDaGV-vn6r3Y1QsQ",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:-zFH88Hnmh7IosK-vfDKv": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:-zFH88Hnmh7IosK-vfDKv",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 4512,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:1e53f53d-8856-4153-b8e0-c20b7346f538",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:mAsXNpDaGV-vn6r3Y1QsQ",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:1e53f53d-8856-4153-b8e0-c20b7346f538": {
                      "id": "asset:1e53f53d-8856-4153-b8e0-c20b7346f538",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 4512,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/797",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/805",
              "acceptanceCriteria": "- Circle the point representing Player K (101.6, 9)\n- Identify the quarterback represented by the leftmost point\n- Plot Player R's data point at (99.4, 8)\n- Sample response:\n  1. The circled point on the scatter plot\n  2. Player M\n  3. The added point to the scatter plot, plotted larger for visibility",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 4: Fitting a Line to Data",
      "assignment_id": 18553,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18553/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19400,
            "questionContent": {
              "questionText": "Here is a scatter plot that shows lengths and widths of 20 left feet, together with the graph of a model of the relationship between foot length and width.\n\nA scatterplot. Horizontal, from 20 to 32, by 2's, labeled foot length in centimeters. Vertical, from 7 to 12, by 1's, labeled foot width in centimeters. 20 dots trend upward and to the right. Line drawn, trends linearly upward and right with 11 dots above line and 9 below. No dots lie on the line. The line begins at about point (21.9, 9) and ends at about (31.25, 11.5).\n\n1. Draw a box around the point that represents the foot with length closest to 29 cm.\n2. What is the approximate width of this foot?\n3. What width does the model predict for a foot with length 29 cm?",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:mBqhzrD-hkD8VFYRLFmYZ",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:mBqhzrD-hkD8VFYRLFmYZ",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:mBqhzrD-hkD8VFYRLFmYZ": {
                      "id": "page:mBqhzrD-hkD8VFYRLFmYZ",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:-Qnc65vyBfXKE9oIdf5Ej": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:-Qnc65vyBfXKE9oIdf5Ej",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1588,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:229bdf7e-4a62-4700-8de5-ac2bf3a0dce7",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:mBqhzrD-hkD8VFYRLFmYZ",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:229bdf7e-4a62-4700-8de5-ac2bf3a0dce7": {
                      "id": "asset:229bdf7e-4a62-4700-8de5-ac2bf3a0dce7",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1588,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/798",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/798",
              "acceptanceCriteria": "- Draw a box around the point closest to 29 cm foot length\n- Provide the approximate width of that foot\n- Use the model to predict the width for a 29 cm foot\n- Sample response:\n  1. A box is drawn around the point at approximately (29.1, 10.4).\n  2. About 10.4 cm\n  3. About 11.1 cm",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 5: Describing Trends in Scatter Plots",
      "assignment_id": 18554,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18554/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19401,
            "questionContent": {
              "questionText": "1. Elena said, \"I think this line is a good fit because half of the points are on one side of the line and half of the points are on the other side.\" Do you agree? Explain your reasoning.\n\n   A scatterplot. Horizontal, from 0 to 12, by 2's. Vertical, from 0 to 80, by 20's. Data trends downward and to right. Line of best fit drawn, goes slightly upward and to right. 10 data points above and below line.\n\n2. Noah said, \"I think this line is a good fit because it passes through the leftmost point and the rightmost point.\" Do you agree? Explain your reasoning.\n\n   A scatterplot. Horizontal, from 0 to 12, by 2's. Vertical, from 0 to 80, by 20's. Data trends downward and to right. Line of best fit drawn, goes downward and to right. 14 data points below line, 4 points above line, and two points on line.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:ssOb4aPKzM9tmDM_XByP5",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:ssOb4aPKzM9tmDM_XByP5",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:ssOb4aPKzM9tmDM_XByP5": {
                      "id": "page:ssOb4aPKzM9tmDM_XByP5",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:cot6vdMewmfSds_NAo9kY": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:cot6vdMewmfSds_NAo9kY",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1888,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:73b3b823-c0c5-4e69-aef6-47910136007e",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:ssOb4aPKzM9tmDM_XByP5",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:73b3b823-c0c5-4e69-aef6-47910136007e": {
                      "id": "asset:73b3b823-c0c5-4e69-aef6-47910136007e",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1888,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/799",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/799",
              "acceptanceCriteria": "- Evaluate whether Elena's line is a good fit and explain reasoning\n- Evaluate whether Noah's line is a good fit and explain reasoning\n- Sample response:\n  1. Disagree. The line is not a good fit because the data show a negative association, but the line has a positive slope.\n  2. Disagree. The line is not a good fit because most of the points are below it and the trend of the scatter plot is steeper than the slope of the graph.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 6: The Slope of a Fitted Line",
      "assignment_id": 18555,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18555/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19402,
            "questionContent": {
              "questionText": "Here is a scatter plot that shows the years when some used cars were made and their prices in 2016 together with the graph of a linear model for the relationship between year and price in dollars.\n\nScatterplot, x, year, 2006 to 2016 by 2, y, price, 6000 to 21000 by 3000. Points begin near (2007, ...) and trend up and to the right. A line goes through (2007, 9000) and (2014, 16,500).\n\n1. Is the slope positive or negative?\n2. Which of these values is closest to the slope of the linear model shown in the scatter plot?\n   - 1,000\n   - 3,000\n   - \\-1,000\n   - \\-3,000\n3. Use the value you selected to describe the meaning of the slope in this context.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:h7YnpqSkz0fu2G3YSpbk5",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:h7YnpqSkz0fu2G3YSpbk5",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:h7YnpqSkz0fu2G3YSpbk5": {
                      "id": "page:h7YnpqSkz0fu2G3YSpbk5",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:b5HIl9zoJF1Y-IQCk4Nti": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:b5HIl9zoJF1Y-IQCk4Nti",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 2430,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:e88ebaeb-9fef-4a59-9169-a1cd06698afc",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:h7YnpqSkz0fu2G3YSpbk5",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:e88ebaeb-9fef-4a59-9169-a1cd06698afc": {
                      "id": "asset:e88ebaeb-9fef-4a59-9169-a1cd06698afc",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 2430,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/800",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/800",
              "acceptanceCriteria": "- Determine if the slope is positive or negative\n- Select the value closest to the slope\n- Describe the meaning of the slope in context\n- Sample response:\n  1. The slope is positive, because as the year of the car increases, the price tends to increase.\n  2. 1,000\n  3. The model predicts that when a car is made 1 year later, the price is 1,000 dollars higher.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 7: Observing More Patterns in Scatter Plots",
      "assignment_id": 18556,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18556/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19403,
            "questionContent": {
              "questionText": "1. Draw a scatter plot that shows a positive linear association and clustering.\n\n   Blank coordinate grid\n\n2. Draw a scatter plot that shows a negative non-linear association and no clustering.\n\n   Blank coordinate grid",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:jkh4Ikqo8GBbR6u7zG8YG",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:jkh4Ikqo8GBbR6u7zG8YG",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:jkh4Ikqo8GBbR6u7zG8YG": {
                      "id": "page:jkh4Ikqo8GBbR6u7zG8YG",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:PICZanWpYtjUnw90NI86v": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:PICZanWpYtjUnw90NI86v",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1912,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:052e6b74-4f92-4511-a384-e3042d386c5f",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:jkh4Ikqo8GBbR6u7zG8YG",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:052e6b74-4f92-4511-a384-e3042d386c5f": {
                      "id": "asset:052e6b74-4f92-4511-a384-e3042d386c5f",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1912,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/801",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/801",
              "acceptanceCriteria": "- Draw a scatter plot with positive linear association and clustering\n- Draw a scatter plot with negative non-linear association and no clustering\n- Sample response:\n  1. Scatterplot showing positive linear association with clustering\n  2. Scatterplot showing negative non-linear association with no clustering",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 8: Analyzing Bivariate Data",
      "assignment_id": 18557,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18557/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19404,
            "questionContent": {
              "questionText": "1. Draw a line on the scatter plot that fits the data well.\n\n   Scatterplot. Horizontal from 0 to 10, by 2's. Vertical from 0 to 10, by 2's. 8 dots clustered in upper left side of graph spread horizontally between 0 and 2.5 and vertically from 7 to about 8. 11 dots spread horizontally between 6 and 10 and vertically from 3 to 6.\n\n2. A new point will be added to the scatter plot with x = 4. What do you predict for the y-value of this point if it follows the association of the data already in the scatter plot?\n\n3. A new point will be added to the scatter plot with x = 10. What is an example of a y-value of this point if it is considered an outlier?",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:GPXLMwHbwKGND5dHu7HXy",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:GPXLMwHbwKGND5dHu7HXy",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:GPXLMwHbwKGND5dHu7HXy": {
                      "id": "page:GPXLMwHbwKGND5dHu7HXy",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:Qipbv9sy_KwMU_YDqYBvZ": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:Qipbv9sy_KwMU_YDqYBvZ",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1896,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:c8306453-268a-4138-baaa-2a8e11f0b229",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:GPXLMwHbwKGND5dHu7HXy",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:c8306453-268a-4138-baaa-2a8e11f0b229": {
                      "id": "asset:c8306453-268a-4138-baaa-2a8e11f0b229",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1896,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/802",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/802",
              "acceptanceCriteria": "- Draw a line that fits the data well\n- Predict the y-value for x = 4 based on the association\n- Provide an example y-value for x = 10 that would be an outlier\n- Sample response:\n  1. Scatterplot with line of best fit\n  2. 6\n  3. 10",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 9: Looking for Associations",
      "assignment_id": 18558,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18558/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19405,
            "questionContent": {
              "questionText": "1. In a class of 25 students, some students play a sport, some play a musical instrument, some do both, and some do neither. Complete the two-way table to show the data from the bar graph.\n\n   |  | plays an instrument | does not play an instrument | total |\n   | --- | --- | --- | --- |\n   | plays a sport |  | 16 |  |\n   | does not play a sport | 5 |  |  |\n   | total |  |  | 25 |\n\n2. Using the entries from the actual frequency table, complete this table so that it shows relative frequencies based on the rows. Round entries to the nearest percentage point.\n\n   |  | plays an instrument | does not play an instrument | total |\n   | --- | --- | --- | --- |\n   | plays a sport |  | 89% | 100% |\n   | does not play a sport | 71% |  | 100% |\n",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 415.8592246314458,
                        "y": -950.9206398707582,
                        "z": 0.46880204439644413
                      },
                      "pageId": "page:7vzxzpzkv3OldTmhxWbPd",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:7vzxzpzkv3OldTmhxWbPd",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "page:7vzxzpzkv3OldTmhxWbPd": {
                      "id": "page:7vzxzpzkv3OldTmhxWbPd",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:h9vKKtgZ6a1W9VHJkWcav": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:h9vKKtgZ6a1W9VHJkWcav",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 2570,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:420571cd-faaf-4bd1-8874-e73256627713",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:7vzxzpzkv3OldTmhxWbPd",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:420571cd-faaf-4bd1-8874-e73256627713": {
                      "id": "asset:420571cd-faaf-4bd1-8874-e73256627713",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 2570,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/803",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/807",
              "acceptanceCriteria": "- Complete the two-way frequency table correctly\n- Complete the relative frequency table with percentages rounded to nearest percentage point\n- Sample response:\n  1.\n     |                          | plays an instrument | does not play an instrument | total |\n     |--------------------------|---------------------|-----------------------------|-------|\n     | plays a sport            | 2                   | 16                          | 18    |\n     | does not play a sport    | 5                   | 2                           | 7     |\n     | total                    | 7                   | 18                          | 25    |\n\n  2.\n     |                          | plays an instrument | does not play an instrument | total |\n     |--------------------------|---------------------|-----------------------------|-------|\n     | plays a sport            | 11%                 | 89%                         | 100%  |\n     | does not play a sport    | 71%                 | 29%                         | 100%  |",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 10: Using Data Displays to Find Associations",
      "assignment_id": 18559,
      "module_name": "Alg 1 Unit 8.6",
      "assignment_url": "http://www.podsie.org/student/assignments/18559/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 19406,
            "questionContent": {
              "questionText": "Here are a two-way table and segmented bar graph for data from students in 2 classes.\n\nDo they show evidence of differences between the 2 classes?\n\n|  | prefers math | prefers science | prefers recess |\n| --- | --- | --- | --- |\n| class A | 6 | 3 | 8 |\n| class B | 8 | 7 | 15 |\n\nStacked bar graph in yellow, red and blue. Horizontal labeled Class A and Class B. Vertical labeled 0 to 100, by 25's. Yellow represents recess. Red represents science. Blue represents math.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:QWXYBij_ZVxYsEEduJWUY",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:QWXYBij_ZVxYsEEduJWUY",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:QWXYBij_ZVxYsEEduJWUY": {
                      "id": "page:QWXYBij_ZVxYsEEduJWUY",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:hh0lfr890OAgmHP7dKBFC": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:hh0lfr890OAgmHP7dKBFC",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1496,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:a20d159f-7e1f-4958-a054-cf1e1e659c1e",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:QWXYBij_ZVxYsEEduJWUY",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:a20d159f-7e1f-4958-a054-cf1e1e659c1e": {
                      "id": "asset:a20d159f-7e1f-4958-a054-cf1e1e659c1e",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1496,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/804",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/804",
              "acceptanceCriteria": "- Determine if there is evidence of differences between the two classes\n- Provide reasoning based on the data displays\n- Sample response: There is no evidence of different preferences associated with each class because the segments in the bars are about the same size.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 1: Equivalent Expressions",
      "assignment_id": 19350,
      "module_name": "LESSONS - Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19350/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 23715,
            "questionContent": {
              "questionText": "Watch the worked example video below to learn about equivalent expressions.\n\nAfter watching, write down three main ideas from the video.",
              "explanation": "This question introduces students to equivalent expressions through a worked example video. The video demonstrates how to apply properties of operations to generate equivalent expressions and verify equivalency using substitution. Students should identify key concepts such as: combining like terms, using the distributive property, and checking equivalence by substitution. The three-response format ensures students actively engage with the content rather than passively watching.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  /**\n   * Video Player Component\n   * Creates a video player card with optional description text.\n   */\n  function createVideoPlayer(d3, container, videoUrl, options) {\n    options = options || {};\n    const description = options.description || null;\n    const maxWidth = options.maxWidth || \"800px\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const showCard = options.showCard !== false;\n\n    if (!videoUrl) {\n      return null;\n    }\n\n    if (description) {\n      container\n        .append(\"div\")\n        .attr(\"class\", \"video-description\")\n        .style(\"font-size\", \"16px\")\n        .style(\"margin-bottom\", \"24px\")\n        .text(description);\n    }\n\n    const videoCard = container\n      .append(\"div\")\n      .attr(\"class\", \"video-card\")\n      .style(\"margin-bottom\", marginBottom);\n\n    if (showCard) {\n      videoCard\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"16px\")\n        .style(\"padding\", \"20px\")\n        .style(\"box-shadow\", \"0 6px 16px rgba(15,23,42,0.05)\");\n    }\n\n    videoCard\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", maxWidth)\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return videoCard;\n  }\n\n  /**\n   * Standard Card Component\n   * Creates standardized cards with consistent styling.\n   */\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n    graph: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"18px\",\n      padding: \"24px\",\n      boxShadow: \"0 12px 28px rgba(15,23,42,0.08)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      idea1: \"\",\n      idea2: \"\",\n      idea3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let textarea1 = null;\n  let textarea2 = null;\n  let textarea3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      mainIdeas: {\n        idea1: chartState.idea1,\n        idea2: chartState.idea2,\n        idea3: chartState.idea3,\n      },\n    });\n  }\n\n  function renderControls() {\n    if (textarea1 && textarea1.node().value !== chartState.idea1) {\n      textarea1.node().value = chartState.idea1;\n    }\n    if (textarea2 && textarea2.node().value !== chartState.idea2) {\n      textarea2.node().value = chartState.idea2;\n    }\n    if (textarea3 && textarea3.node().value !== chartState.idea3) {\n      textarea3.node().value = chartState.idea3;\n    }\n\n    if (textarea1) textarea1.property(\"disabled\", interactivityLocked);\n    if (textarea2) textarea2.property(\"disabled\", interactivityLocked);\n    if (textarea3) textarea3.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // Introduction\n    container\n      .append(\"div\")\n      .attr(\"class\", \"intro\")\n      .style(\"font-size\", \"18px\")\n      .style(\"margin-bottom\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\n        \"In this unit, you'll be working with equivalent expressions - applying properties of operations to simplify and verify expressions.\"\n      );\n\n    container\n      .append(\"div\")\n      .attr(\"class\", \"skill-description\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#eff6ff\")\n      .style(\"border-left\", \"4px solid #3b82f6\")\n      .style(\"border-radius\", \"8px\")\n      .html(\n        \"<strong>Skill:</strong> I will apply the properties of operations to generate equivalent expressions and check the equivalency using substitution.\"\n      );\n\n    // Video player - using global component\n    createVideoPlayer(d3, container, VIDEO_URL, {\n      description: \"This worked example video will prepare you for the upcoming unit. Watch carefully!\",\n      maxWidth: \"800px\",\n      marginBottom: \"32px\"\n    });\n\n    // Reflection prompt\n    container\n      .append(\"div\")\n      .attr(\"class\", \"reflection-prompt\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"20px\")\n      .text(\"Write down three main ideas from the video:\");\n\n    // Idea 1 - using standard card\n    const idea1Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea1Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #1\");\n\n    textarea1 = idea1Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was one important thing you learned from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea1: this.value };\n        sendChartState();\n      });\n\n    // Idea 2 - using standard card\n    const idea2Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea2Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #2\");\n\n    textarea2 = idea2Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was another key concept from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea2: this.value };\n        sendChartState();\n      });\n\n    // Idea 3 - using standard card\n    const idea3Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea3Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #3\");\n\n    textarea3 = idea3Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was a third important idea from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea3: this.value };\n        sendChartState();\n      });\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.mainIdeas && typeof incoming.mainIdeas === \"object\") {\n      nextState.idea1 =\n        typeof incoming.mainIdeas.idea1 === \"string\"\n          ? incoming.mainIdeas.idea1\n          : \"\";\n      nextState.idea2 =\n        typeof incoming.mainIdeas.idea2 === \"string\"\n          ? incoming.mainIdeas.idea2\n          : \"\";\n      nextState.idea3 =\n        typeof incoming.mainIdeas.idea3 === \"string\"\n          ? incoming.mainIdeas.idea3\n          : \"\";\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student watches the video\n- Student provides three separate responses\n- Each response contains an idea from the video content\n- Responses show engagement with the video material\n- If any response could be plausibly assumed to relate to the video, mark correct\n- Students should not be marked incorrect for sincere attempts at answering \n- Sample acceptable responses:\n  - \"You can combine like terms by adding or subtracting their coefficients\"\n  - \"The distributive property lets you multiply a number by everything inside parentheses\"\n  - \"Two expressions are equivalent if they have the same value for any input\""
            }
          }
        },
        {
          "questions": {
            "id": 23716,
            "questionContent": {
              "questionText": "Fill in the box to write an expression equivalent to 8x - 2x.\n\nThe algebra tiles show 8 positive x tiles with 2 crossed out (representing subtraction).",
              "explanation": "When we subtract like terms, we subtract their coefficients: 8x - 2x = (8 - 2)x = 6x. The algebra tiles visualize this by showing 8 positive x tiles with 2 being removed (crossed out), leaving 6 x tiles.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    video\n      .append(\"p\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Your browser does not support the video tag.\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    // Create SVG for algebra tiles\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 120)\n      .attr(\"height\", 320)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileWidth = 80;\n    const tileHeight = 30;\n    const gap = 5;\n    const startX = 20;\n    const startY = 10;\n\n    // Draw 8 x-tiles, with last 2 crossed out\n    for (let i = 0; i < 8; i++) {\n      const y = startY + i * (tileHeight + gap);\n      const isCrossedOut = i >= 6;\n\n      // Tile rectangle\n      svg.append(\"rect\")\n        .attr(\"x\", startX)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      // x label\n      svg.append(\"text\")\n        .attr(\"x\", startX + 10)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      // Cross out the last 2 tiles\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", startX)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", startX + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Fill in the box to write an expression equivalent to <strong>8x - 2x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles visualization\n    renderAlgebraTiles(d3, mainCard);\n\n    // Answer input area\n    const inputContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"input-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"font-size\", \"20px\");\n\n    answerInput = inputContainer\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .attr(\"maxlength\", \"3\")\n      .style(\"width\", \"60px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #d1d5db\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      })\n      .on(\"focus\", function () {\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"outline\", \"none\");\n      })\n      .on(\"blur\", function () {\n        d3.select(this).style(\"border-color\", \"#d1d5db\");\n      });\n\n    inputContainer\n      .append(\"span\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x\");\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the coefficient \"6\" in the input box\n- The complete equivalent expression is 6x\n- Accept variations: \"6\", \" 6 \", etc."
            }
          }
        },
        {
          "questions": {
            "id": 23717,
            "questionContent": {
              "questionText": "Which expression is equivalent to 4x + 3 - x + 2?\n\nThe algebra tiles show 3 positive x tiles (with 1 crossed out) and 5 positive unit tiles (1 crossed out).",
              "explanation": "To simplify 4x + 3 - x + 2, combine like terms:\n- Variable terms: 4x - x = 3x\n- Constant terms: 3 + 2 = 5\n- Result: 3x + 5",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"3x + 5\", isCorrect: true },\n    { id: \"B\", label: \"3x + 1\", isCorrect: false },\n    { id: \"C\", label: \"5x + 1\", isCorrect: false },\n    { id: \"D\", label: \"5x + 5\", isCorrect: false },\n  ];\n\n  function createDefaultState() {\n    return {\n      selectedAnswer: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedAnswer: chartState.selectedAnswer,\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 200)\n      .attr(\"height\", 180)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles (4 total, 1 crossed out) - left column\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i === 3;\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles (5 total: 3+2, shown as 2 columns)\n    // First column: 3 units\n    for (let i = 0; i < 3; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n\n    // Second column: 2 units\n    for (let i = 0; i < 2; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 145)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 152)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n  }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n\n    const optionsList = container\n      .append(\"div\")\n      .attr(\"class\", \"options-list\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-direction\", \"column\")\n      .style(\"gap\", \"12px\")\n      .style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswer === option.id;\n\n      const optionRow = optionsList\n        .append(\"div\")\n        .attr(\"class\", \"option-row\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px 16px\")\n        .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n        .style(\"transition\", \"all 0.2s\");\n\n      if (!interactivityLocked) {\n        optionRow\n          .on(\"mouseover\", function () {\n            if (!isSelected) {\n              d3.select(this)\n                .style(\"background\", \"#f9fafb\")\n                .style(\"border-color\", \"#9ca3af\");\n            }\n          })\n          .on(\"mouseout\", function () {\n            d3.select(this)\n              .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n              .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\");\n          })\n          .on(\"click\", function () {\n            if (interactivityLocked) return;\n            chartState.selectedAnswer = option.id;\n            renderOptions(d3, container);\n            sendChartState();\n          });\n      }\n\n      // Radio button\n      const radioButton = optionRow\n        .append(\"div\")\n        .style(\"width\", \"20px\")\n        .style(\"height\", \"20px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\")\n        .style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"justify-content\", \"center\")\n        .style(\"flex-shrink\", \"0\");\n\n      radioButton\n        .append(\"div\")\n        .style(\"width\", \"8px\")\n        .style(\"height\", \"8px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"background\", isSelected ? \"#ffffff\" : \"transparent\");\n\n      // Option label\n      optionRow\n        .append(\"div\")\n        .style(\"font-size\", \"18px\")\n        .text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) {\n        renderOptions(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Which expression is equivalent to <strong>4x + 3 - x + 2</strong>?\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Options container\n    const optionsContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"options-container\");\n\n    renderOptions(d3, optionsContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) {\n      renderOptions(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (\n      typeof incoming.selectedAnswer === \"string\" &&\n      ANSWER_OPTIONS.some((opt) => opt.id === incoming.selectedAnswer)\n    ) {\n      nextState.selectedAnswer = incoming.selectedAnswer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects option A: 3x + 5\n- This is the only correct answer"
            }
          }
        },
        {
          "questions": {
            "id": 23718,
            "questionContent": {
              "questionText": "What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\n\nThe tiles show: 6 positive y tiles (with 3 crossed out representing subtraction) and 5 positive unit tiles (with 1 crossed out).\n\nAvailable terms: 0y, 3y, 4, 5",
              "explanation": "The algebra tiles show 6 y-tiles with 3 crossed out (6y - 3y = 3y) and 5 unit tiles with 1 crossed out (5 - 1 = 4). Result: 3y + 4.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // Draggable terms\n  const DRAG_ITEMS = [\n    { id: \"0y\", label: \"0y\" },\n    { id: \"3y\", label: \"3y\" },\n    { id: \"4\", label: \"4\" },\n    { id: \"5\", label: \"5\" },\n  ];\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      slot1: null,\n      slot2: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      slots: {\n        slot1: chartState.slot1,\n        slot2: chartState.slot2,\n      },\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 180)\n      .attr(\"height\", 220)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // Y tiles - 6 total with 3 crossed out (showing subtraction)\n    // Pink/magenta color for y tiles\n    for (let i = 0; i < 6; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 3;\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#f472b6\")\n        .attr(\"stroke\", \"#db2777\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#831843\")\n        .text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles - 5 total with 1 crossed out (5-1=4)\n    for (let i = 0; i < 5; i++) {\n      const y = 10 + i * (unitSize + gap);\n      const isCrossedOut = (i === 4);\n\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 110)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110 + unitSize)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 110 + unitSize)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Drop slots container\n    const slotsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"slots-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"font-size\", \"20px\");\n\n    // First slot\n    const slot1 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-1\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot2 === draggedItem) chartState.slot2 = null;\n          chartState.slot1 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot1) {\n        slot1\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot1 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    slotsContainer.append(\"span\").text(\"+\");\n\n    // Second slot\n    const slot2 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-2\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot1 === draggedItem) chartState.slot1 = null;\n          chartState.slot2 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot2) {\n        slot2\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot2 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    // Draggable items\n    const itemsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"items-container\")\n      .style(\"display\", \"flex\")\n      .style(\"gap\", \"12px\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"justify-content\", \"center\");\n\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n\n      const itemDiv = itemsContainer\n        .append(\"div\")\n        .attr(\"class\", \"drag-item\")\n        .attr(\"draggable\", !interactivityLocked && !isUsed)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"border\", \"2px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"background\", isUsed ? \"#e5e7eb\" : \"#ffffff\")\n        .style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\")\n        .style(\"opacity\", isUsed ? \"0.5\" : \"1\")\n        .style(\"font-size\", \"16px\")\n        .style(\"user-select\", \"none\")\n        .text(item.label);\n\n      if (!interactivityLocked && !isUsed) {\n        itemDiv.node().addEventListener(\"dragstart\", () => {\n          draggedItem = item.label;\n        });\n\n        itemDiv\n          .on(\"mouseenter\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1.05)\")\n              .style(\"box-shadow\", \"0 4px 12px rgba(0,0,0,0.1)\");\n          })\n          .on(\"mouseleave\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1)\")\n              .style(\"box-shadow\", \"none\");\n          });\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".drag-drop-container\");\n      if (!container.empty()) {\n        renderDragDrop(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Drag and drop area\n    const dragDropContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"drag-drop-container\");\n\n    renderDragDrop(d3, dragDropContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".drag-drop-container\");\n    if (!container.empty()) {\n      renderDragDrop(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.slots && typeof incoming.slots === \"object\") {\n      nextState.slot1 = incoming.slots.slot1 || null;\n      nextState.slot2 = incoming.slots.slot2 || null;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags \"3y\" and \"4\" into the slots\n- The simplified expression shown should be 3y + 4 (or 4 + 3y)"
            }
          }
        },
        {
          "questions": {
            "id": 23719,
            "questionContent": {
              "questionText": "Fill in the boxes to write an expression equivalent to 2x + 5y - 3y + 4x.\n\nThe algebra tiles show the terms being combined.",
              "explanation": "To simplify 2x + 5y - 3y + 4x, combine like terms:\n- x terms: 2x + 4x = 6x\n- y terms: 5y - 3y = 2y\n- Result: 6x + 2y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\");\n\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\");\n\n    const video = content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\");\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  function createDefaultState() {\n    return { answer1: \"\", answer2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let input1 = null;\n  let input2 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answers: { answer1: chartState.answer1, answer2: chartState.answer2 },\n    });\n  }\n\n  function renderControls() {\n    if (input1 && input1.node().value !== chartState.answer1) input1.node().value = chartState.answer1;\n    if (input2 && input2.node().value !== chartState.answer2) input2.node().value = chartState.answer2;\n    if (input1) input1.property(\"disabled\", interactivityLocked);\n    if (input2) input2.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 280).attr(\"height\", 200).style(\"display\", \"block\").style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 60;\n    const gap = 5;\n\n    // Left column: 2x tiles\n    for (let i = 0; i < 2; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 20).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n\n    // Middle column: 5y tiles with 3 crossed out\n    for (let i = 0; i < 5; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 2;\n      svg.append(\"rect\").attr(\"x\", 90).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#f472b6\").attr(\"stroke\", \"#db2777\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 100).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#831843\").text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\").attr(\"x1\", 90).attr(\"y1\", y).attr(\"x2\", 90 + tileWidth).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n        svg.append(\"line\").attr(\"x1\", 90 + tileWidth).attr(\"y1\", y).attr(\"x2\", 90).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Right column: 4x tiles\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 170).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 180).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the boxes to write an expression equivalent to <strong>2x + 5y - 3y + 4x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n\n    renderAlgebraTiles(d3, mainCard);\n\n    // Input container\n    const inputContainer = mainCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"font-size\", \"20px\").style(\"justify-content\", \"center\");\n\n    input1 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer1 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"x + \");\n\n    input2 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer2 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"y\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.answers) {\n      nextState.answer1 = incoming.answers.answer1 || \"\";\n      nextState.answer2 = incoming.answers.answer2 || \"\";\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters \"6\" in the first box (coefficient of x)\n- Student enters \"2\" in the second box (coefficient of y)\n- Complete expression: 6x + 2y"
            }
          }
        },
        {
          "questions": {
            "id": 23720,
            "questionContent": {
              "questionText": "Which expression is equivalent to 8x + 15y - 2x - 7y?\n\nSelect all that apply.",
              "explanation": "To simplify 8x + 15y - 2x - 7y:\n- x terms: 8x - 2x = 6x\n- y terms: 15y - 7y = 8y\n- Result: 6x + 8y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"] || CARD_STYLES.large;\n    return container.append(\"div\").attr(\"class\", options.className || \"standard-card\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\"); });\n    return acc;\n  }\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"23x + 9y\", isCorrect: false },\n    { id: \"B\", label: \"6x + 8y\", isCorrect: true },\n    { id: \"C\", label: \"x + 13y\", isCorrect: false },\n    { id: \"D\", label: \"15x - 17y\", isCorrect: false },\n  ];\n\n  function createDefaultState() { return { selectedAnswers: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { selectedAnswers: chartState.selectedAnswers }); }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n    const optionsList = container.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"12px\").style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswers.includes(option.id);\n      const optionRow = optionsList.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"padding\", \"12px 16px\").style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\").style(\"border-radius\", \"8px\").style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\");\n\n      if (!interactivityLocked) {\n        optionRow.on(\"click\", function () {\n          if (isSelected) {\n            chartState.selectedAnswers = chartState.selectedAnswers.filter(id => id !== option.id);\n          } else {\n            chartState.selectedAnswers = [...chartState.selectedAnswers, option.id];\n          }\n          renderOptions(d3, container);\n          sendChartState();\n        });\n      }\n\n      // Checkbox\n      const checkbox = optionRow.append(\"div\").style(\"width\", \"20px\").style(\"height\", \"20px\").style(\"border-radius\", \"4px\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\").style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\");\n      if (isSelected) checkbox.append(\"span\").style(\"color\", \"#ffffff\").style(\"font-size\", \"14px\").html(\"&#10003;\");\n\n      optionRow.append(\"div\").style(\"font-size\", \"18px\").text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) renderOptions(currentD3, container);\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which expression is equivalent to <strong>8x + 15y - 2x - 7y</strong>?\");\n\n    // Main card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    mainCard.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Select all that apply.\");\n\n    const optionsContainer = mainCard.append(\"div\").attr(\"class\", \"options-container\");\n    renderOptions(d3, optionsContainer);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) renderOptions(d3, container);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = { selectedAnswers: Array.isArray(incoming.selectedAnswers) ? incoming.selectedAnswers : [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"6x + 8y\" (correct)\n- Other options (23x + 9y, x + 13y, 15x - 17y) are incorrect"
            }
          }
        },
        {
          "questions": {
            "id": 23721,
            "questionContent": {
              "questionText": "Fill in the box below to write an expression that is equivalent to 7(2x + y).\n\nDrag tiles to complete: 8x - ___ + 9x + 5y + ___\n\nAvailable: 2y, 3x, 4x, 7y, 14x",
              "explanation": "Using distributive property: 7(2x + y) = 7(2x) + 7(y) = 14x + 7y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [{ id: \"2y\", label: \"2y\" }, { id: \"3x\", label: \"3x\" }, { id: \"4x\", label: \"4x\" }, { id: \"7y\", label: \"7y\" }, { id: \"14x\", label: \"14x\" }];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"\"); });\n  }\n\n  function createDefaultState() { return { slot1: null, slot2: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: { slot1: chartState.slot1, slot2: chartState.slot2 } }); }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression with slots\n    const expr = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"18px\").style(\"flex-wrap\", \"wrap\");\n    expr.append(\"span\").text(\"8x -\");\n\n    const slot1 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#fff\").text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot2 === draggedItem) chartState.slot2 = null; chartState.slot1 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot1) slot1.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot1 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    expr.append(\"span\").text(\"+ 9x + 5y +\");\n\n    const slot2 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#fff\").text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot1 === draggedItem) chartState.slot1 = null; chartState.slot2 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot2) slot2.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot2 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"12px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"8px 14px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").text(item.label);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.label; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the box below to write an expression that is equivalent to <strong>7(2x + y)</strong>.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { slot1: incoming.slots?.slot1 || null, slot2: incoming.slots?.slot2 || null };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags correct terms to create expression equivalent to 14x + 7y\n- 7(2x + y) = 14x + 7y"
            }
          }
        },
        {
          "questions": {
            "id": 23722,
            "questionContent": {
              "questionText": "Which of these expressions are equivalent to 8(t - 4)?\n\nDrag each expression to the correct category.\n\nExpressions: 8(4) - 8(t), 2(4t - 2), 2(16 - 4t), 8(t) - 8(4), 8t - 32, 4(2t - 8)",
              "explanation": "8(t - 4) = 8t - 32 using distributive property. Equivalent forms include 4(2t - 8) and 8(t) - 8(4).",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const ITEMS = [\n    { id: \"item1\", text: \"8(4) - 8(t)\" },\n    { id: \"item2\", text: \"2(4t - 2)\" },\n    { id: \"item3\", text: \"2(16 - 4t)\" },\n    { id: \"item4\", text: \"8(t) - 8(4)\" },\n    { id: \"item5\", text: \"8t - 32\" },\n    { id: \"item6\", text: \"4(2t - 8)\" },\n  ];\n\n  const CATEGORIES = [\n    { id: \"equivalent\", label: \"Equivalent to 8(t - 4)\" },\n    { id: \"notEquivalent\", label: \"Not equivalent to 8(t - 4)\" },\n  ];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { equivalent: [], notEquivalent: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { matches: { equivalent: chartState.equivalent, notEquivalent: chartState.notEquivalent } }); }\n\n  function renderDragMatch(d3, container) {\n    container.html(\"\");\n\n    const layout = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"1fr 1fr\").style(\"gap\", \"24px\");\n\n    // Available items\n    const itemsCol = layout.append(\"div\");\n    itemsCol.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Drag expressions:\");\n    const itemsArea = itemsCol.append(\"div\").style(\"background\", \"#f3f4f6\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\");\n\n    const matchedIds = [...chartState.equivalent, ...chartState.notEquivalent];\n    ITEMS.forEach((item) => {\n      const isMatched = matchedIds.includes(item.id);\n      const div = itemsArea.append(\"div\").attr(\"draggable\", !interactivityLocked && !isMatched).style(\"padding\", \"8px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isMatched ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isMatched || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isMatched ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item.text);\n      if (!interactivityLocked && !isMatched) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.id; });\n    });\n\n    // Categories\n    const catsCol = layout.append(\"div\");\n    CATEGORIES.forEach((cat) => {\n      const catDiv = catsCol.append(\"div\").style(\"margin-bottom\", \"16px\");\n      catDiv.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(cat.label);\n      const dropZone = catDiv.append(\"div\").style(\"border\", \"2px dashed #cbd5e1\").style(\"border-radius\", \"8px\").style(\"padding\", \"12px\").style(\"min-height\", \"80px\").style(\"background\", \"#fff\");\n\n      if (!interactivityLocked) {\n        dropZone.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        dropZone.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            chartState.equivalent = chartState.equivalent.filter(id => id !== draggedItem);\n            chartState.notEquivalent = chartState.notEquivalent.filter(id => id !== draggedItem);\n            chartState[cat.id].push(draggedItem);\n            draggedItem = null;\n            renderDragMatch(d3, container);\n            sendChartState();\n          }\n        });\n      }\n\n      // Show matched items\n      chartState[cat.id].forEach((itemId) => {\n        const item = ITEMS.find(i => i.id === itemId);\n        if (item) {\n          const matchedDiv = dropZone.append(\"div\").style(\"position\", \"relative\").style(\"padding\", \"8px 12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"6px\").style(\"background\", \"#fafafa\").style(\"margin-bottom\", \"8px\").style(\"font-size\", \"14px\").text(item.text);\n          if (!interactivityLocked) {\n            matchedDiv.append(\"button\").style(\"position\", \"absolute\").style(\"top\", \"4px\").style(\"right\", \"4px\").style(\"background\", \"#ef4444\").style(\"color\", \"#fff\").style(\"border\", \"none\").style(\"border-radius\", \"4px\").style(\"padding\", \"2px 6px\").style(\"font-size\", \"10px\").style(\"cursor\", \"pointer\").text(\"x\").on(\"click\", () => {\n              chartState[cat.id] = chartState[cat.id].filter(id => id !== itemId);\n              renderDragMatch(d3, container);\n              sendChartState();\n            });\n          }\n        }\n      });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragMatch(currentD3, currentD3.select(\".drag-match-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Which of these expressions are equivalent to <strong>8(t - 4)</strong>?\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Drag each expression to the correct category.\");\n    const dragMatch = main.append(\"div\").attr(\"class\", \"drag-match-container\");\n    renderDragMatch(d3, dragMatch);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { equivalent: incoming.matches?.equivalent || [], notEquivalent: incoming.matches?.notEquivalent || [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragMatch(d3, d3.select(\".drag-match-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragMatch(d3, d3.select(\".drag-match-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Equivalent to 8(t - 4): 8(t) - 8(4), 8t - 32, 4(2t - 8)\nNot Equivalent: 8(4) - 8(t), 2(4t - 2), 2(16 - 4t)"
            }
          }
        },
        {
          "questions": {
            "id": 23726,
            "questionContent": {
              "questionText": "Linda has a garden that is 4.5 meters wide. 2 meters of the length are for carrots, and x meters are for peas.\n\nDrag tiles to write 2 different expressions that represent the area of the garden in square meters.\n\nAvailable tiles: 2, 4.5, x, 2x, 4.5x, 9, 6.5, 18\n\nFormat: __(__ + __) and __ + __",
              "explanation": "Garden area = width times length = 4.5(2 + x)\nDistributed form = 4.5(2) + 4.5(x) = 9 + 4.5x",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [\"2\", \"4.5\", \"x\", \"2x\", \"4.5x\", \"9\", \"6.5\", \"18\"];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { s1: null, s2: null, s3: null, s4: null, s5: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: chartState }); }\n\n  function renderGarden(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 200).attr(\"height\", 100).style(\"display\", \"block\").style(\"margin\", \"0 auto 20px\");\n\n    // Garden sections\n    svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", 20).attr(\"width\", 40).attr(\"height\", 60).attr(\"fill\", \"#fed7aa\").attr(\"stroke\", \"#ea580c\").attr(\"stroke-width\", 2);\n    svg.append(\"rect\").attr(\"x\", 50).attr(\"y\", 20).attr(\"width\", 80).attr(\"height\", 60).attr(\"fill\", \"#bbf7d0\").attr(\"stroke\", \"#16a34a\").attr(\"stroke-width\", 2);\n\n    // Labels\n    svg.append(\"text\").attr(\"x\", 30).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"2 m\");\n    svg.append(\"text\").attr(\"x\", 90).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"x\");\n    svg.append(\"text\").attr(\"x\", 145).attr(\"y\", 55).attr(\"font-size\", \"10px\").text(\"4.5 m\");\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression 1: __(__ + __)\n    const exp1 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"16px\").style(\"font-size\", \"16px\");\n\n    const slotStyle = { width: \"50px\", height: \"32px\", border: \"2px dashed #9ca3af\", borderRadius: \"6px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fff\", fontSize: \"14px\" };\n\n    [\"s1\", \"s2\", \"s3\"].forEach((key, i) => {\n      if (i === 1) exp1.append(\"span\").text(\"(\");\n      if (i === 2) exp1.append(\"span\").text(\"+\");\n\n      const slot = exp1.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n\n      if (i === 2) exp1.append(\"span\").text(\")\");\n    });\n\n    // Expression 2: __ + __\n    const exp2 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"16px\");\n\n    [\"s4\", \"s5\"].forEach((key, i) => {\n      if (i === 1) exp2.append(\"span\").text(\"+\");\n\n      const slot = exp2.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n    });\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    const usedItems = Object.values(chartState).filter(Boolean);\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = usedItems.includes(item);\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"6px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"6px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Linda has a garden that is 4.5 meters wide. 2 meters of the length are for carrots, and <em>x</em> meters are for peas.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    renderGarden(d3, main);\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to write 2 different expressions that represent the area of the garden in square meters.\");\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    chartState = payload?.slots || createDefaultState();\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- First expression: 4.5(2 + x) or equivalent\n- Second expression: 9 + 4.5x or equivalent\n- Both expressions should equal the same value"
            }
          }
        },
        {
          "questions": {
            "id": 23741,
            "questionContent": {
              "questionText": "Fill in the box to write an expression equivalent to 9x - 3x.\n\nThe algebra tiles show 9 positive x tiles with 3 crossed out (representing subtraction).",
              "explanation": "When we subtract like terms, we subtract their coefficients: 9x - 3x = (9 - 3)x = 6x. The algebra tiles visualize this by showing 9 positive x tiles with 3 being removed (crossed out), leaving 6 x tiles.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    video\n      .append(\"p\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Your browser does not support the video tag.\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    // Create SVG for algebra tiles\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 120)\n      .attr(\"height\", 320)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileWidth = 80;\n    const tileHeight = 30;\n    const gap = 5;\n    const startX = 20;\n    const startY = 10;\n\n    // Draw 9 x-tiles, with last 3 crossed out\n    for (let i = 0; i < 9; i++) {\n      const y = startY + i * (tileHeight + gap);\n      const isCrossedOut = i >= 6;\n\n      // Tile rectangle\n      svg.append(\"rect\")\n        .attr(\"x\", startX)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      // x label\n      svg.append(\"text\")\n        .attr(\"x\", startX + 10)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      // Cross out the last 3 tiles\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", startX)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", startX + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Fill in the box to write an expression equivalent to <strong>9x - 3x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles visualization\n    renderAlgebraTiles(d3, mainCard);\n\n    // Answer input area\n    const inputContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"input-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"font-size\", \"20px\");\n\n    answerInput = inputContainer\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .attr(\"maxlength\", \"3\")\n      .style(\"width\", \"60px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #d1d5db\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      })\n      .on(\"focus\", function () {\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"outline\", \"none\");\n      })\n      .on(\"blur\", function () {\n        d3.select(this).style(\"border-color\", \"#d1d5db\");\n      });\n\n    inputContainer\n      .append(\"span\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x\");\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the coefficient \"6\" in the input box\n- The complete equivalent expression is 6x\n- Accept variations: \"6\", \" 6 \", etc."
            }
          }
        },
        {
          "questions": {
            "id": 23746,
            "questionContent": {
              "questionText": "Which expression is equivalent to 5x + 2 - 2x + 3?\n\nThe algebra tiles show 5 positive x tiles with 2 crossed out (representing subtraction) and 5 positive unit tiles.",
              "explanation": "To simplify 5x + 2 - 2x + 3, combine like terms:\n- Variable terms: 5x - 2x = 3x\n- Constant terms: 2 + 3 = 5\n- Result: 3x + 5",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"3x + 5\", isCorrect: true },\n    { id: \"B\", label: \"3x + 1\", isCorrect: false },\n    { id: \"C\", label: \"5x + 1\", isCorrect: false },\n    { id: \"D\", label: \"5x + 5\", isCorrect: false },\n  ];\n\n  function createDefaultState() {\n    return {\n      selectedAnswer: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedAnswer: chartState.selectedAnswer,\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 200)\n      .attr(\"height\", 190)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles (5 total, 2 crossed out) - left column\n    for (let i = 0; i < 5; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 3;\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles (5 total: 2+3, shown as 2 columns)\n    // First column: 2 units\n    for (let i = 0; i < 2; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n\n    // Second column: 3 units\n    for (let i = 0; i < 3; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 145)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 152)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n  }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n\n    const optionsList = container\n      .append(\"div\")\n      .attr(\"class\", \"options-list\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-direction\", \"column\")\n      .style(\"gap\", \"12px\")\n      .style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswer === option.id;\n\n      const optionRow = optionsList\n        .append(\"div\")\n        .attr(\"class\", \"option-row\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px 16px\")\n        .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n        .style(\"transition\", \"all 0.2s\");\n\n      if (!interactivityLocked) {\n        optionRow\n          .on(\"mouseover\", function () {\n            if (!isSelected) {\n              d3.select(this)\n                .style(\"background\", \"#f9fafb\")\n                .style(\"border-color\", \"#9ca3af\");\n            }\n          })\n          .on(\"mouseout\", function () {\n            d3.select(this)\n              .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n              .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\");\n          })\n          .on(\"click\", function () {\n            if (interactivityLocked) return;\n            chartState.selectedAnswer = option.id;\n            renderOptions(d3, container);\n            sendChartState();\n          });\n      }\n\n      // Radio button\n      const radioButton = optionRow\n        .append(\"div\")\n        .style(\"width\", \"20px\")\n        .style(\"height\", \"20px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\")\n        .style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"justify-content\", \"center\")\n        .style(\"flex-shrink\", \"0\");\n\n      radioButton\n        .append(\"div\")\n        .style(\"width\", \"8px\")\n        .style(\"height\", \"8px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"background\", isSelected ? \"#ffffff\" : \"transparent\");\n\n      // Option label\n      optionRow\n        .append(\"div\")\n        .style(\"font-size\", \"18px\")\n        .text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) {\n        renderOptions(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Which expression is equivalent to <strong>5x + 2 - 2x + 3</strong>?\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Options container\n    const optionsContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"options-container\");\n\n    renderOptions(d3, optionsContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) {\n      renderOptions(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (\n      typeof incoming.selectedAnswer === \"string\" &&\n      ANSWER_OPTIONS.some((opt) => opt.id === incoming.selectedAnswer)\n    ) {\n      nextState.selectedAnswer = incoming.selectedAnswer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects option A: 3x + 5\n- This is the only correct answer"
            }
          }
        },
        {
          "questions": {
            "id": 23751,
            "questionContent": {
              "questionText": "What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\n\nThe tiles show: 4 positive x tiles (with 2 crossed out representing subtraction) and 4 positive unit tiles (with 1 crossed out).\n\nAvailable terms: 0x, 2x, 3, 4",
              "explanation": "The algebra tiles show 4 x-tiles with 2 crossed out (4x - 2x = 2x) and 4 unit tiles with 1 crossed out (4 - 1 = 3). Result: 2x + 3.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // Draggable terms\n  const DRAG_ITEMS = [\n    { id: \"0x\", label: \"0x\" },\n    { id: \"2x\", label: \"2x\" },\n    { id: \"3\", label: \"3\" },\n    { id: \"4\", label: \"4\" },\n  ];\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      slot1: null,\n      slot2: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      slots: {\n        slot1: chartState.slot1,\n        slot2: chartState.slot2,\n      },\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 180)\n      .attr(\"height\", 220)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles - 4 total with 2 crossed out (showing subtraction)\n    // Blue color for x tiles\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = (i >= 2); // Last 2 tiles crossed out\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#f472b6\")\n        .attr(\"stroke\", \"#db2777\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#831843\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles - 4 total with 1 crossed out (4-1=3)\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (unitSize + gap);\n      const isCrossedOut = (i === 3);\n\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 110)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110 + unitSize)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 110 + unitSize)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Drop slots container\n    const slotsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"slots-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"font-size\", \"20px\");\n\n    // First slot\n    const slot1 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-1\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot2 === draggedItem) chartState.slot2 = null;\n          chartState.slot1 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot1) {\n        slot1\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot1 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    slotsContainer.append(\"span\").text(\"+\");\n\n    // Second slot\n    const slot2 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-2\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot1 === draggedItem) chartState.slot1 = null;\n          chartState.slot2 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot2) {\n        slot2\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot2 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    // Draggable items\n    const itemsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"items-container\")\n      .style(\"display\", \"flex\")\n      .style(\"gap\", \"12px\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"justify-content\", \"center\");\n\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n\n      const itemDiv = itemsContainer\n        .append(\"div\")\n        .attr(\"class\", \"drag-item\")\n        .attr(\"draggable\", !interactivityLocked && !isUsed)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"border\", \"2px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"background\", isUsed ? \"#e5e7eb\" : \"#ffffff\")\n        .style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\")\n        .style(\"opacity\", isUsed ? \"0.5\" : \"1\")\n        .style(\"font-size\", \"16px\")\n        .style(\"user-select\", \"none\")\n        .text(item.label);\n\n      if (!interactivityLocked && !isUsed) {\n        itemDiv.node().addEventListener(\"dragstart\", () => {\n          draggedItem = item.label;\n        });\n\n        itemDiv\n          .on(\"mouseenter\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1.05)\")\n              .style(\"box-shadow\", \"0 4px 12px rgba(0,0,0,0.1)\");\n          })\n          .on(\"mouseleave\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1)\")\n              .style(\"box-shadow\", \"none\");\n          });\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".drag-drop-container\");\n      if (!container.empty()) {\n        renderDragDrop(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Drag and drop area\n    const dragDropContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"drag-drop-container\");\n\n    renderDragDrop(d3, dragDropContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".drag-drop-container\");\n    if (!container.empty()) {\n      renderDragDrop(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.slots && typeof incoming.slots === \"object\") {\n      nextState.slot1 = incoming.slots.slot1 || null;\n      nextState.slot2 = incoming.slots.slot2 || null;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags \"2x\" and \"3\" into the slots\n- The simplified expression shown should be 2x + 3 (or 3 + 2x)"
            }
          }
        },
        {
          "questions": {
            "id": 23756,
            "questionContent": {
              "questionText": "Fill in the boxes to write an expression equivalent to 3x + 4y - 2y + 5x.\n\nThe algebra tiles show the terms being combined.",
              "explanation": "To simplify 3x + 4y - 2y + 5x, combine like terms:\n- x terms: 3x + 5x = 8x\n- y terms: 4y - 2y = 2y\n- Result: 8x + 2y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\");\n\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\");\n\n    const video = content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\");\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  function createDefaultState() {\n    return { answer1: \"\", answer2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let input1 = null;\n  let input2 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answers: { answer1: chartState.answer1, answer2: chartState.answer2 },\n    });\n  }\n\n  function renderControls() {\n    if (input1 && input1.node().value !== chartState.answer1) input1.node().value = chartState.answer1;\n    if (input2 && input2.node().value !== chartState.answer2) input2.node().value = chartState.answer2;\n    if (input1) input1.property(\"disabled\", interactivityLocked);\n    if (input2) input2.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 280).attr(\"height\", 200).style(\"display\", \"block\").style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 60;\n    const gap = 5;\n\n    // Left column: 3x tiles\n    for (let i = 0; i < 3; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 20).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n\n    // Middle column: 4y tiles with 2 crossed out\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 2;\n      svg.append(\"rect\").attr(\"x\", 90).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#f472b6\").attr(\"stroke\", \"#db2777\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 100).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#831843\").text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\").attr(\"x1\", 90).attr(\"y1\", y).attr(\"x2\", 90 + tileWidth).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n        svg.append(\"line\").attr(\"x1\", 90 + tileWidth).attr(\"y1\", y).attr(\"x2\", 90).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Right column: 5x tiles\n    for (let i = 0; i < 5; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 170).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 180).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the boxes to write an expression equivalent to <strong>3x + 4y - 2y + 5x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n\n    renderAlgebraTiles(d3, mainCard);\n\n    // Input container\n    const inputContainer = mainCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"font-size\", \"20px\").style(\"justify-content\", \"center\");\n\n    input1 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer1 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"x + \");\n\n    input2 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer2 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"y\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.answers) {\n      nextState.answer1 = incoming.answers.answer1 || \"\";\n      nextState.answer2 = incoming.answers.answer2 || \"\";\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters \"8\" in the first box (coefficient of x)\n- Student enters \"2\" in the second box (coefficient of y)\n- Complete expression: 8x + 2y"
            }
          }
        },
        {
          "questions": {
            "id": 23761,
            "questionContent": {
              "questionText": "Which expression is equivalent to 9x + 12y - 3x - 5y?\n\nSelect all that apply.",
              "explanation": "To simplify 9x + 12y - 3x - 5y:\n- x terms: 9x - 3x = 6x\n- y terms: 12y - 5y = 7y\n- Result: 6x + 7y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"] || CARD_STYLES.large;\n    return container.append(\"div\").attr(\"class\", options.className || \"standard-card\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\"); });\n    return acc;\n  }\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"21x + 7y\", isCorrect: false },\n    { id: \"B\", label: \"6x + 7y\", isCorrect: true },\n    { id: \"C\", label: \"12x + 17y\", isCorrect: false },\n    { id: \"D\", label: \"3x - 5y\", isCorrect: false },\n  ];\n\n  function createDefaultState() { return { selectedAnswers: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { selectedAnswers: chartState.selectedAnswers }); }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n    const optionsList = container.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"12px\").style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswers.includes(option.id);\n      const optionRow = optionsList.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"padding\", \"12px 16px\").style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\").style(\"border-radius\", \"8px\").style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\");\n\n      if (!interactivityLocked) {\n        optionRow.on(\"click\", function () {\n          if (isSelected) {\n            chartState.selectedAnswers = chartState.selectedAnswers.filter(id => id !== option.id);\n          } else {\n            chartState.selectedAnswers = [...chartState.selectedAnswers, option.id];\n          }\n          renderOptions(d3, container);\n          sendChartState();\n        });\n      }\n\n      // Checkbox\n      const checkbox = optionRow.append(\"div\").style(\"width\", \"20px\").style(\"height\", \"20px\").style(\"border-radius\", \"4px\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\").style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\");\n      if (isSelected) checkbox.append(\"span\").style(\"color\", \"#ffffff\").style(\"font-size\", \"14px\").html(\"&#10003;\");\n\n      optionRow.append(\"div\").style(\"font-size\", \"18px\").text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) renderOptions(currentD3, container);\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which expression is equivalent to <strong>9x + 12y - 3x - 5y</strong>?\");\n\n    // Main card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    mainCard.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Select all that apply.\");\n\n    const optionsContainer = mainCard.append(\"div\").attr(\"class\", \"options-container\");\n    renderOptions(d3, optionsContainer);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) renderOptions(d3, container);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = { selectedAnswers: Array.isArray(incoming.selectedAnswers) ? incoming.selectedAnswers : [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"6x + 7y\" (correct)\n- Other options are incorrect"
            }
          }
        },
        {
          "questions": {
            "id": 23766,
            "questionContent": {
              "questionText": "Fill in the box below to write an expression that is equivalent to 6(3x + y).\n\nDrag tiles to complete: 10x - ___ + 12x + 4y + ___\n\nAvailable: 2y, 4x, 5x, 6y, 18x",
              "explanation": "Using distributive property: 6(3x + y) = 6(3x) + 6(y) = 18x + 6y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [{ id: \"2y\", label: \"2y\" }, { id: \"4x\", label: \"4x\" }, { id: \"5x\", label: \"5x\" }, { id: \"6y\", label: \"6y\" }, { id: \"18x\", label: \"18x\" }];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"\"); });\n  }\n\n  function createDefaultState() { return { slot1: null, slot2: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: { slot1: chartState.slot1, slot2: chartState.slot2 } }); }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression with slots\n    const expr = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"18px\").style(\"flex-wrap\", \"wrap\");\n    expr.append(\"span\").text(\"10x -\");\n\n    const slot1 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#fff\").text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot2 === draggedItem) chartState.slot2 = null; chartState.slot1 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot1) slot1.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot1 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    expr.append(\"span\").text(\"+ 12x + 4y +\");\n\n    const slot2 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#fff\").text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot1 === draggedItem) chartState.slot1 = null; chartState.slot2 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot2) slot2.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot2 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"12px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"8px 14px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").text(item.label);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.label; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the box below to write an expression that is equivalent to <strong>6(3x + y)</strong>.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { slot1: incoming.slots?.slot1 || null, slot2: incoming.slots?.slot2 || null };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags correct terms to create expression equivalent to 18x + 6y\n- 6(3x + y) = 18x + 6y"
            }
          }
        },
        {
          "questions": {
            "id": 23771,
            "questionContent": {
              "questionText": "Which of these expressions are equivalent to 6(x - 3)?\n\nDrag each expression to the correct category.\n\nExpressions: 6(3) - 6(x), 2(3x - 3), 3(12 - 2x), 6(x) - 6(3), 6x - 18, 3(2x - 6)",
              "explanation": "6(x - 3) = 6x - 18 using distributive property. Equivalent forms include 3(2x - 6) and 6(x) - 6(3).",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const ITEMS = [\n    { id: \"item1\", text: \"6(3) - 6(x)\" },\n    { id: \"item2\", text: \"2(3x - 3)\" },\n    { id: \"item3\", text: \"3(12 - 2x)\" },\n    { id: \"item4\", text: \"6(x) - 6(3)\" },\n    { id: \"item5\", text: \"6x - 18\" },\n    { id: \"item6\", text: \"3(2x - 6)\" },\n  ];\n\n  const CATEGORIES = [\n    { id: \"equivalent\", label: \"Equivalent to 6(x - 3)\" },\n    { id: \"notEquivalent\", label: \"Not equivalent to 6(x - 3)\" },\n  ];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { equivalent: [], notEquivalent: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { matches: { equivalent: chartState.equivalent, notEquivalent: chartState.notEquivalent } }); }\n\n  function renderDragMatch(d3, container) {\n    container.html(\"\");\n\n    const layout = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"1fr 1fr\").style(\"gap\", \"24px\");\n\n    // Available items\n    const itemsCol = layout.append(\"div\");\n    itemsCol.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Drag expressions:\");\n    const itemsArea = itemsCol.append(\"div\").style(\"background\", \"#f3f4f6\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\");\n\n    const matchedIds = [...chartState.equivalent, ...chartState.notEquivalent];\n    ITEMS.forEach((item) => {\n      const isMatched = matchedIds.includes(item.id);\n      const div = itemsArea.append(\"div\").attr(\"draggable\", !interactivityLocked && !isMatched).style(\"padding\", \"8px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isMatched ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isMatched || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isMatched ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item.text);\n      if (!interactivityLocked && !isMatched) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.id; });\n    });\n\n    // Categories\n    const catsCol = layout.append(\"div\");\n    CATEGORIES.forEach((cat) => {\n      const catDiv = catsCol.append(\"div\").style(\"margin-bottom\", \"16px\");\n      catDiv.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(cat.label);\n      const dropZone = catDiv.append(\"div\").style(\"border\", \"2px dashed #cbd5e1\").style(\"border-radius\", \"8px\").style(\"padding\", \"12px\").style(\"min-height\", \"80px\").style(\"background\", \"#fff\");\n\n      if (!interactivityLocked) {\n        dropZone.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        dropZone.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            chartState.equivalent = chartState.equivalent.filter(id => id !== draggedItem);\n            chartState.notEquivalent = chartState.notEquivalent.filter(id => id !== draggedItem);\n            chartState[cat.id].push(draggedItem);\n            draggedItem = null;\n            renderDragMatch(d3, container);\n            sendChartState();\n          }\n        });\n      }\n\n      // Show matched items\n      chartState[cat.id].forEach((itemId) => {\n        const item = ITEMS.find(i => i.id === itemId);\n        if (item) {\n          const matchedDiv = dropZone.append(\"div\").style(\"position\", \"relative\").style(\"padding\", \"8px 12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"6px\").style(\"background\", \"#fafafa\").style(\"margin-bottom\", \"8px\").style(\"font-size\", \"14px\").text(item.text);\n          if (!interactivityLocked) {\n            matchedDiv.append(\"button\").style(\"position\", \"absolute\").style(\"top\", \"4px\").style(\"right\", \"4px\").style(\"background\", \"#ef4444\").style(\"color\", \"#fff\").style(\"border\", \"none\").style(\"border-radius\", \"4px\").style(\"padding\", \"2px 6px\").style(\"font-size\", \"10px\").style(\"cursor\", \"pointer\").text(\"x\").on(\"click\", () => {\n              chartState[cat.id] = chartState[cat.id].filter(id => id !== itemId);\n              renderDragMatch(d3, container);\n              sendChartState();\n            });\n          }\n        }\n      });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragMatch(currentD3, currentD3.select(\".drag-match-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Which of these expressions are equivalent to <strong>6(x - 3)</strong>?\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Drag each expression to the correct category.\");\n    const dragMatch = main.append(\"div\").attr(\"class\", \"drag-match-container\");\n    renderDragMatch(d3, dragMatch);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { equivalent: incoming.matches?.equivalent || [], notEquivalent: incoming.matches?.notEquivalent || [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragMatch(d3, d3.select(\".drag-match-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragMatch(d3, d3.select(\".drag-match-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Equivalent to 6(x - 3): 6(x) - 6(3), 6x - 18, 3(2x - 6)\nNot Equivalent: 6(3) - 6(x), 2(3x - 3), 3(12 - 2x)"
            }
          }
        },
        {
          "questions": {
            "id": 23776,
            "questionContent": {
              "questionText": "Marco has a rectangular poster that is 3.5 meters wide. 4 meters of the length are for text, and x meters are for images.\n\nDrag tiles to write 2 different expressions that represent the area of the poster in square meters.\n\nAvailable tiles: 3, 3.5, 4, x, 3x, 3.5x, 7, 10.5, 14\n\nFormat: __(__ + __) and __ + __",
              "explanation": "Poster area = width times length = 3.5(4 + x)\nDistributed form = 3.5(4) + 3.5(x) = 14 + 3.5x",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [\"3\", \"3.5\", \"4\", \"x\", \"3x\", \"3.5x\", \"7\", \"10.5\", \"14\"];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { s1: null, s2: null, s3: null, s4: null, s5: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: chartState }); }\n\n  function renderGarden(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 200).attr(\"height\", 100).style(\"display\", \"block\").style(\"margin\", \"0 auto 20px\");\n\n    // Garden sections\n    svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", 20).attr(\"width\", 40).attr(\"height\", 60).attr(\"fill\", \"#fed7aa\").attr(\"stroke\", \"#ea580c\").attr(\"stroke-width\", 2);\n    svg.append(\"rect\").attr(\"x\", 50).attr(\"y\", 20).attr(\"width\", 80).attr(\"height\", 60).attr(\"fill\", \"#bbf7d0\").attr(\"stroke\", \"#16a34a\").attr(\"stroke-width\", 2);\n\n    // Labels\n    svg.append(\"text\").attr(\"x\", 30).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"4 m\");\n    svg.append(\"text\").attr(\"x\", 90).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"x\");\n    svg.append(\"text\").attr(\"x\", 145).attr(\"y\", 55).attr(\"font-size\", \"10px\").text(\"3.5 m\");\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression 1: __(__ + __)\n    const exp1 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"16px\").style(\"font-size\", \"16px\");\n\n    const slotStyle = { width: \"50px\", height: \"32px\", border: \"2px dashed #9ca3af\", borderRadius: \"6px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fff\", fontSize: \"14px\" };\n\n    [\"s1\", \"s2\", \"s3\"].forEach((key, i) => {\n      if (i === 1) exp1.append(\"span\").text(\"(\");\n      if (i === 2) exp1.append(\"span\").text(\"+\");\n\n      const slot = exp1.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n\n      if (i === 2) exp1.append(\"span\").text(\")\");\n    });\n\n    // Expression 2: __ + __\n    const exp2 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"16px\");\n\n    [\"s4\", \"s5\"].forEach((key, i) => {\n      if (i === 1) exp2.append(\"span\").text(\"+\");\n\n      const slot = exp2.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n    });\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    const usedItems = Object.values(chartState).filter(Boolean);\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = usedItems.includes(item);\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"6px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"6px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Marco has a rectangular poster that is 3.5 meters wide. 4 meters of the length are for text, and <em>x</em> meters are for images.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    renderGarden(d3, main);\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to write 2 different expressions that represent the area of the garden in square meters.\");\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    chartState = payload?.slots || createDefaultState();\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- First expression: 3.5(4 + x) or equivalent\n- Second expression: 14 + 3.5x or equivalent\n- Both expressions should equal the same value"
            }
          }
        },
        {
          "questions": {
            "id": 23742,
            "questionContent": {
              "questionText": "Fill in the box to write an expression equivalent to 7x - 4x.\n\nThe algebra tiles show 7 positive x tiles with 4 crossed out (representing subtraction).",
              "explanation": "When we subtract like terms, we subtract their coefficients: 7x - 4x = (7 - 4)x = 3x. The algebra tiles visualize this by showing 7 positive x tiles with 4 being removed (crossed out), leaving 3 x tiles.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    video\n      .append(\"p\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Your browser does not support the video tag.\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    // Create SVG for algebra tiles\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 120)\n      .attr(\"height\", 320)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileWidth = 80;\n    const tileHeight = 30;\n    const gap = 5;\n    const startX = 20;\n    const startY = 10;\n\n    // Draw 7 x-tiles, with last 4 crossed out\n    for (let i = 0; i < 7; i++) {\n      const y = startY + i * (tileHeight + gap);\n      const isCrossedOut = i >= 3;\n\n      // Tile rectangle\n      svg.append(\"rect\")\n        .attr(\"x\", startX)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      // x label\n      svg.append(\"text\")\n        .attr(\"x\", startX + 10)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      // Cross out the last 4 tiles\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", startX)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", startX + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Fill in the box to write an expression equivalent to <strong>7x - 4x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles visualization\n    renderAlgebraTiles(d3, mainCard);\n\n    // Answer input area\n    const inputContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"input-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"font-size\", \"20px\");\n\n    answerInput = inputContainer\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .attr(\"maxlength\", \"3\")\n      .style(\"width\", \"60px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #d1d5db\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      })\n      .on(\"focus\", function () {\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"outline\", \"none\");\n      })\n      .on(\"blur\", function () {\n        d3.select(this).style(\"border-color\", \"#d1d5db\");\n      });\n\n    inputContainer\n      .append(\"span\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x\");\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the coefficient \"3\" in the input box\n- The complete equivalent expression is 3x\n- Accept variations: \"3\", \" 3 \", etc."
            }
          }
        },
        {
          "questions": {
            "id": 23747,
            "questionContent": {
              "questionText": "Which expression is equivalent to 6x + 4 - 3x + 1?\n\nThe algebra tiles show 6 positive x tiles with 3 crossed out (representing subtraction) and 5 positive unit tiles.",
              "explanation": "To simplify 6x + 4 - 3x + 1, combine like terms:\n- Variable terms: 6x - 3x = 3x\n- Constant terms: 4 + 1 = 5\n- Result: 3x + 5",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"3x + 5\", isCorrect: true },\n    { id: \"B\", label: \"3x + 1\", isCorrect: false },\n    { id: \"C\", label: \"5x + 1\", isCorrect: false },\n    { id: \"D\", label: \"5x + 5\", isCorrect: false },\n  ];\n\n  function createDefaultState() {\n    return {\n      selectedAnswer: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedAnswer: chartState.selectedAnswer,\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 200)\n      .attr(\"height\", 225)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles (6 total, 3 crossed out) - left column\n    for (let i = 0; i < 6; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 3;\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles (5 total: 4+1, shown as 2 columns)\n    // First column: 4 units\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n\n    // Second column: 1 units\n    for (let i = 0; i < 1; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 145)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 152)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n  }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n\n    const optionsList = container\n      .append(\"div\")\n      .attr(\"class\", \"options-list\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-direction\", \"column\")\n      .style(\"gap\", \"12px\")\n      .style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswer === option.id;\n\n      const optionRow = optionsList\n        .append(\"div\")\n        .attr(\"class\", \"option-row\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px 16px\")\n        .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n        .style(\"transition\", \"all 0.2s\");\n\n      if (!interactivityLocked) {\n        optionRow\n          .on(\"mouseover\", function () {\n            if (!isSelected) {\n              d3.select(this)\n                .style(\"background\", \"#f9fafb\")\n                .style(\"border-color\", \"#9ca3af\");\n            }\n          })\n          .on(\"mouseout\", function () {\n            d3.select(this)\n              .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n              .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\");\n          })\n          .on(\"click\", function () {\n            if (interactivityLocked) return;\n            chartState.selectedAnswer = option.id;\n            renderOptions(d3, container);\n            sendChartState();\n          });\n      }\n\n      // Radio button\n      const radioButton = optionRow\n        .append(\"div\")\n        .style(\"width\", \"20px\")\n        .style(\"height\", \"20px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\")\n        .style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"justify-content\", \"center\")\n        .style(\"flex-shrink\", \"0\");\n\n      radioButton\n        .append(\"div\")\n        .style(\"width\", \"8px\")\n        .style(\"height\", \"8px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"background\", isSelected ? \"#ffffff\" : \"transparent\");\n\n      // Option label\n      optionRow\n        .append(\"div\")\n        .style(\"font-size\", \"18px\")\n        .text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) {\n        renderOptions(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Which expression is equivalent to <strong>6x + 4 - 3x + 1</strong>?\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Options container\n    const optionsContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"options-container\");\n\n    renderOptions(d3, optionsContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) {\n      renderOptions(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (\n      typeof incoming.selectedAnswer === \"string\" &&\n      ANSWER_OPTIONS.some((opt) => opt.id === incoming.selectedAnswer)\n    ) {\n      nextState.selectedAnswer = incoming.selectedAnswer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects option A: 3x + 5\n- This is the only correct answer"
            }
          }
        },
        {
          "questions": {
            "id": 23752,
            "questionContent": {
              "questionText": "What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\n\nThe tiles show: 8 positive y tiles (with 4 crossed out representing subtraction) and 6 positive unit tiles (with 1 crossed out).\n\nAvailable terms: 0y, 4y, 5, 6",
              "explanation": "The algebra tiles show 8 y-tiles with 4 crossed out (8y - 4y = 4y) and 6 unit tiles with 1 crossed out (6 - 1 = 5). Result: 4y + 5.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // Draggable terms\n  const DRAG_ITEMS = [\n    { id: \"0y\", label: \"0y\" },\n    { id: \"4y\", label: \"4y\" },\n    { id: \"5\", label: \"5\" },\n    { id: \"6\", label: \"6\" },\n  ];\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      slot1: null,\n      slot2: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      slots: {\n        slot1: chartState.slot1,\n        slot2: chartState.slot2,\n      },\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 180)\n      .attr(\"height\", 220)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // Y tiles - 8 total with 4 crossed out (showing subtraction)\n    // Pink/magenta color for y tiles\n    for (let i = 0; i < 8; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = (i >= 4); // Last 4 tiles crossed out\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#f472b6\")\n        .attr(\"stroke\", \"#db2777\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#831843\")\n        .text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles - 6 total with 1 crossed out (6-1=5)\n    for (let i = 0; i < 6; i++) {\n      const y = 10 + i * (unitSize + gap);\n      const isCrossedOut = (i === 5);\n\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 110)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110 + unitSize)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 110 + unitSize)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Drop slots container\n    const slotsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"slots-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"font-size\", \"20px\");\n\n    // First slot\n    const slot1 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-1\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot2 === draggedItem) chartState.slot2 = null;\n          chartState.slot1 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot1) {\n        slot1\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot1 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    slotsContainer.append(\"span\").text(\"+\");\n\n    // Second slot\n    const slot2 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-2\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot1 === draggedItem) chartState.slot1 = null;\n          chartState.slot2 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot2) {\n        slot2\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot2 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    // Draggable items\n    const itemsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"items-container\")\n      .style(\"display\", \"flex\")\n      .style(\"gap\", \"12px\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"justify-content\", \"center\");\n\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n\n      const itemDiv = itemsContainer\n        .append(\"div\")\n        .attr(\"class\", \"drag-item\")\n        .attr(\"draggable\", !interactivityLocked && !isUsed)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"border\", \"2px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"background\", isUsed ? \"#e5e7eb\" : \"#ffffff\")\n        .style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\")\n        .style(\"opacity\", isUsed ? \"0.5\" : \"1\")\n        .style(\"font-size\", \"16px\")\n        .style(\"user-select\", \"none\")\n        .text(item.label);\n\n      if (!interactivityLocked && !isUsed) {\n        itemDiv.node().addEventListener(\"dragstart\", () => {\n          draggedItem = item.label;\n        });\n\n        itemDiv\n          .on(\"mouseenter\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1.05)\")\n              .style(\"box-shadow\", \"0 4px 12px rgba(0,0,0,0.1)\");\n          })\n          .on(\"mouseleave\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1)\")\n              .style(\"box-shadow\", \"none\");\n          });\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".drag-drop-container\");\n      if (!container.empty()) {\n        renderDragDrop(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Drag and drop area\n    const dragDropContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"drag-drop-container\");\n\n    renderDragDrop(d3, dragDropContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".drag-drop-container\");\n    if (!container.empty()) {\n      renderDragDrop(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.slots && typeof incoming.slots === \"object\") {\n      nextState.slot1 = incoming.slots.slot1 || null;\n      nextState.slot2 = incoming.slots.slot2 || null;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags \"4y\" and \"5\" into the slots\n- The simplified expression shown should be 4y + 5 (or 5 + 4y)"
            }
          }
        },
        {
          "questions": {
            "id": 23757,
            "questionContent": {
              "questionText": "Fill in the boxes to write an expression equivalent to 4x + 6y - 4y + 3x.\n\nThe algebra tiles show the terms being combined.",
              "explanation": "To simplify 4x + 6y - 4y + 3x, combine like terms:\n- x terms: 4x + 3x = 7x\n- y terms: 6y - 4y = 2y\n- Result: 7x + 2y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\");\n\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\");\n\n    const video = content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\");\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  function createDefaultState() {\n    return { answer1: \"\", answer2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let input1 = null;\n  let input2 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answers: { answer1: chartState.answer1, answer2: chartState.answer2 },\n    });\n  }\n\n  function renderControls() {\n    if (input1 && input1.node().value !== chartState.answer1) input1.node().value = chartState.answer1;\n    if (input2 && input2.node().value !== chartState.answer2) input2.node().value = chartState.answer2;\n    if (input1) input1.property(\"disabled\", interactivityLocked);\n    if (input2) input2.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 280).attr(\"height\", 200).style(\"display\", \"block\").style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 60;\n    const gap = 5;\n\n    // Left column: 4x tiles\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 20).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n\n    // Middle column: 6y tiles with 4 crossed out\n    for (let i = 0; i < 6; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 2;\n      svg.append(\"rect\").attr(\"x\", 90).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#f472b6\").attr(\"stroke\", \"#db2777\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 100).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#831843\").text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\").attr(\"x1\", 90).attr(\"y1\", y).attr(\"x2\", 90 + tileWidth).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n        svg.append(\"line\").attr(\"x1\", 90 + tileWidth).attr(\"y1\", y).attr(\"x2\", 90).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Right column: 3x tiles\n    for (let i = 0; i < 3; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 170).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 180).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the boxes to write an expression equivalent to <strong>4x + 6y - 4y + 3x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n\n    renderAlgebraTiles(d3, mainCard);\n\n    // Input container\n    const inputContainer = mainCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"font-size\", \"20px\").style(\"justify-content\", \"center\");\n\n    input1 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer1 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"x + \");\n\n    input2 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer2 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"y\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.answers) {\n      nextState.answer1 = incoming.answers.answer1 || \"\";\n      nextState.answer2 = incoming.answers.answer2 || \"\";\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters \"7\" in the first box (coefficient of x)\n- Student enters \"2\" in the second box (coefficient of y)\n- Complete expression: 7x + 2y"
            }
          }
        },
        {
          "questions": {
            "id": 23762,
            "questionContent": {
              "questionText": "Which expression is equivalent to 10x + 14y - 4x - 6y?\n\nSelect all that apply.",
              "explanation": "To simplify 10x + 14y - 4x - 6y:\n- x terms: 10x - 4x = 6x\n- y terms: 14y - 6y = 8y\n- Result: 6x + 8y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"] || CARD_STYLES.large;\n    return container.append(\"div\").attr(\"class\", options.className || \"standard-card\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\"); });\n    return acc;\n  }\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"24x + 8y\", isCorrect: false },\n    { id: \"B\", label: \"6x + 8y\", isCorrect: true },\n    { id: \"C\", label: \"14x + 20y\", isCorrect: false },\n    { id: \"D\", label: \"4x - 6y\", isCorrect: false },\n  ];\n\n  function createDefaultState() { return { selectedAnswers: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { selectedAnswers: chartState.selectedAnswers }); }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n    const optionsList = container.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"12px\").style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswers.includes(option.id);\n      const optionRow = optionsList.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"padding\", \"12px 16px\").style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\").style(\"border-radius\", \"8px\").style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\");\n\n      if (!interactivityLocked) {\n        optionRow.on(\"click\", function () {\n          if (isSelected) {\n            chartState.selectedAnswers = chartState.selectedAnswers.filter(id => id !== option.id);\n          } else {\n            chartState.selectedAnswers = [...chartState.selectedAnswers, option.id];\n          }\n          renderOptions(d3, container);\n          sendChartState();\n        });\n      }\n\n      // Checkbox\n      const checkbox = optionRow.append(\"div\").style(\"width\", \"20px\").style(\"height\", \"20px\").style(\"border-radius\", \"4px\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\").style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\");\n      if (isSelected) checkbox.append(\"span\").style(\"color\", \"#ffffff\").style(\"font-size\", \"14px\").html(\"&#10003;\");\n\n      optionRow.append(\"div\").style(\"font-size\", \"18px\").text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) renderOptions(currentD3, container);\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which expression is equivalent to <strong>10x + 14y - 4x - 6y</strong>?\");\n\n    // Main card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    mainCard.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Select all that apply.\");\n\n    const optionsContainer = mainCard.append(\"div\").attr(\"class\", \"options-container\");\n    renderOptions(d3, optionsContainer);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) renderOptions(d3, container);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = { selectedAnswers: Array.isArray(incoming.selectedAnswers) ? incoming.selectedAnswers : [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"6x + 8y\" (correct)\n- Other options are incorrect"
            }
          }
        },
        {
          "questions": {
            "id": 23767,
            "questionContent": {
              "questionText": "Fill in the box below to write an expression that is equivalent to 5(4x + 2y).\n\nDrag tiles to complete: 12x - ___ + 15x + 8y + ___\n\nAvailable: 2y, 5x, 7x, 10y, 20x",
              "explanation": "Using distributive property: 5(4x + 2y) = 5(4x) + 5(2y) = 20x + 10y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [{ id: \"2y\", label: \"2y\" }, { id: \"5x\", label: \"5x\" }, { id: \"7x\", label: \"7x\" }, { id: \"10y\", label: \"10y\" }, { id: \"20x\", label: \"20x\" }];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"\"); });\n  }\n\n  function createDefaultState() { return { slot1: null, slot2: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: { slot1: chartState.slot1, slot2: chartState.slot2 } }); }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression with slots\n    const expr = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"18px\").style(\"flex-wrap\", \"wrap\");\n    expr.append(\"span\").text(\"12x -\");\n\n    const slot1 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#fff\").text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot2 === draggedItem) chartState.slot2 = null; chartState.slot1 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot1) slot1.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot1 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    expr.append(\"span\").text(\"+ 15x + 8y +\");\n\n    const slot2 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#fff\").text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot1 === draggedItem) chartState.slot1 = null; chartState.slot2 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot2) slot2.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot2 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"12px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"8px 14px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").text(item.label);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.label; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the box below to write an expression that is equivalent to <strong>5(4x + 2y)</strong>.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { slot1: incoming.slots?.slot1 || null, slot2: incoming.slots?.slot2 || null };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags correct terms to create expression equivalent to 20x + 10y\n- 5(4x + 2y) = 20x + 10y"
            }
          }
        },
        {
          "questions": {
            "id": 23772,
            "questionContent": {
              "questionText": "Which of these expressions are equivalent to 5(y - 2)?\n\nDrag each expression to the correct category.\n\nExpressions: 5(2) - 5(y), 3(5y - 2), 2(10 - y), 5(y) - 5(2), 5y - 10, 2(10 - 5y)",
              "explanation": "5(y - 2) = 5y - 10 using distributive property. The equivalent forms are 5(y) - 5(2) and 5y - 10.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const ITEMS = [\n    { id: \"item1\", text: \"5(2) - 5(y)\" },\n    { id: \"item2\", text: \"3(5y - 2)\" },\n    { id: \"item3\", text: \"2(10 - y)\" },\n    { id: \"item4\", text: \"5(y) - 5(2)\" },\n    { id: \"item5\", text: \"5y - 10\" },\n    { id: \"item6\", text: \"2(10 - 5y)\" },\n  ];\n\n  const CATEGORIES = [\n    { id: \"equivalent\", label: \"Equivalent to 5(y - 2)\" },\n    { id: \"notEquivalent\", label: \"Not equivalent to 5(y - 2)\" },\n  ];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { equivalent: [], notEquivalent: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { matches: { equivalent: chartState.equivalent, notEquivalent: chartState.notEquivalent } }); }\n\n  function renderDragMatch(d3, container) {\n    container.html(\"\");\n\n    const layout = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"1fr 1fr\").style(\"gap\", \"24px\");\n\n    // Available items\n    const itemsCol = layout.append(\"div\");\n    itemsCol.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Drag expressions:\");\n    const itemsArea = itemsCol.append(\"div\").style(\"background\", \"#f3f4f6\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\");\n\n    const matchedIds = [...chartState.equivalent, ...chartState.notEquivalent];\n    ITEMS.forEach((item) => {\n      const isMatched = matchedIds.includes(item.id);\n      const div = itemsArea.append(\"div\").attr(\"draggable\", !interactivityLocked && !isMatched).style(\"padding\", \"8px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isMatched ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isMatched || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isMatched ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item.text);\n      if (!interactivityLocked && !isMatched) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.id; });\n    });\n\n    // Categories\n    const catsCol = layout.append(\"div\");\n    CATEGORIES.forEach((cat) => {\n      const catDiv = catsCol.append(\"div\").style(\"margin-bottom\", \"16px\");\n      catDiv.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(cat.label);\n      const dropZone = catDiv.append(\"div\").style(\"border\", \"2px dashed #cbd5e1\").style(\"border-radius\", \"8px\").style(\"padding\", \"12px\").style(\"min-height\", \"80px\").style(\"background\", \"#fff\");\n\n      if (!interactivityLocked) {\n        dropZone.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        dropZone.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            chartState.equivalent = chartState.equivalent.filter(id => id !== draggedItem);\n            chartState.notEquivalent = chartState.notEquivalent.filter(id => id !== draggedItem);\n            chartState[cat.id].push(draggedItem);\n            draggedItem = null;\n            renderDragMatch(d3, container);\n            sendChartState();\n          }\n        });\n      }\n\n      // Show matched items\n      chartState[cat.id].forEach((itemId) => {\n        const item = ITEMS.find(i => i.id === itemId);\n        if (item) {\n          const matchedDiv = dropZone.append(\"div\").style(\"position\", \"relative\").style(\"padding\", \"8px 12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"6px\").style(\"background\", \"#fafafa\").style(\"margin-bottom\", \"8px\").style(\"font-size\", \"14px\").text(item.text);\n          if (!interactivityLocked) {\n            matchedDiv.append(\"button\").style(\"position\", \"absolute\").style(\"top\", \"4px\").style(\"right\", \"4px\").style(\"background\", \"#ef4444\").style(\"color\", \"#fff\").style(\"border\", \"none\").style(\"border-radius\", \"4px\").style(\"padding\", \"2px 6px\").style(\"font-size\", \"10px\").style(\"cursor\", \"pointer\").text(\"x\").on(\"click\", () => {\n              chartState[cat.id] = chartState[cat.id].filter(id => id !== itemId);\n              renderDragMatch(d3, container);\n              sendChartState();\n            });\n          }\n        }\n      });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragMatch(currentD3, currentD3.select(\".drag-match-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Which of these expressions are equivalent to <strong>5(y - 2)</strong>?\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Drag each expression to the correct category.\");\n    const dragMatch = main.append(\"div\").attr(\"class\", \"drag-match-container\");\n    renderDragMatch(d3, dragMatch);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { equivalent: incoming.matches?.equivalent || [], notEquivalent: incoming.matches?.notEquivalent || [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragMatch(d3, d3.select(\".drag-match-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragMatch(d3, d3.select(\".drag-match-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Equivalent to 5(y - 2): 5(y) - 5(2), 5y - 10\nNot Equivalent: 5(2) - 5(y), 3(5y - 2), 2(10 - y), 2(10 - 5y)"
            }
          }
        },
        {
          "questions": {
            "id": 23777,
            "questionContent": {
              "questionText": "Sarah has a rectangular garden that is 5.5 meters wide. 3 meters of the length are for vegetables, and x meters are for flowers.\n\nDrag tiles to write 2 different expressions that represent the area of the garden in square meters.\n\nAvailable tiles: 2, 3, 5.5, x, 2x, 5.5x, 8.5, 11, 16.5\n\nFormat: __(__ + __) and __ + __",
              "explanation": "Garden area = width times length = 5.5(3 + x)\nDistributed form = 5.5(3) + 5.5(x) = 16.5 + 5.5x",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [\"2\", \"3\", \"5.5\", \"x\", \"2x\", \"5.5x\", \"8.5\", \"11\", \"16.5\"];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { s1: null, s2: null, s3: null, s4: null, s5: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: chartState }); }\n\n  function renderGarden(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 200).attr(\"height\", 100).style(\"display\", \"block\").style(\"margin\", \"0 auto 20px\");\n\n    // Garden sections\n    svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", 20).attr(\"width\", 40).attr(\"height\", 60).attr(\"fill\", \"#fed7aa\").attr(\"stroke\", \"#ea580c\").attr(\"stroke-width\", 2);\n    svg.append(\"rect\").attr(\"x\", 50).attr(\"y\", 20).attr(\"width\", 80).attr(\"height\", 60).attr(\"fill\", \"#bbf7d0\").attr(\"stroke\", \"#16a34a\").attr(\"stroke-width\", 2);\n\n    // Labels\n    svg.append(\"text\").attr(\"x\", 30).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"3 m\");\n    svg.append(\"text\").attr(\"x\", 90).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"x\");\n    svg.append(\"text\").attr(\"x\", 145).attr(\"y\", 55).attr(\"font-size\", \"10px\").text(\"5.5 m\");\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression 1: __(__ + __)\n    const exp1 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"16px\").style(\"font-size\", \"16px\");\n\n    const slotStyle = { width: \"50px\", height: \"32px\", border: \"2px dashed #9ca3af\", borderRadius: \"6px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fff\", fontSize: \"14px\" };\n\n    [\"s1\", \"s2\", \"s3\"].forEach((key, i) => {\n      if (i === 1) exp1.append(\"span\").text(\"(\");\n      if (i === 2) exp1.append(\"span\").text(\"+\");\n\n      const slot = exp1.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n\n      if (i === 2) exp1.append(\"span\").text(\")\");\n    });\n\n    // Expression 2: __ + __\n    const exp2 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"16px\");\n\n    [\"s4\", \"s5\"].forEach((key, i) => {\n      if (i === 1) exp2.append(\"span\").text(\"+\");\n\n      const slot = exp2.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n    });\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    const usedItems = Object.values(chartState).filter(Boolean);\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = usedItems.includes(item);\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"6px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"6px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Sarah has a rectangular garden that is 5.5 meters wide. 3 meters of the length are for vegetables, and <em>x</em> meters are for flowers.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    renderGarden(d3, main);\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to write 2 different expressions that represent the area of the garden in square meters.\");\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    chartState = payload?.slots || createDefaultState();\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- First expression: 5.5(3 + x) or equivalent\n- Second expression: 16.5 + 5.5x or equivalent\n- Both expressions should equal the same value"
            }
          }
        },
        {
          "questions": {
            "id": 23743,
            "questionContent": {
              "questionText": "Fill in the box to write an expression equivalent to 10x - 3x.\n\nThe algebra tiles show 10 positive x tiles with 3 crossed out (representing subtraction).",
              "explanation": "When we subtract like terms, we subtract their coefficients: 10x - 3x = (10 - 3)x = 7x. The algebra tiles visualize this by showing 10 positive x tiles with 3 being removed (crossed out), leaving 7 x tiles.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    video\n      .append(\"p\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Your browser does not support the video tag.\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    // Create SVG for algebra tiles\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 120)\n      .attr(\"height\", 360)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileWidth = 80;\n    const tileHeight = 30;\n    const gap = 5;\n    const startX = 20;\n    const startY = 10;\n\n    // Draw 10 x-tiles, with last 3 crossed out\n    for (let i = 0; i < 10; i++) {\n      const y = startY + i * (tileHeight + gap);\n      const isCrossedOut = i >= 7;\n\n      // Tile rectangle\n      svg.append(\"rect\")\n        .attr(\"x\", startX)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      // x label\n      svg.append(\"text\")\n        .attr(\"x\", startX + 10)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      // Cross out the last 3 tiles\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", startX)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", startX + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Fill in the box to write an expression equivalent to <strong>10x - 3x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles visualization\n    renderAlgebraTiles(d3, mainCard);\n\n    // Answer input area\n    const inputContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"input-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"font-size\", \"20px\");\n\n    answerInput = inputContainer\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .attr(\"maxlength\", \"3\")\n      .style(\"width\", \"60px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #d1d5db\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      })\n      .on(\"focus\", function () {\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"outline\", \"none\");\n      })\n      .on(\"blur\", function () {\n        d3.select(this).style(\"border-color\", \"#d1d5db\");\n      });\n\n    inputContainer\n      .append(\"span\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x\");\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the coefficient \"7\" in the input box\n- The complete equivalent expression is 7x\n- Accept variations: \"7\", \" 7 \", etc."
            }
          }
        },
        {
          "questions": {
            "id": 23748,
            "questionContent": {
              "questionText": "Which expression is equivalent to 7x + 1 - 2x + 4?\n\nThe algebra tiles show 7 positive x tiles with 2 crossed out (representing subtraction) and 5 positive unit tiles.",
              "explanation": "To simplify 7x + 1 - 2x + 4, combine like terms:\n- Variable terms: 7x - 2x = 5x\n- Constant terms: 1 + 4 = 5\n- Result: 5x + 5",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"5x + 5\", isCorrect: true },\n    { id: \"B\", label: \"3x + 1\", isCorrect: false },\n    { id: \"C\", label: \"5x + 1\", isCorrect: false },\n    { id: \"D\", label: \"5x + 5\", isCorrect: false },\n  ];\n\n  function createDefaultState() {\n    return {\n      selectedAnswer: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedAnswer: chartState.selectedAnswer,\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 200)\n      .attr(\"height\", 260)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles (7 total, 2 crossed out) - left column\n    for (let i = 0; i < 7; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 5;\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles (5 total: 1+4, shown as 2 columns)\n    // First column: 1 units\n    for (let i = 0; i < 1; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n\n    // Second column: 4 units\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 145)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 152)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n  }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n\n    const optionsList = container\n      .append(\"div\")\n      .attr(\"class\", \"options-list\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-direction\", \"column\")\n      .style(\"gap\", \"12px\")\n      .style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswer === option.id;\n\n      const optionRow = optionsList\n        .append(\"div\")\n        .attr(\"class\", \"option-row\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px 16px\")\n        .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n        .style(\"transition\", \"all 0.2s\");\n\n      if (!interactivityLocked) {\n        optionRow\n          .on(\"mouseover\", function () {\n            if (!isSelected) {\n              d3.select(this)\n                .style(\"background\", \"#f9fafb\")\n                .style(\"border-color\", \"#9ca3af\");\n            }\n          })\n          .on(\"mouseout\", function () {\n            d3.select(this)\n              .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n              .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\");\n          })\n          .on(\"click\", function () {\n            if (interactivityLocked) return;\n            chartState.selectedAnswer = option.id;\n            renderOptions(d3, container);\n            sendChartState();\n          });\n      }\n\n      // Radio button\n      const radioButton = optionRow\n        .append(\"div\")\n        .style(\"width\", \"20px\")\n        .style(\"height\", \"20px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\")\n        .style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"justify-content\", \"center\")\n        .style(\"flex-shrink\", \"0\");\n\n      radioButton\n        .append(\"div\")\n        .style(\"width\", \"8px\")\n        .style(\"height\", \"8px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"background\", isSelected ? \"#ffffff\" : \"transparent\");\n\n      // Option label\n      optionRow\n        .append(\"div\")\n        .style(\"font-size\", \"18px\")\n        .text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) {\n        renderOptions(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Which expression is equivalent to <strong>7x + 1 - 2x + 4</strong>?\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Options container\n    const optionsContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"options-container\");\n\n    renderOptions(d3, optionsContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) {\n      renderOptions(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (\n      typeof incoming.selectedAnswer === \"string\" &&\n      ANSWER_OPTIONS.some((opt) => opt.id === incoming.selectedAnswer)\n    ) {\n      nextState.selectedAnswer = incoming.selectedAnswer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects option A: 5x + 5\n- This is the only correct answer"
            }
          }
        },
        {
          "questions": {
            "id": 23753,
            "questionContent": {
              "questionText": "What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\n\nThe tiles show: 10 positive x tiles (with 5 crossed out representing subtraction) and 4 positive unit tiles (with 2 crossed out).\n\nAvailable terms: 0x, 5x, 2, 4",
              "explanation": "The algebra tiles show 10 x-tiles with 5 crossed out (10x - 5x = 5x) and 4 unit tiles with 2 crossed out (4 - 2 = 2). Result: 5x + 2.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // Draggable terms\n  const DRAG_ITEMS = [\n    { id: \"0x\", label: \"0x\" },\n    { id: \"5x\", label: \"5x\" },\n    { id: \"2\", label: \"2\" },\n    { id: \"4\", label: \"4\" },\n  ];\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      slot1: null,\n      slot2: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      slots: {\n        slot1: chartState.slot1,\n        slot2: chartState.slot2,\n      },\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 180)\n      .attr(\"height\", 220)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles - 10 total with 5 crossed out (showing subtraction)\n    // Blue color for x tiles\n    for (let i = 0; i < 10; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = (i >= 5); // Last 5 tiles crossed out\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#f472b6\")\n        .attr(\"stroke\", \"#db2777\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#831843\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles - 4 total with 2 crossed out (4-2=2)\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (unitSize + gap);\n      const isCrossedOut = (i >= 2);\n\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 110)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110 + unitSize)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 110 + unitSize)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Drop slots container\n    const slotsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"slots-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"font-size\", \"20px\");\n\n    // First slot\n    const slot1 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-1\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot2 === draggedItem) chartState.slot2 = null;\n          chartState.slot1 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot1) {\n        slot1\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot1 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    slotsContainer.append(\"span\").text(\"+\");\n\n    // Second slot\n    const slot2 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-2\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot1 === draggedItem) chartState.slot1 = null;\n          chartState.slot2 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot2) {\n        slot2\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot2 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    // Draggable items\n    const itemsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"items-container\")\n      .style(\"display\", \"flex\")\n      .style(\"gap\", \"12px\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"justify-content\", \"center\");\n\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n\n      const itemDiv = itemsContainer\n        .append(\"div\")\n        .attr(\"class\", \"drag-item\")\n        .attr(\"draggable\", !interactivityLocked && !isUsed)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"border\", \"2px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"background\", isUsed ? \"#e5e7eb\" : \"#ffffff\")\n        .style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\")\n        .style(\"opacity\", isUsed ? \"0.5\" : \"1\")\n        .style(\"font-size\", \"16px\")\n        .style(\"user-select\", \"none\")\n        .text(item.label);\n\n      if (!interactivityLocked && !isUsed) {\n        itemDiv.node().addEventListener(\"dragstart\", () => {\n          draggedItem = item.label;\n        });\n\n        itemDiv\n          .on(\"mouseenter\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1.05)\")\n              .style(\"box-shadow\", \"0 4px 12px rgba(0,0,0,0.1)\");\n          })\n          .on(\"mouseleave\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1)\")\n              .style(\"box-shadow\", \"none\");\n          });\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".drag-drop-container\");\n      if (!container.empty()) {\n        renderDragDrop(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Drag and drop area\n    const dragDropContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"drag-drop-container\");\n\n    renderDragDrop(d3, dragDropContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".drag-drop-container\");\n    if (!container.empty()) {\n      renderDragDrop(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.slots && typeof incoming.slots === \"object\") {\n      nextState.slot1 = incoming.slots.slot1 || null;\n      nextState.slot2 = incoming.slots.slot2 || null;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags \"5x\" and \"2\" into the slots\n- The simplified expression shown should be 5x + 2 (or 2 + 5x)"
            }
          }
        },
        {
          "questions": {
            "id": 23758,
            "questionContent": {
              "questionText": "Fill in the boxes to write an expression equivalent to 5x + 7y - 3y + 2x.\n\nThe algebra tiles show the terms being combined.",
              "explanation": "To simplify 5x + 7y - 3y + 2x, combine like terms:\n- x terms: 5x + 2x = 7x\n- y terms: 7y - 3y = 4y\n- Result: 7x + 4y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\");\n\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\");\n\n    const video = content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\");\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  function createDefaultState() {\n    return { answer1: \"\", answer2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let input1 = null;\n  let input2 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answers: { answer1: chartState.answer1, answer2: chartState.answer2 },\n    });\n  }\n\n  function renderControls() {\n    if (input1 && input1.node().value !== chartState.answer1) input1.node().value = chartState.answer1;\n    if (input2 && input2.node().value !== chartState.answer2) input2.node().value = chartState.answer2;\n    if (input1) input1.property(\"disabled\", interactivityLocked);\n    if (input2) input2.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 280).attr(\"height\", 260).style(\"display\", \"block\").style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 60;\n    const gap = 5;\n\n    // Left column: 5x tiles\n    for (let i = 0; i < 5; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 20).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n\n    // Middle column: 7y tiles with 3 crossed out\n    for (let i = 0; i < 7; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 4;\n      svg.append(\"rect\").attr(\"x\", 90).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#f472b6\").attr(\"stroke\", \"#db2777\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 100).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#831843\").text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\").attr(\"x1\", 90).attr(\"y1\", y).attr(\"x2\", 90 + tileWidth).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n        svg.append(\"line\").attr(\"x1\", 90 + tileWidth).attr(\"y1\", y).attr(\"x2\", 90).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Right column: 2x tiles\n    for (let i = 0; i < 2; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 170).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 180).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the boxes to write an expression equivalent to <strong>5x + 7y - 3y + 2x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n\n    renderAlgebraTiles(d3, mainCard);\n\n    // Input container\n    const inputContainer = mainCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"font-size\", \"20px\").style(\"justify-content\", \"center\");\n\n    input1 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer1 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"x + \");\n\n    input2 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer2 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"y\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.answers) {\n      nextState.answer1 = incoming.answers.answer1 || \"\";\n      nextState.answer2 = incoming.answers.answer2 || \"\";\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters \"7\" in the first box (coefficient of x)\n- Student enters \"4\" in the second box (coefficient of y)\n- Complete expression: 7x + 4y"
            }
          }
        },
        {
          "questions": {
            "id": 23763,
            "questionContent": {
              "questionText": "Which expression is equivalent to 11x + 16y - 5x - 8y?\n\nSelect all that apply.",
              "explanation": "To simplify 11x + 16y - 5x - 8y:\n- x terms: 11x - 5x = 6x\n- y terms: 16y - 8y = 8y\n- Result: 6x + 8y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"] || CARD_STYLES.large;\n    return container.append(\"div\").attr(\"class\", options.className || \"standard-card\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\"); });\n    return acc;\n  }\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"27x + 8y\", isCorrect: false },\n    { id: \"B\", label: \"6x + 8y\", isCorrect: true },\n    { id: \"C\", label: \"16x + 24y\", isCorrect: false },\n    { id: \"D\", label: \"5x - 8y\", isCorrect: false },\n  ];\n\n  function createDefaultState() { return { selectedAnswers: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { selectedAnswers: chartState.selectedAnswers }); }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n    const optionsList = container.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"12px\").style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswers.includes(option.id);\n      const optionRow = optionsList.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"padding\", \"12px 16px\").style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\").style(\"border-radius\", \"8px\").style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\");\n\n      if (!interactivityLocked) {\n        optionRow.on(\"click\", function () {\n          if (isSelected) {\n            chartState.selectedAnswers = chartState.selectedAnswers.filter(id => id !== option.id);\n          } else {\n            chartState.selectedAnswers = [...chartState.selectedAnswers, option.id];\n          }\n          renderOptions(d3, container);\n          sendChartState();\n        });\n      }\n\n      // Checkbox\n      const checkbox = optionRow.append(\"div\").style(\"width\", \"20px\").style(\"height\", \"20px\").style(\"border-radius\", \"4px\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\").style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\");\n      if (isSelected) checkbox.append(\"span\").style(\"color\", \"#ffffff\").style(\"font-size\", \"14px\").html(\"&#10003;\");\n\n      optionRow.append(\"div\").style(\"font-size\", \"18px\").text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) renderOptions(currentD3, container);\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which expression is equivalent to <strong>11x + 16y - 5x - 8y</strong>?\");\n\n    // Main card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    mainCard.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Select all that apply.\");\n\n    const optionsContainer = mainCard.append(\"div\").attr(\"class\", \"options-container\");\n    renderOptions(d3, optionsContainer);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) renderOptions(d3, container);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = { selectedAnswers: Array.isArray(incoming.selectedAnswers) ? incoming.selectedAnswers : [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"6x + 8y\" (correct)\n- Other options are incorrect"
            }
          }
        },
        {
          "questions": {
            "id": 23768,
            "questionContent": {
              "questionText": "Fill in the box below to write an expression that is equivalent to 8(x + 3y).\n\nDrag tiles to complete: 5x - ___ + 6x + 18y + ___\n\nAvailable: 3x, 6y, 8x, 12y, 24y",
              "explanation": "Using distributive property: 8(x + 3y) = 8(x) + 8(3y) = 8x + 24y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [{ id: \"3x\", label: \"3x\" }, { id: \"6y\", label: \"6y\" }, { id: \"8x\", label: \"8x\" }, { id: \"12y\", label: \"12y\" }, { id: \"24y\", label: \"24y\" }];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"\"); });\n  }\n\n  function createDefaultState() { return { slot1: null, slot2: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: { slot1: chartState.slot1, slot2: chartState.slot2 } }); }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression with slots\n    const expr = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"18px\").style(\"flex-wrap\", \"wrap\");\n    expr.append(\"span\").text(\"5x -\");\n\n    const slot1 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#fff\").text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot2 === draggedItem) chartState.slot2 = null; chartState.slot1 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot1) slot1.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot1 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    expr.append(\"span\").text(\"+ 6x + 18y +\");\n\n    const slot2 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#fff\").text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot1 === draggedItem) chartState.slot1 = null; chartState.slot2 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot2) slot2.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot2 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"12px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"8px 14px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").text(item.label);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.label; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the box below to write an expression that is equivalent to <strong>8(x + 3y)</strong>.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { slot1: incoming.slots?.slot1 || null, slot2: incoming.slots?.slot2 || null };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags correct terms to create expression equivalent to 8x + 24y\n- 8(x + 3y) = 8x + 24y"
            }
          }
        },
        {
          "questions": {
            "id": 23773,
            "questionContent": {
              "questionText": "Which of these expressions are equivalent to 7(x - 5)?\n\nDrag each expression to the correct category.\n\nExpressions: 7(5) - 7(x), 3(7x - 5), 7(35 - 5x), 7(x) - 7(5), 7x - 35, 2(21 - 7x)",
              "explanation": "7(x - 5) = 7x - 35 using distributive property. Equivalent forms are 7(x) - 7(5) and 7x - 35.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const ITEMS = [\n    { id: \"item1\", text: \"7(5) - 7(x)\" },\n    { id: \"item2\", text: \"3(7x - 5)\" },\n    { id: \"item3\", text: \"7(35 - 5x)\" },\n    { id: \"item4\", text: \"7(x) - 7(5)\" },\n    { id: \"item5\", text: \"7x - 35\" },\n    { id: \"item6\", text: \"2(21 - 7x)\" },\n  ];\n\n  const CATEGORIES = [\n    { id: \"equivalent\", label: \"Equivalent to 7(x - 5)\" },\n    { id: \"notEquivalent\", label: \"Not equivalent to 7(x - 5)\" },\n  ];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { equivalent: [], notEquivalent: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { matches: { equivalent: chartState.equivalent, notEquivalent: chartState.notEquivalent } }); }\n\n  function renderDragMatch(d3, container) {\n    container.html(\"\");\n\n    const layout = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"1fr 1fr\").style(\"gap\", \"24px\");\n\n    // Available items\n    const itemsCol = layout.append(\"div\");\n    itemsCol.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Drag expressions:\");\n    const itemsArea = itemsCol.append(\"div\").style(\"background\", \"#f3f4f6\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\");\n\n    const matchedIds = [...chartState.equivalent, ...chartState.notEquivalent];\n    ITEMS.forEach((item) => {\n      const isMatched = matchedIds.includes(item.id);\n      const div = itemsArea.append(\"div\").attr(\"draggable\", !interactivityLocked && !isMatched).style(\"padding\", \"8px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isMatched ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isMatched || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isMatched ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item.text);\n      if (!interactivityLocked && !isMatched) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.id; });\n    });\n\n    // Categories\n    const catsCol = layout.append(\"div\");\n    CATEGORIES.forEach((cat) => {\n      const catDiv = catsCol.append(\"div\").style(\"margin-bottom\", \"16px\");\n      catDiv.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(cat.label);\n      const dropZone = catDiv.append(\"div\").style(\"border\", \"2px dashed #cbd5e1\").style(\"border-radius\", \"8px\").style(\"padding\", \"12px\").style(\"min-height\", \"80px\").style(\"background\", \"#fff\");\n\n      if (!interactivityLocked) {\n        dropZone.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        dropZone.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            chartState.equivalent = chartState.equivalent.filter(id => id !== draggedItem);\n            chartState.notEquivalent = chartState.notEquivalent.filter(id => id !== draggedItem);\n            chartState[cat.id].push(draggedItem);\n            draggedItem = null;\n            renderDragMatch(d3, container);\n            sendChartState();\n          }\n        });\n      }\n\n      // Show matched items\n      chartState[cat.id].forEach((itemId) => {\n        const item = ITEMS.find(i => i.id === itemId);\n        if (item) {\n          const matchedDiv = dropZone.append(\"div\").style(\"position\", \"relative\").style(\"padding\", \"8px 12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"6px\").style(\"background\", \"#fafafa\").style(\"margin-bottom\", \"8px\").style(\"font-size\", \"14px\").text(item.text);\n          if (!interactivityLocked) {\n            matchedDiv.append(\"button\").style(\"position\", \"absolute\").style(\"top\", \"4px\").style(\"right\", \"4px\").style(\"background\", \"#ef4444\").style(\"color\", \"#fff\").style(\"border\", \"none\").style(\"border-radius\", \"4px\").style(\"padding\", \"2px 6px\").style(\"font-size\", \"10px\").style(\"cursor\", \"pointer\").text(\"x\").on(\"click\", () => {\n              chartState[cat.id] = chartState[cat.id].filter(id => id !== itemId);\n              renderDragMatch(d3, container);\n              sendChartState();\n            });\n          }\n        }\n      });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragMatch(currentD3, currentD3.select(\".drag-match-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Which of these expressions are equivalent to <strong>7(x - 5)</strong>?\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Drag each expression to the correct category.\");\n    const dragMatch = main.append(\"div\").attr(\"class\", \"drag-match-container\");\n    renderDragMatch(d3, dragMatch);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { equivalent: incoming.matches?.equivalent || [], notEquivalent: incoming.matches?.notEquivalent || [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragMatch(d3, d3.select(\".drag-match-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragMatch(d3, d3.select(\".drag-match-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Equivalent to 7(x - 5): 7(x) - 7(5), 7x - 35\nNot Equivalent: 7(5) - 7(x), 3(7x - 5), 7(35 - 5x), 2(21 - 7x)"
            }
          }
        },
        {
          "questions": {
            "id": 23778,
            "questionContent": {
              "questionText": "Carlos has a rectangular field that is 6.5 meters wide. 5 meters of the length are for corn, and x meters are for wheat.\n\nDrag tiles to write 2 different expressions that represent the area of the field in square meters.\n\nAvailable tiles: 4, 5, 6.5, x, 5x, 6.5x, 11.5, 26, 32.5\n\nFormat: __(__ + __) and __ + __",
              "explanation": "Field area = width times length = 6.5(5 + x)\nDistributed form = 6.5(5) + 6.5(x) = 32.5 + 6.5x",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [\"4\", \"5\", \"6.5\", \"x\", \"5x\", \"6.5x\", \"11.5\", \"26\", \"32.5\"];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { s1: null, s2: null, s3: null, s4: null, s5: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: chartState }); }\n\n  function renderGarden(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 200).attr(\"height\", 100).style(\"display\", \"block\").style(\"margin\", \"0 auto 20px\");\n\n    // Garden sections\n    svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", 20).attr(\"width\", 40).attr(\"height\", 60).attr(\"fill\", \"#fed7aa\").attr(\"stroke\", \"#ea580c\").attr(\"stroke-width\", 2);\n    svg.append(\"rect\").attr(\"x\", 50).attr(\"y\", 20).attr(\"width\", 80).attr(\"height\", 60).attr(\"fill\", \"#bbf7d0\").attr(\"stroke\", \"#16a34a\").attr(\"stroke-width\", 2);\n\n    // Labels\n    svg.append(\"text\").attr(\"x\", 30).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"5 m\");\n    svg.append(\"text\").attr(\"x\", 90).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"x\");\n    svg.append(\"text\").attr(\"x\", 145).attr(\"y\", 55).attr(\"font-size\", \"10px\").text(\"6.5 m\");\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression 1: __(__ + __)\n    const exp1 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"16px\").style(\"font-size\", \"16px\");\n\n    const slotStyle = { width: \"50px\", height: \"32px\", border: \"2px dashed #9ca3af\", borderRadius: \"6px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fff\", fontSize: \"14px\" };\n\n    [\"s1\", \"s2\", \"s3\"].forEach((key, i) => {\n      if (i === 1) exp1.append(\"span\").text(\"(\");\n      if (i === 2) exp1.append(\"span\").text(\"+\");\n\n      const slot = exp1.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n\n      if (i === 2) exp1.append(\"span\").text(\")\");\n    });\n\n    // Expression 2: __ + __\n    const exp2 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"16px\");\n\n    [\"s4\", \"s5\"].forEach((key, i) => {\n      if (i === 1) exp2.append(\"span\").text(\"+\");\n\n      const slot = exp2.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n    });\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    const usedItems = Object.values(chartState).filter(Boolean);\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = usedItems.includes(item);\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"6px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"6px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Carlos has a rectangular field that is 6.5 meters wide. 5 meters of the length are for corn, and <em>x</em> meters are for wheat.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    renderGarden(d3, main);\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to write 2 different expressions that represent the area of the garden in square meters.\");\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    chartState = payload?.slots || createDefaultState();\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- First expression: 6.5(5 + x) or equivalent\n- Second expression: 32.5 + 6.5x or equivalent\n- Both expressions should equal the same value"
            }
          }
        },
        {
          "questions": {
            "id": 23744,
            "questionContent": {
              "questionText": "Fill in the box to write an expression equivalent to 11x - 5x.\n\nThe algebra tiles show 11 positive x tiles with 5 crossed out (representing subtraction).",
              "explanation": "When we subtract like terms, we subtract their coefficients: 11x - 5x = (11 - 5)x = 6x. The algebra tiles visualize this by showing 11 positive x tiles with 5 being removed (crossed out), leaving 6 x tiles.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    video\n      .append(\"p\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Your browser does not support the video tag.\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    // Create SVG for algebra tiles\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 120)\n      .attr(\"height\", 395)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileWidth = 80;\n    const tileHeight = 30;\n    const gap = 5;\n    const startX = 20;\n    const startY = 10;\n\n    // Draw 11 x-tiles, with last 5 crossed out\n    for (let i = 0; i < 11; i++) {\n      const y = startY + i * (tileHeight + gap);\n      const isCrossedOut = i >= 6;\n\n      // Tile rectangle\n      svg.append(\"rect\")\n        .attr(\"x\", startX)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      // x label\n      svg.append(\"text\")\n        .attr(\"x\", startX + 10)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      // Cross out the last 5 tiles\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", startX)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", startX + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Fill in the box to write an expression equivalent to <strong>11x - 5x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles visualization\n    renderAlgebraTiles(d3, mainCard);\n\n    // Answer input area\n    const inputContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"input-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"font-size\", \"20px\");\n\n    answerInput = inputContainer\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .attr(\"maxlength\", \"3\")\n      .style(\"width\", \"60px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #d1d5db\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      })\n      .on(\"focus\", function () {\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"outline\", \"none\");\n      })\n      .on(\"blur\", function () {\n        d3.select(this).style(\"border-color\", \"#d1d5db\");\n      });\n\n    inputContainer\n      .append(\"span\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x\");\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the coefficient \"6\" in the input box\n- The complete equivalent expression is 6x\n- Accept variations: \"6\", \" 6 \", etc."
            }
          }
        },
        {
          "questions": {
            "id": 23749,
            "questionContent": {
              "questionText": "Which expression is equivalent to 8x + 5 - 4x + 2?\n\nThe algebra tiles show 8 positive x tiles with 4 crossed out (representing subtraction) and 7 positive unit tiles.",
              "explanation": "To simplify 8x + 5 - 4x + 2, combine like terms:\n- Variable terms: 8x - 4x = 4x\n- Constant terms: 5 + 2 = 7\n- Result: 4x + 7",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"4x + 7\", isCorrect: true },\n    { id: \"B\", label: \"3x + 1\", isCorrect: false },\n    { id: \"C\", label: \"5x + 1\", isCorrect: false },\n    { id: \"D\", label: \"5x + 5\", isCorrect: false },\n  ];\n\n  function createDefaultState() {\n    return {\n      selectedAnswer: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedAnswer: chartState.selectedAnswer,\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 200)\n      .attr(\"height\", 295)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles (8 total, 4 crossed out) - left column\n    for (let i = 0; i < 8; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 4;\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles (7 total: 5+2, shown as 2 columns)\n    // First column: 5 units\n    for (let i = 0; i < 5; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n\n    // Second column: 2 units\n    for (let i = 0; i < 2; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 145)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 152)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n  }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n\n    const optionsList = container\n      .append(\"div\")\n      .attr(\"class\", \"options-list\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-direction\", \"column\")\n      .style(\"gap\", \"12px\")\n      .style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswer === option.id;\n\n      const optionRow = optionsList\n        .append(\"div\")\n        .attr(\"class\", \"option-row\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px 16px\")\n        .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n        .style(\"transition\", \"all 0.2s\");\n\n      if (!interactivityLocked) {\n        optionRow\n          .on(\"mouseover\", function () {\n            if (!isSelected) {\n              d3.select(this)\n                .style(\"background\", \"#f9fafb\")\n                .style(\"border-color\", \"#9ca3af\");\n            }\n          })\n          .on(\"mouseout\", function () {\n            d3.select(this)\n              .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n              .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\");\n          })\n          .on(\"click\", function () {\n            if (interactivityLocked) return;\n            chartState.selectedAnswer = option.id;\n            renderOptions(d3, container);\n            sendChartState();\n          });\n      }\n\n      // Radio button\n      const radioButton = optionRow\n        .append(\"div\")\n        .style(\"width\", \"20px\")\n        .style(\"height\", \"20px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\")\n        .style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"justify-content\", \"center\")\n        .style(\"flex-shrink\", \"0\");\n\n      radioButton\n        .append(\"div\")\n        .style(\"width\", \"8px\")\n        .style(\"height\", \"8px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"background\", isSelected ? \"#ffffff\" : \"transparent\");\n\n      // Option label\n      optionRow\n        .append(\"div\")\n        .style(\"font-size\", \"18px\")\n        .text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) {\n        renderOptions(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Which expression is equivalent to <strong>8x + 5 - 4x + 2</strong>?\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Options container\n    const optionsContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"options-container\");\n\n    renderOptions(d3, optionsContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) {\n      renderOptions(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (\n      typeof incoming.selectedAnswer === \"string\" &&\n      ANSWER_OPTIONS.some((opt) => opt.id === incoming.selectedAnswer)\n    ) {\n      nextState.selectedAnswer = incoming.selectedAnswer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects option A: 4x + 7\n- This is the only correct answer"
            }
          }
        },
        {
          "questions": {
            "id": 23754,
            "questionContent": {
              "questionText": "What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\n\nThe tiles show: 12 positive y tiles (with 6 crossed out representing subtraction) and 5 positive unit tiles (with 4 crossed out).\n\nAvailable terms: 0y, 6y, 1, 5",
              "explanation": "The algebra tiles show 12 y-tiles with 6 crossed out (12y - 6y = 6y) and 5 unit tiles with 4 crossed out (5 - 4 = 1). Result: 6y + 1.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // Draggable terms\n  const DRAG_ITEMS = [\n    { id: \"0y\", label: \"0y\" },\n    { id: \"6y\", label: \"6y\" },\n    { id: \"1\", label: \"1\" },\n    { id: \"5\", label: \"5\" },\n  ];\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      slot1: null,\n      slot2: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      slots: {\n        slot1: chartState.slot1,\n        slot2: chartState.slot2,\n      },\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 180)\n      .attr(\"height\", 220)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // Y tiles - 12 total with 6 crossed out (showing subtraction)\n    // Pink/magenta color for y tiles\n    for (let i = 0; i < 12; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = (i >= 6); // Last 6 tiles crossed out\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#f472b6\")\n        .attr(\"stroke\", \"#db2777\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#831843\")\n        .text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles - 5 total with 4 crossed out (5-4=1)\n    for (let i = 0; i < 5; i++) {\n      const y = 10 + i * (unitSize + gap);\n      const isCrossedOut = (i >= 1);\n\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n      .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 110)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110 + unitSize)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 110 + unitSize)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Drop slots container\n    const slotsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"slots-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"font-size\", \"20px\");\n\n    // First slot\n    const slot1 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-1\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot2 === draggedItem) chartState.slot2 = null;\n          chartState.slot1 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot1) {\n        slot1\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot1 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    slotsContainer.append(\"span\").text(\"+\");\n\n    // Second slot\n    const slot2 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-2\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot1 === draggedItem) chartState.slot1 = null;\n          chartState.slot2 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot2) {\n        slot2\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot2 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    // Draggable items\n    const itemsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"items-container\")\n      .style(\"display\", \"flex\")\n      .style(\"gap\", \"12px\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"justify-content\", \"center\");\n\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n\n      const itemDiv = itemsContainer\n        .append(\"div\")\n        .attr(\"class\", \"drag-item\")\n        .attr(\"draggable\", !interactivityLocked && !isUsed)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"border\", \"2px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"background\", isUsed ? \"#e5e7eb\" : \"#ffffff\")\n        .style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\")\n        .style(\"opacity\", isUsed ? \"0.5\" : \"1\")\n        .style(\"font-size\", \"16px\")\n        .style(\"user-select\", \"none\")\n        .text(item.label);\n\n      if (!interactivityLocked && !isUsed) {\n        itemDiv.node().addEventListener(\"dragstart\", () => {\n          draggedItem = item.label;\n        });\n\n        itemDiv\n          .on(\"mouseenter\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1.05)\")\n              .style(\"box-shadow\", \"0 4px 12px rgba(0,0,0,0.1)\");\n          })\n          .on(\"mouseleave\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1)\")\n              .style(\"box-shadow\", \"none\");\n          });\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".drag-drop-container\");\n      if (!container.empty()) {\n        renderDragDrop(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Drag and drop area\n    const dragDropContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"drag-drop-container\");\n\n    renderDragDrop(d3, dragDropContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".drag-drop-container\");\n    if (!container.empty()) {\n      renderDragDrop(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.slots && typeof incoming.slots === \"object\") {\n      nextState.slot1 = incoming.slots.slot1 || null;\n      nextState.slot2 = incoming.slots.slot2 || null;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags \"6y\" and \"1\" into the slots\n- The simplified expression shown should be 6y + 1 (or 1 + 6y)"
            }
          }
        },
        {
          "questions": {
            "id": 23759,
            "questionContent": {
              "questionText": "Fill in the boxes to write an expression equivalent to 6x + 8y - 5y + 3x.\n\nThe algebra tiles show the terms being combined.",
              "explanation": "To simplify 6x + 8y - 5y + 3x, combine like terms:\n- x terms: 6x + 3x = 9x\n- y terms: 8y - 5y = 3y\n- Result: 9x + 3y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\");\n\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\");\n\n    const video = content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\");\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  function createDefaultState() {\n    return { answer1: \"\", answer2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let input1 = null;\n  let input2 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answers: { answer1: chartState.answer1, answer2: chartState.answer2 },\n    });\n  }\n\n  function renderControls() {\n    if (input1 && input1.node().value !== chartState.answer1) input1.node().value = chartState.answer1;\n    if (input2 && input2.node().value !== chartState.answer2) input2.node().value = chartState.answer2;\n    if (input1) input1.property(\"disabled\", interactivityLocked);\n    if (input2) input2.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 280).attr(\"height\", 295).style(\"display\", \"block\").style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 60;\n    const gap = 5;\n\n    // Left column: 6x tiles\n    for (let i = 0; i < 6; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 20).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n\n    // Middle column: 8y tiles with 5 crossed out\n    for (let i = 0; i < 8; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 3;\n      svg.append(\"rect\").attr(\"x\", 90).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#f472b6\").attr(\"stroke\", \"#db2777\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 100).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#831843\").text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\").attr(\"x1\", 90).attr(\"y1\", y).attr(\"x2\", 90 + tileWidth).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n        svg.append(\"line\").attr(\"x1\", 90 + tileWidth).attr(\"y1\", y).attr(\"x2\", 90).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Right column: 3x tiles\n    for (let i = 0; i < 3; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 170).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 180).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the boxes to write an expression equivalent to <strong>6x + 8y - 5y + 3x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n\n    renderAlgebraTiles(d3, mainCard);\n\n    // Input container\n    const inputContainer = mainCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"font-size\", \"20px\").style(\"justify-content\", \"center\");\n\n    input1 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer1 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"x + \");\n\n    input2 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer2 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"y\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.answers) {\n      nextState.answer1 = incoming.answers.answer1 || \"\";\n      nextState.answer2 = incoming.answers.answer2 || \"\";\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters \"9\" in the first box (coefficient of x)\n- Student enters \"3\" in the second box (coefficient of y)\n- Complete expression: 9x + 3y"
            }
          }
        },
        {
          "questions": {
            "id": 23764,
            "questionContent": {
              "questionText": "Which expression is equivalent to 12x + 18y - 5x - 9y?\n\nSelect all that apply.",
              "explanation": "To simplify 12x + 18y - 5x - 9y:\n- x terms: 12x - 5x = 7x\n- y terms: 18y - 9y = 9y\n- Result: 7x + 9y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"] || CARD_STYLES.large;\n    return container.append(\"div\").attr(\"class\", options.className || \"standard-card\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\"); });\n    return acc;\n  }\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"30x + 9y\", isCorrect: false },\n    { id: \"B\", label: \"7x + 9y\", isCorrect: true },\n    { id: \"C\", label: \"17x + 27y\", isCorrect: false },\n    { id: \"D\", label: \"5x - 9y\", isCorrect: false },\n  ];\n\n  function createDefaultState() { return { selectedAnswers: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { selectedAnswers: chartState.selectedAnswers }); }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n    const optionsList = container.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"12px\").style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswers.includes(option.id);\n      const optionRow = optionsList.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"padding\", \"12px 16px\").style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\").style(\"border-radius\", \"8px\").style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\");\n\n      if (!interactivityLocked) {\n        optionRow.on(\"click\", function () {\n          if (isSelected) {\n            chartState.selectedAnswers = chartState.selectedAnswers.filter(id => id !== option.id);\n          } else {\n            chartState.selectedAnswers = [...chartState.selectedAnswers, option.id];\n          }\n          renderOptions(d3, container);\n          sendChartState();\n        });\n      }\n\n      // Checkbox\n      const checkbox = optionRow.append(\"div\").style(\"width\", \"20px\").style(\"height\", \"20px\").style(\"border-radius\", \"4px\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\").style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\");\n      if (isSelected) checkbox.append(\"span\").style(\"color\", \"#ffffff\").style(\"font-size\", \"14px\").html(\"&#10003;\");\n\n      optionRow.append(\"div\").style(\"font-size\", \"18px\").text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) renderOptions(currentD3, container);\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which expression is equivalent to <strong>12x + 18y - 5x - 9y</strong>?\");\n\n    // Main card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    mainCard.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Select all that apply.\");\n\n    const optionsContainer = mainCard.append(\"div\").attr(\"class\", \"options-container\");\n    renderOptions(d3, optionsContainer);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) renderOptions(d3, container);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = { selectedAnswers: Array.isArray(incoming.selectedAnswers) ? incoming.selectedAnswers : [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"7x + 9y\" (correct)\n- Other options are incorrect"
            }
          }
        },
        {
          "questions": {
            "id": 23769,
            "questionContent": {
              "questionText": "Fill in the box below to write an expression that is equivalent to 4(5x + 2y).\n\nDrag tiles to complete: 15x - ___ + 10x + 6y + ___\n\nAvailable: 2y, 5x, 8y, 10x, 20x",
              "explanation": "Using distributive property: 4(5x + 2y) = 4(5x) + 4(2y) = 20x + 8y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [{ id: \"2y\", label: \"2y\" }, { id: \"5x\", label: \"5x\" }, { id: \"8y\", label: \"8y\" }, { id: \"10x\", label: \"10x\" }, { id: \"20x\", label: \"20x\" }];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"\"); });\n  }\n\n  function createDefaultState() { return { slot1: null, slot2: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: { slot1: chartState.slot1, slot2: chartState.slot2 } }); }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression with slots\n    const expr = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"18px\").style(\"flex-wrap\", \"wrap\");\n    expr.append(\"span\").text(\"15x -\");\n\n    const slot1 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#fff\").text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot2 === draggedItem) chartState.slot2 = null; chartState.slot1 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot1) slot1.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot1 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    expr.append(\"span\").text(\"+ 10x + 6y +\");\n\n    const slot2 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#fff\").text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot1 === draggedItem) chartState.slot1 = null; chartState.slot2 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot2) slot2.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot2 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"12px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"8px 14px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").text(item.label);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.label; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the box below to write an expression that is equivalent to <strong>4(5x + 2y)</strong>.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { slot1: incoming.slots?.slot1 || null, slot2: incoming.slots?.slot2 || null };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags correct terms to create expression equivalent to 20x + 8y\n- 4(5x + 2y) = 20x + 8y"
            }
          }
        },
        {
          "questions": {
            "id": 23774,
            "questionContent": {
              "questionText": "Which of these expressions are equivalent to 9(t - 2)?\n\nDrag each expression to the correct category.\n\nExpressions: 9(2) - 9(t), 3(3t - 2), 3(18 - 3t), 9(t) - 9(2), 9t - 18, 3(3t - 6)",
              "explanation": "9(t - 2) = 9t - 18 using distributive property. Equivalent forms include 3(3t - 6) and 9(t) - 9(2).",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const ITEMS = [\n    { id: \"item1\", text: \"9(2) - 9(t)\" },\n    { id: \"item2\", text: \"3(3t - 2)\" },\n    { id: \"item3\", text: \"3(18 - 3t)\" },\n    { id: \"item4\", text: \"9(t) - 9(2)\" },\n    { id: \"item5\", text: \"9t - 18\" },\n    { id: \"item6\", text: \"3(3t - 6)\" },\n  ];\n\n  const CATEGORIES = [\n    { id: \"equivalent\", label: \"Equivalent to 9(t - 2)\" },\n    { id: \"notEquivalent\", label: \"Not equivalent to 9(t - 2)\" },\n  ];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { equivalent: [], notEquivalent: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { matches: { equivalent: chartState.equivalent, notEquivalent: chartState.notEquivalent } }); }\n\n  function renderDragMatch(d3, container) {\n    container.html(\"\");\n\n    const layout = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"1fr 1fr\").style(\"gap\", \"24px\");\n\n    // Available items\n    const itemsCol = layout.append(\"div\");\n    itemsCol.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Drag expressions:\");\n    const itemsArea = itemsCol.append(\"div\").style(\"background\", \"#f3f4f6\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\");\n\n    const matchedIds = [...chartState.equivalent, ...chartState.notEquivalent];\n    ITEMS.forEach((item) => {\n      const isMatched = matchedIds.includes(item.id);\n      const div = itemsArea.append(\"div\").attr(\"draggable\", !interactivityLocked && !isMatched).style(\"padding\", \"8px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isMatched ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isMatched || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isMatched ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item.text);\n      if (!interactivityLocked && !isMatched) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.id; });\n    });\n\n    // Categories\n    const catsCol = layout.append(\"div\");\n    CATEGORIES.forEach((cat) => {\n      const catDiv = catsCol.append(\"div\").style(\"margin-bottom\", \"16px\");\n      catDiv.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(cat.label);\n      const dropZone = catDiv.append(\"div\").style(\"border\", \"2px dashed #cbd5e1\").style(\"border-radius\", \"8px\").style(\"padding\", \"12px\").style(\"min-height\", \"80px\").style(\"background\", \"#fff\");\n\n      if (!interactivityLocked) {\n        dropZone.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        dropZone.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            chartState.equivalent = chartState.equivalent.filter(id => id !== draggedItem);\n            chartState.notEquivalent = chartState.notEquivalent.filter(id => id !== draggedItem);\n            chartState[cat.id].push(draggedItem);\n            draggedItem = null;\n            renderDragMatch(d3, container);\n            sendChartState();\n          }\n        });\n      }\n\n      // Show matched items\n      chartState[cat.id].forEach((itemId) => {\n        const item = ITEMS.find(i => i.id === itemId);\n        if (item) {\n          const matchedDiv = dropZone.append(\"div\").style(\"position\", \"relative\").style(\"padding\", \"8px 12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"6px\").style(\"background\", \"#fafafa\").style(\"margin-bottom\", \"8px\").style(\"font-size\", \"14px\").text(item.text);\n          if (!interactivityLocked) {\n            matchedDiv.append(\"button\").style(\"position\", \"absolute\").style(\"top\", \"4px\").style(\"right\", \"4px\").style(\"background\", \"#ef4444\").style(\"color\", \"#fff\").style(\"border\", \"none\").style(\"border-radius\", \"4px\").style(\"padding\", \"2px 6px\").style(\"font-size\", \"10px\").style(\"cursor\", \"pointer\").text(\"x\").on(\"click\", () => {\n              chartState[cat.id] = chartState[cat.id].filter(id => id !== itemId);\n              renderDragMatch(d3, container);\n              sendChartState();\n            });\n          }\n        }\n      });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragMatch(currentD3, currentD3.select(\".drag-match-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Which of these expressions are equivalent to <strong>9(t - 2)</strong>?\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Drag each expression to the correct category.\");\n    const dragMatch = main.append(\"div\").attr(\"class\", \"drag-match-container\");\n    renderDragMatch(d3, dragMatch);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { equivalent: incoming.matches?.equivalent || [], notEquivalent: incoming.matches?.notEquivalent || [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragMatch(d3, d3.select(\".drag-match-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragMatch(d3, d3.select(\".drag-match-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Equivalent to 9(t - 2): 9(t) - 9(2), 9t - 18, 3(3t - 6)\nNot Equivalent: 9(2) - 9(t), 3(3t - 2), 3(18 - 3t)"
            }
          }
        },
        {
          "questions": {
            "id": 23779,
            "questionContent": {
              "questionText": "Emma has a rectangular yard that is 7.5 meters wide. 6 meters of the length are for grass, and x meters are for a patio.\n\nDrag tiles to write 2 different expressions that represent the area of the yard in square meters.\n\nAvailable tiles: 5, 6, 7.5, x, 6x, 7.5x, 13.5, 36, 45\n\nFormat: __(__ + __) and __ + __",
              "explanation": "Yard area = width times length = 7.5(6 + x)\nDistributed form = 7.5(6) + 7.5(x) = 45 + 7.5x",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [\"5\", \"6\", \"7.5\", \"x\", \"6x\", \"7.5x\", \"13.5\", \"36\", \"45\"];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { s1: null, s2: null, s3: null, s4: null, s5: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: chartState }); }\n\n  function renderGarden(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 200).attr(\"height\", 100).style(\"display\", \"block\").style(\"margin\", \"0 auto 20px\");\n\n    // Garden sections\n    svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", 20).attr(\"width\", 40).attr(\"height\", 60).attr(\"fill\", \"#fed7aa\").attr(\"stroke\", \"#ea580c\").attr(\"stroke-width\", 2);\n    svg.append(\"rect\").attr(\"x\", 50).attr(\"y\", 20).attr(\"width\", 80).attr(\"height\", 60).attr(\"fill\", \"#bbf7d0\").attr(\"stroke\", \"#16a34a\").attr(\"stroke-width\", 2);\n\n    // Labels\n    svg.append(\"text\").attr(\"x\", 30).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"6 m\");\n    svg.append(\"text\").attr(\"x\", 90).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"x\");\n    svg.append(\"text\").attr(\"x\", 145).attr(\"y\", 55).attr(\"font-size\", \"10px\").text(\"7.5 m\");\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression 1: __(__ + __)\n    const exp1 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"16px\").style(\"font-size\", \"16px\");\n\n    const slotStyle = { width: \"50px\", height: \"32px\", border: \"2px dashed #9ca3af\", borderRadius: \"6px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fff\", fontSize: \"14px\" };\n\n    [\"s1\", \"s2\", \"s3\"].forEach((key, i) => {\n      if (i === 1) exp1.append(\"span\").text(\"(\");\n      if (i === 2) exp1.append(\"span\").text(\"+\");\n\n      const slot = exp1.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n\n      if (i === 2) exp1.append(\"span\").text(\")\");\n    });\n\n    // Expression 2: __ + __\n    const exp2 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"16px\");\n\n    [\"s4\", \"s5\"].forEach((key, i) => {\n      if (i === 1) exp2.append(\"span\").text(\"+\");\n\n      const slot = exp2.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n    });\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    const usedItems = Object.values(chartState).filter(Boolean);\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = usedItems.includes(item);\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"6px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"6px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Emma has a rectangular yard that is 7.5 meters wide. 6 meters of the length are for grass, and <em>x</em> meters are for patio.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    renderGarden(d3, main);\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to write 2 different expressions that represent the area of the garden in square meters.\");\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    chartState = payload?.slots || createDefaultState();\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- First expression: 7.5(6 + x) or equivalent\n- Second expression: 45 + 7.5x or equivalent\n- Both expressions should equal the same value"
            }
          }
        },
        {
          "questions": {
            "id": 23745,
            "questionContent": {
              "questionText": "Fill in the box to write an expression equivalent to 12x - 7x.\n\nThe algebra tiles show 12 positive x tiles with 7 crossed out (representing subtraction).",
              "explanation": "When we subtract like terms, we subtract their coefficients: 12x - 7x = (12 - 7)x = 5x. The algebra tiles visualize this by showing 12 positive x tiles with 7 being removed (crossed out), leaving 5 x tiles.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    video\n      .append(\"p\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Your browser does not support the video tag.\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    // Create SVG for algebra tiles\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 120)\n      .attr(\"height\", 430)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileWidth = 80;\n    const tileHeight = 30;\n    const gap = 5;\n    const startX = 20;\n    const startY = 10;\n\n    // Draw 12 x-tiles, with last 7 crossed out\n    for (let i = 0; i < 12; i++) {\n      const y = startY + i * (tileHeight + gap);\n      const isCrossedOut = i >= 5;\n\n      // Tile rectangle\n      svg.append(\"rect\")\n        .attr(\"x\", startX)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      // x label\n      svg.append(\"text\")\n        .attr(\"x\", startX + 10)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      // Cross out the last 7 tiles\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", startX)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", startX + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", startX)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Fill in the box to write an expression equivalent to <strong>12x - 7x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles visualization\n    renderAlgebraTiles(d3, mainCard);\n\n    // Answer input area\n    const inputContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"input-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"font-size\", \"20px\");\n\n    answerInput = inputContainer\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .attr(\"maxlength\", \"3\")\n      .style(\"width\", \"60px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #d1d5db\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      })\n      .on(\"focus\", function () {\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"outline\", \"none\");\n      })\n      .on(\"blur\", function () {\n        d3.select(this).style(\"border-color\", \"#d1d5db\");\n      });\n\n    inputContainer\n      .append(\"span\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x\");\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the coefficient \"5\" in the input box\n- The complete equivalent expression is 5x\n- Accept variations: \"5\", \" 5 \", etc."
            }
          }
        },
        {
          "questions": {
            "id": 23750,
            "questionContent": {
              "questionText": "Which expression is equivalent to 9x + 3 - 5x + 4?\n\nThe algebra tiles show 9 positive x tiles with 5 crossed out (representing subtraction) and 7 positive unit tiles.",
              "explanation": "To simplify 9x + 3 - 5x + 4, combine like terms:\n- Variable terms: 9x - 5x = 4x\n- Constant terms: 3 + 4 = 7\n- Result: 4x + 7",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"4x + 7\", isCorrect: true },\n    { id: \"B\", label: \"3x + 1\", isCorrect: false },\n    { id: \"C\", label: \"5x + 1\", isCorrect: false },\n    { id: \"D\", label: \"5x + 5\", isCorrect: false },\n  ];\n\n  function createDefaultState() {\n    return {\n      selectedAnswer: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedAnswer: chartState.selectedAnswer,\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 200)\n      .attr(\"height\", 330)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles (9 total, 5 crossed out) - left column\n    for (let i = 0; i < 9; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 4;\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#38bdf8\")\n        .attr(\"stroke\", \"#0284c7\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#0c4a6e\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles (7 total: 3+4, shown as 2 columns)\n    // First column: 3 units\n    for (let i = 0; i < 3; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n\n    // Second column: 4 units\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (unitSize + gap);\n      svg.append(\"rect\")\n        .attr(\"x\", 145)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 152)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n    }\n  }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n\n    const optionsList = container\n      .append(\"div\")\n      .attr(\"class\", \"options-list\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-direction\", \"column\")\n      .style(\"gap\", \"12px\")\n      .style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswer === option.id;\n\n      const optionRow = optionsList\n        .append(\"div\")\n        .attr(\"class\", \"option-row\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px 16px\")\n        .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n        .style(\"transition\", \"all 0.2s\");\n\n      if (!interactivityLocked) {\n        optionRow\n          .on(\"mouseover\", function () {\n            if (!isSelected) {\n              d3.select(this)\n                .style(\"background\", \"#f9fafb\")\n                .style(\"border-color\", \"#9ca3af\");\n            }\n          })\n          .on(\"mouseout\", function () {\n            d3.select(this)\n              .style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\")\n              .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\");\n          })\n          .on(\"click\", function () {\n            if (interactivityLocked) return;\n            chartState.selectedAnswer = option.id;\n            renderOptions(d3, container);\n            sendChartState();\n          });\n      }\n\n      // Radio button\n      const radioButton = optionRow\n        .append(\"div\")\n        .style(\"width\", \"20px\")\n        .style(\"height\", \"20px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\")\n        .style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"center\")\n        .style(\"justify-content\", \"center\")\n        .style(\"flex-shrink\", \"0\");\n\n      radioButton\n        .append(\"div\")\n        .style(\"width\", \"8px\")\n        .style(\"height\", \"8px\")\n        .style(\"border-radius\", \"50%\")\n        .style(\"background\", isSelected ? \"#ffffff\" : \"transparent\");\n\n      // Option label\n      optionRow\n        .append(\"div\")\n        .style(\"font-size\", \"18px\")\n        .text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) {\n        renderOptions(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"Which expression is equivalent to <strong>9x + 3 - 5x + 4</strong>?\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Options container\n    const optionsContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"options-container\");\n\n    renderOptions(d3, optionsContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) {\n      renderOptions(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (\n      typeof incoming.selectedAnswer === \"string\" &&\n      ANSWER_OPTIONS.some((opt) => opt.id === incoming.selectedAnswer)\n    ) {\n      nextState.selectedAnswer = incoming.selectedAnswer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects option A: 4x + 7\n- This is the only correct answer"
            }
          }
        },
        {
          "questions": {
            "id": 23755,
            "questionContent": {
              "questionText": "What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\n\nThe tiles show: 14 positive x tiles (with 7 crossed out representing subtraction) and 8 positive unit tiles (with 2 crossed out).\n\nAvailable terms: 0x, 7x, 6, 8",
              "explanation": "The algebra tiles show 14 x-tiles with 7 crossed out (14x - 7x = 7x) and 8 unit tiles with 2 crossed out (8 - 2 = 6). Result: 7x + 6.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONSTANTS\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  // Draggable terms\n  const DRAG_ITEMS = [\n    { id: \"0x\", label: \"0x\" },\n    { id: \"7x\", label: \"7x\" },\n    { id: \"6\", label: \"6\" },\n    { id: \"8\", label: \"8\" },\n  ];\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-header\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\");\n\n    header\n      .append(\"span\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"color\", \"#374151\")\n      .text(\"Watch Worked Example\");\n\n    const chevron = header\n      .append(\"span\")\n      .attr(\"class\", \"chevron\")\n      .style(\"transition\", \"transform 0.3s ease\")\n      .style(\"font-size\", \"12px\")\n      .style(\"color\", \"#6b7280\")\n      .html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .attr(\"class\", \"accordion-content\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#ffffff\");\n\n    const video = content\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"preload\", \"metadata\")\n      .style(\"width\", \"100%\")\n      .style(\"border-radius\", \"8px\");\n\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      slot1: null,\n      slot2: null,\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      slots: {\n        slot1: chartState.slot1,\n        slot2: chartState.slot2,\n      },\n    });\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container\n      .append(\"svg\")\n      .attr(\"width\", 180)\n      .attr(\"height\", 220)\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 80;\n    const unitSize = 25;\n    const gap = 5;\n\n    // X tiles - 14 total with 7 crossed out (showing subtraction)\n    // Blue color for x tiles\n    for (let i = 0; i < 14; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = (i >= 7); // Last 7 tiles crossed out\n\n      svg.append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", y)\n        .attr(\"width\", tileWidth)\n        .attr(\"height\", tileHeight)\n        .attr(\"rx\", 4)\n        .attr(\"fill\", \"#f472b6\")\n        .attr(\"stroke\", \"#db2777\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", y + 20)\n        .attr(\"font-size\", \"14px\")\n        .attr(\"font-style\", \"italic\")\n        .attr(\"fill\", \"#831843\")\n        .text(\"x\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 10)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10 + tileWidth)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 10 + tileWidth)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 10)\n          .attr(\"y2\", y + tileHeight)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Unit tiles - 8 total with 2 crossed out (8-2=6)\n    for (let i = 0; i < 8; i++) {\n      const y = 10 + i * (unitSize + gap);\n      const isCrossedOut = (i >= 6);\n\n      svg.append(\"rect\")\n        .attr(\"x\", 110)\n        .attr(\"y\", y)\n        .attr(\"width\", unitSize)\n        .attr(\"height\", unitSize)\n        .attr(\"rx\", 3)\n        .attr(\"fill\", \"#a78bfa\")\n        .attr(\"stroke\", \"#7c3aed\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append(\"text\")\n        .attr(\"x\", 117)\n        .attr(\"y\", y + 17)\n        .attr(\"font-size\", \"12px\")\n        .attr(\"fill\", \"#4c1d95\")\n        .text(\"1\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\")\n          .attr(\"x1\", 110)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110 + unitSize)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 110 + unitSize)\n          .attr(\"y1\", y)\n          .attr(\"x2\", 110)\n          .attr(\"y2\", y + unitSize)\n          .attr(\"stroke\", \"#dc2626\")\n          .attr(\"stroke-width\", 3);\n      }\n    }\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Drop slots container\n    const slotsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"slots-container\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"font-size\", \"20px\");\n\n    // First slot\n    const slot1 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-1\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot2 === draggedItem) chartState.slot2 = null;\n          chartState.slot1 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot1) {\n        slot1\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot1 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    slotsContainer.append(\"span\").text(\"+\");\n\n    // Second slot\n    const slot2 = slotsContainer\n      .append(\"div\")\n      .attr(\"class\", \"drop-slot slot-2\")\n      .style(\"width\", \"80px\")\n      .style(\"height\", \"40px\")\n      .style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#ffffff\")\n      .style(\"font-size\", \"18px\")\n      .text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => {\n        e.preventDefault();\n        if (draggedItem) {\n          // Remove from other slot if present\n          if (chartState.slot1 === draggedItem) chartState.slot1 = null;\n          chartState.slot2 = draggedItem;\n          draggedItem = null;\n          renderDragDrop(d3, container);\n          sendChartState();\n        }\n      });\n\n      if (chartState.slot2) {\n        slot2\n          .style(\"cursor\", \"pointer\")\n          .on(\"click\", function () {\n            chartState.slot2 = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          });\n      }\n    }\n\n    // Draggable items\n    const itemsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"items-container\")\n      .style(\"display\", \"flex\")\n      .style(\"gap\", \"12px\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"justify-content\", \"center\");\n\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n\n      const itemDiv = itemsContainer\n        .append(\"div\")\n        .attr(\"class\", \"drag-item\")\n        .attr(\"draggable\", !interactivityLocked && !isUsed)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"border\", \"2px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"background\", isUsed ? \"#e5e7eb\" : \"#ffffff\")\n        .style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\")\n        .style(\"opacity\", isUsed ? \"0.5\" : \"1\")\n        .style(\"font-size\", \"16px\")\n        .style(\"user-select\", \"none\")\n        .text(item.label);\n\n      if (!interactivityLocked && !isUsed) {\n        itemDiv.node().addEventListener(\"dragstart\", () => {\n          draggedItem = item.label;\n        });\n\n        itemDiv\n          .on(\"mouseenter\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1.05)\")\n              .style(\"box-shadow\", \"0 4px 12px rgba(0,0,0,0.1)\");\n          })\n          .on(\"mouseleave\", function () {\n            d3.select(this)\n              .style(\"transform\", \"scale(1)\")\n              .style(\"box-shadow\", \"none\");\n          });\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".drag-drop-container\");\n      if (!container.empty()) {\n        renderDragDrop(currentD3, container);\n      }\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"padding\", \"20px\")\n      .style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"intro-cards-container\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"align-items\", \"center\");\n\n    // First card: Emoji\n    const imageCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"image-card\",\n      marginBottom: \"0\"\n    });\n\n    imageCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .style(\"line-height\", \"1\")\n      .text(\"\\\");\n\n    // Second card: Description text\n    const textCard = createStandardCard(d3, introCardsContainer, {\n      size: \"small\",\n      className: \"text-card\",\n      marginBottom: \"0\"\n    });\n\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"What simplified expression do the algebra tiles show? Drag the correct terms to the expression.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, {\n      size: \"large\",\n      className: \"main-card\",\n      marginBottom: \"24px\"\n    });\n\n    // Algebra tiles\n    renderAlgebraTiles(d3, mainCard);\n\n    // Drag and drop area\n    const dragDropContainer = mainCard\n      .append(\"div\")\n      .attr(\"class\", \"drag-drop-container\");\n\n    renderDragDrop(d3, dragDropContainer);\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    const container = d3.select(\".drag-drop-container\");\n    if (!container.empty()) {\n      renderDragDrop(d3, container);\n    }\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.slots && typeof incoming.slots === \"object\") {\n      nextState.slot1 = incoming.slots.slot1 || null;\n      nextState.slot2 = incoming.slots.slot2 || null;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags \"7x\" and \"6\" into the slots\n- The simplified expression shown should be 7x + 6 (or 6 + 7x)"
            }
          }
        },
        {
          "questions": {
            "id": 23760,
            "questionContent": {
              "questionText": "Fill in the boxes to write an expression equivalent to 7x + 9y - 6y + 4x.\n\nThe algebra tiles show the terms being combined.",
              "explanation": "To simplify 7x + 9y - 6y + 4x, combine like terms:\n- x terms: 7x + 4x = 11x\n- y terms: 9y - 6y = 3y\n- Result: 11x + 3y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const accordionContainer = container\n      .append(\"div\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"24px\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"overflow\", \"hidden\");\n\n    const header = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"space-between\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"cursor\", \"pointer\");\n\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n\n    const content = accordionContainer\n      .append(\"div\")\n      .style(\"display\", \"none\")\n      .style(\"padding\", \"16px\");\n\n    const video = content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\");\n    video.append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n\n    let isOpen = false;\n    header.on(\"click\", function () {\n      isOpen = !isOpen;\n      content.style(\"display\", isOpen ? \"block\" : \"none\");\n      chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\");\n    });\n\n    return accordionContainer;\n  }\n\n  function createDefaultState() {\n    return { answer1: \"\", answer2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let input1 = null;\n  let input2 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answers: { answer1: chartState.answer1, answer2: chartState.answer2 },\n    });\n  }\n\n  function renderControls() {\n    if (input1 && input1.node().value !== chartState.answer1) input1.node().value = chartState.answer1;\n    if (input2 && input2.node().value !== chartState.answer2) input2.node().value = chartState.answer2;\n    if (input1) input1.property(\"disabled\", interactivityLocked);\n    if (input2) input2.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function renderAlgebraTiles(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 280).attr(\"height\", 330).style(\"display\", \"block\").style(\"margin\", \"0 auto 24px\");\n\n    const tileHeight = 30;\n    const tileWidth = 60;\n    const gap = 5;\n\n    // Left column: 7x tiles\n    for (let i = 0; i < 7; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 20).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n\n    // Middle column: 9y tiles with 6 crossed out\n    for (let i = 0; i < 9; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      const isCrossedOut = i >= 3;\n      svg.append(\"rect\").attr(\"x\", 90).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#f472b6\").attr(\"stroke\", \"#db2777\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 100).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#831843\").text(\"y\");\n\n      if (isCrossedOut) {\n        svg.append(\"line\").attr(\"x1\", 90).attr(\"y1\", y).attr(\"x2\", 90 + tileWidth).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n        svg.append(\"line\").attr(\"x1\", 90 + tileWidth).attr(\"y1\", y).attr(\"x2\", 90).attr(\"y2\", y + tileHeight).attr(\"stroke\", \"#dc2626\").attr(\"stroke-width\", 3);\n      }\n    }\n\n    // Right column: 4x tiles\n    for (let i = 0; i < 4; i++) {\n      const y = 10 + i * (tileHeight + gap);\n      svg.append(\"rect\").attr(\"x\", 170).attr(\"y\", y).attr(\"width\", tileWidth).attr(\"height\", tileHeight).attr(\"rx\", 4).attr(\"fill\", \"#38bdf8\").attr(\"stroke\", \"#0284c7\").attr(\"stroke-width\", 2);\n      svg.append(\"text\").attr(\"x\", 180).attr(\"y\", y + 20).attr(\"font-size\", \"14px\").attr(\"font-style\", \"italic\").attr(\"fill\", \"#0c4a6e\").text(\"x\");\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Emoji + intro card grid\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the boxes to write an expression equivalent to <strong>7x + 9y - 6y + 4x</strong>.\");\n\n    // Main content card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n\n    renderAlgebraTiles(d3, mainCard);\n\n    // Input container\n    const inputContainer = mainCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"font-size\", \"20px\").style(\"justify-content\", \"center\");\n\n    input1 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer1 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"x + \");\n\n    input2 = inputContainer.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").attr(\"maxlength\", \"3\").style(\"width\", \"50px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () {\n      chartState.answer2 = this.value;\n      sendChartState();\n    }).on(\"focus\", function () { d3.select(this).style(\"border-color\", \"#3b82f6\"); }).on(\"blur\", function () { d3.select(this).style(\"border-color\", \"#d1d5db\"); });\n\n    inputContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"y\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.answers) {\n      nextState.answer1 = incoming.answers.answer1 || \"\";\n      nextState.answer2 = incoming.answers.answer2 || \"\";\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters \"11\" in the first box (coefficient of x)\n- Student enters \"3\" in the second box (coefficient of y)\n- Complete expression: 11x + 3y"
            }
          }
        },
        {
          "questions": {
            "id": 23765,
            "questionContent": {
              "questionText": "Which expression is equivalent to 13x + 20y - 6x - 11y?\n\nSelect all that apply.",
              "explanation": "To simplify 13x + 20y - 6x - 11y:\n- x terms: 13x - 6x = 7x\n- y terms: 20y - 11y = 9y\n- Result: 7x + 9y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"] || CARD_STYLES.large;\n    return container.append(\"div\").attr(\"class\", options.className || \"standard-card\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").style(\"font-size\", \"12px\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"rotate(0deg)\"); });\n    return acc;\n  }\n\n  const ANSWER_OPTIONS = [\n    { id: \"A\", label: \"33x + 9y\", isCorrect: false },\n    { id: \"B\", label: \"7x + 9y\", isCorrect: true },\n    { id: \"C\", label: \"19x + 31y\", isCorrect: false },\n    { id: \"D\", label: \"6x - 11y\", isCorrect: false },\n  ];\n\n  function createDefaultState() { return { selectedAnswers: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { selectedAnswers: chartState.selectedAnswers }); }\n\n  function renderOptions(d3, container) {\n    container.html(\"\");\n    const optionsList = container.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"12px\").style(\"max-width\", \"300px\");\n\n    ANSWER_OPTIONS.forEach((option) => {\n      const isSelected = chartState.selectedAnswers.includes(option.id);\n      const optionRow = optionsList.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"padding\", \"12px 16px\").style(\"background\", isSelected ? \"#eff6ff\" : \"#ffffff\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #e5e7eb\").style(\"border-radius\", \"8px\").style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\");\n\n      if (!interactivityLocked) {\n        optionRow.on(\"click\", function () {\n          if (isSelected) {\n            chartState.selectedAnswers = chartState.selectedAnswers.filter(id => id !== option.id);\n          } else {\n            chartState.selectedAnswers = [...chartState.selectedAnswers, option.id];\n          }\n          renderOptions(d3, container);\n          sendChartState();\n        });\n      }\n\n      // Checkbox\n      const checkbox = optionRow.append(\"div\").style(\"width\", \"20px\").style(\"height\", \"20px\").style(\"border-radius\", \"4px\").style(\"border\", isSelected ? \"2px solid #3b82f6\" : \"2px solid #9ca3af\").style(\"background\", isSelected ? \"#3b82f6\" : \"#ffffff\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\");\n      if (isSelected) checkbox.append(\"span\").style(\"color\", \"#ffffff\").style(\"font-size\", \"14px\").html(\"&#10003;\");\n\n      optionRow.append(\"div\").style(\"font-size\", \"18px\").text(option.label);\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) {\n      const container = currentD3.select(\".options-container\");\n      if (!container.empty()) renderOptions(currentD3, container);\n    }\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introCardsContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const imageCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    imageCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const textCard = createStandardCard(d3, introCardsContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which expression is equivalent to <strong>13x + 20y - 6x - 11y</strong>?\");\n\n    // Main card\n    const mainCard = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    mainCard.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Select all that apply.\");\n\n    const optionsContainer = mainCard.append(\"div\").attr(\"class\", \"options-container\");\n    renderOptions(d3, optionsContainer);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    const container = d3.select(\".options-container\");\n    if (!container.empty()) renderOptions(d3, container);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = { selectedAnswers: Array.isArray(incoming.selectedAnswers) ? incoming.selectedAnswers : [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") { setInteractivity(data.payload === false); }\n      if (data.type === \"check_answer\") { sendChartState(); }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelectorRef);\n      renderFromState(d3);\n      window.clearChart = function () { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"7x + 9y\" (correct)\n- Other options are incorrect"
            }
          }
        },
        {
          "questions": {
            "id": 23770,
            "questionContent": {
              "questionText": "Fill in the box below to write an expression that is equivalent to 9(2x + y).\n\nDrag tiles to complete: 12x - ___ + 15x + 7y + ___\n\nAvailable: 2y, 3x, 6x, 9y, 18x",
              "explanation": "Using distributive property: 9(2x + y) = 9(2x) + 9(y) = 18x + 9y",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [{ id: \"2y\", label: \"2y\" }, { id: \"3x\", label: \"3x\" }, { id: \"6x\", label: \"6x\" }, { id: \"9y\", label: \"9y\" }, { id: \"18x\", label: \"18x\" }];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); chevron.style(\"transform\", isOpen ? \"rotate(180deg)\" : \"\"); });\n  }\n\n  function createDefaultState() { return { slot1: null, slot2: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: { slot1: chartState.slot1, slot2: chartState.slot2 } }); }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression with slots\n    const expr = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"18px\").style(\"flex-wrap\", \"wrap\");\n    expr.append(\"span\").text(\"12x -\");\n\n    const slot1 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot1 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot1 ? \"#eff6ff\" : \"#fff\").text(chartState.slot1 || \"\");\n\n    if (!interactivityLocked) {\n      slot1.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot1.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot2 === draggedItem) chartState.slot2 = null; chartState.slot1 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot1) slot1.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot1 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    expr.append(\"span\").text(\"+ 15x + 7y +\");\n\n    const slot2 = expr.append(\"div\").style(\"width\", \"70px\").style(\"height\", \"36px\").style(\"border\", chartState.slot2 ? \"2px solid #3b82f6\" : \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"background\", chartState.slot2 ? \"#eff6ff\" : \"#fff\").text(chartState.slot2 || \"\");\n\n    if (!interactivityLocked) {\n      slot2.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n      slot2.node().addEventListener(\"drop\", (e) => { e.preventDefault(); if (draggedItem) { if (chartState.slot1 === draggedItem) chartState.slot1 = null; chartState.slot2 = draggedItem; draggedItem = null; renderDragDrop(d3, container); sendChartState(); } });\n      if (chartState.slot2) slot2.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState.slot2 = null; renderDragDrop(d3, container); sendChartState(); });\n    }\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"12px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = chartState.slot1 === item.label || chartState.slot2 === item.label;\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"8px 14px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").text(item.label);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.label; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Fill in the box below to write an expression that is equivalent to <strong>9(2x + y)</strong>.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { slot1: incoming.slots?.slot1 || null, slot2: incoming.slots?.slot2 || null };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student drags correct terms to create expression equivalent to 18x + 9y\n- 9(2x + y) = 18x + 9y"
            }
          }
        },
        {
          "questions": {
            "id": 23775,
            "questionContent": {
              "questionText": "Which of these expressions are equivalent to 10(y - 3)?\n\nDrag each expression to the correct category.\n\nExpressions: 10(3) - 10(y), 5(2y - 3), 2(30 - 10y), 10(y) - 10(3), 10y - 30, 5(2y - 6)",
              "explanation": "10(y - 3) = 10y - 30 using distributive property. Equivalent forms include 5(2y - 6) and 10(y) - 10(3).",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n\n  const ITEMS = [\n    { id: \"item1\", text: \"10(3) - 10(y)\" },\n    { id: \"item2\", text: \"5(2y - 3)\" },\n    { id: \"item3\", text: \"2(30 - 10y)\" },\n    { id: \"item4\", text: \"10(y) - 10(3)\" },\n    { id: \"item5\", text: \"10y - 30\" },\n    { id: \"item6\", text: \"5(2y - 6)\" },\n  ];\n\n  const CATEGORIES = [\n    { id: \"equivalent\", label: \"Equivalent to 10(y - 3)\" },\n    { id: \"notEquivalent\", label: \"Not equivalent to 10(y - 3)\" },\n  ];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"space-between\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const chevron = header.append(\"span\").html(\"&#9660;\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { equivalent: [], notEquivalent: [] }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { matches: { equivalent: chartState.equivalent, notEquivalent: chartState.notEquivalent } }); }\n\n  function renderDragMatch(d3, container) {\n    container.html(\"\");\n\n    const layout = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"1fr 1fr\").style(\"gap\", \"24px\");\n\n    // Available items\n    const itemsCol = layout.append(\"div\");\n    itemsCol.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Drag expressions:\");\n    const itemsArea = itemsCol.append(\"div\").style(\"background\", \"#f3f4f6\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\");\n\n    const matchedIds = [...chartState.equivalent, ...chartState.notEquivalent];\n    ITEMS.forEach((item) => {\n      const isMatched = matchedIds.includes(item.id);\n      const div = itemsArea.append(\"div\").attr(\"draggable\", !interactivityLocked && !isMatched).style(\"padding\", \"8px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"8px\").style(\"background\", isMatched ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isMatched || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isMatched ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item.text);\n      if (!interactivityLocked && !isMatched) div.node().addEventListener(\"dragstart\", () => { draggedItem = item.id; });\n    });\n\n    // Categories\n    const catsCol = layout.append(\"div\");\n    CATEGORIES.forEach((cat) => {\n      const catDiv = catsCol.append(\"div\").style(\"margin-bottom\", \"16px\");\n      catDiv.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(cat.label);\n      const dropZone = catDiv.append(\"div\").style(\"border\", \"2px dashed #cbd5e1\").style(\"border-radius\", \"8px\").style(\"padding\", \"12px\").style(\"min-height\", \"80px\").style(\"background\", \"#fff\");\n\n      if (!interactivityLocked) {\n        dropZone.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        dropZone.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            chartState.equivalent = chartState.equivalent.filter(id => id !== draggedItem);\n            chartState.notEquivalent = chartState.notEquivalent.filter(id => id !== draggedItem);\n            chartState[cat.id].push(draggedItem);\n            draggedItem = null;\n            renderDragMatch(d3, container);\n            sendChartState();\n          }\n        });\n      }\n\n      // Show matched items\n      chartState[cat.id].forEach((itemId) => {\n        const item = ITEMS.find(i => i.id === itemId);\n        if (item) {\n          const matchedDiv = dropZone.append(\"div\").style(\"position\", \"relative\").style(\"padding\", \"8px 12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"6px\").style(\"background\", \"#fafafa\").style(\"margin-bottom\", \"8px\").style(\"font-size\", \"14px\").text(item.text);\n          if (!interactivityLocked) {\n            matchedDiv.append(\"button\").style(\"position\", \"absolute\").style(\"top\", \"4px\").style(\"right\", \"4px\").style(\"background\", \"#ef4444\").style(\"color\", \"#fff\").style(\"border\", \"none\").style(\"border-radius\", \"4px\").style(\"padding\", \"2px 6px\").style(\"font-size\", \"10px\").style(\"cursor\", \"pointer\").text(\"x\").on(\"click\", () => {\n              chartState[cat.id] = chartState[cat.id].filter(id => id !== itemId);\n              renderDragMatch(d3, container);\n              sendChartState();\n            });\n          }\n        }\n      });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragMatch(currentD3, currentD3.select(\".drag-match-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"Which of these expressions are equivalent to <strong>10(y - 3)</strong>?\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"color\", \"#6b7280\").style(\"margin-bottom\", \"16px\").text(\"Drag each expression to the correct category.\");\n    const dragMatch = main.append(\"div\").attr(\"class\", \"drag-match-container\");\n    renderDragMatch(d3, dragMatch);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { equivalent: incoming.matches?.equivalent || [], notEquivalent: incoming.matches?.notEquivalent || [] };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragMatch(d3, d3.select(\".drag-match-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragMatch(d3, d3.select(\".drag-match-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Equivalent to 10(y - 3): 10(y) - 10(3), 10y - 30, 5(2y - 6)\nNot Equivalent: 10(3) - 10(y), 5(2y - 3), 2(30 - 10y)"
            }
          }
        },
        {
          "questions": {
            "id": 23780,
            "questionContent": {
              "questionText": "David has a rectangular plot that is 8.5 meters wide. 4 meters of the length are for trees, and x meters are for shrubs.\n\nDrag tiles to write 2 different expressions that represent the area of the plot in square meters.\n\nAvailable tiles: 3, 4, 8.5, x, 4x, 8.5x, 12.5, 25.5, 34\n\nFormat: __(__ + __) and __ + __",
              "explanation": "Plot area = width times length = 8.5(4 + x)\nDistributed form = 8.5(4) + 8.5(x) = 34 + 8.5x",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-478/worked-example-video.mp4\";\n  const DRAG_ITEMS = [\"3\", \"4\", \"8.5\", \"x\", \"4x\", \"8.5x\", \"12.5\", \"25.5\", \"34\"];\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\").style(\"background\", styles.background).style(\"border\", styles.border).style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding).style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    const acc = container.append(\"div\").style(\"margin-top\", \"24px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"overflow\", \"hidden\");\n    const header = acc.append(\"div\").style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"cursor\", \"pointer\");\n    header.append(\"span\").style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"Watch Worked Example\");\n    const content = acc.append(\"div\").style(\"display\", \"none\").style(\"padding\", \"16px\");\n    content.append(\"video\").attr(\"controls\", true).style(\"width\", \"100%\").style(\"border-radius\", \"8px\").append(\"source\").attr(\"src\", videoUrl).attr(\"type\", \"video/mp4\");\n    let isOpen = false;\n    header.on(\"click\", () => { isOpen = !isOpen; content.style(\"display\", isOpen ? \"block\" : \"none\"); });\n  }\n\n  function createDefaultState() { return { s1: null, s2: null, s3: null, s4: null, s5: null }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let currentD3 = null;\n  let draggedItem = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    if (window.parent) window.parent.postMessage({ type, payload }, \"*\");\n    window.postMessage({ type, payload }, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { slots: chartState }); }\n\n  function renderGarden(d3, container) {\n    const svg = container.append(\"svg\").attr(\"width\", 200).attr(\"height\", 100).style(\"display\", \"block\").style(\"margin\", \"0 auto 20px\");\n\n    // Garden sections\n    svg.append(\"rect\").attr(\"x\", 10).attr(\"y\", 20).attr(\"width\", 40).attr(\"height\", 60).attr(\"fill\", \"#fed7aa\").attr(\"stroke\", \"#ea580c\").attr(\"stroke-width\", 2);\n    svg.append(\"rect\").attr(\"x\", 50).attr(\"y\", 20).attr(\"width\", 80).attr(\"height\", 60).attr(\"fill\", \"#bbf7d0\").attr(\"stroke\", \"#16a34a\").attr(\"stroke-width\", 2);\n\n    // Labels\n    svg.append(\"text\").attr(\"x\", 30).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"4 m\");\n    svg.append(\"text\").attr(\"x\", 90).attr(\"y\", 15).attr(\"font-size\", \"10px\").attr(\"text-anchor\", \"middle\").text(\"x\");\n    svg.append(\"text\").attr(\"x\", 145).attr(\"y\", 55).attr(\"font-size\", \"10px\").text(\"8.5 m\");\n  }\n\n  function renderDragDrop(d3, container) {\n    container.html(\"\");\n\n    // Expression 1: __(__ + __)\n    const exp1 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"16px\").style(\"font-size\", \"16px\");\n\n    const slotStyle = { width: \"50px\", height: \"32px\", border: \"2px dashed #9ca3af\", borderRadius: \"6px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fff\", fontSize: \"14px\" };\n\n    [\"s1\", \"s2\", \"s3\"].forEach((key, i) => {\n      if (i === 1) exp1.append(\"span\").text(\"(\");\n      if (i === 2) exp1.append(\"span\").text(\"+\");\n\n      const slot = exp1.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n\n      if (i === 2) exp1.append(\"span\").text(\")\");\n    });\n\n    // Expression 2: __ + __\n    const exp2 = container.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"6px\").style(\"margin-bottom\", \"24px\").style(\"font-size\", \"16px\");\n\n    [\"s4\", \"s5\"].forEach((key, i) => {\n      if (i === 1) exp2.append(\"span\").text(\"+\");\n\n      const slot = exp2.append(\"div\");\n      Object.entries(slotStyle).forEach(([k, v]) => slot.style(k, v));\n      if (chartState[key]) slot.style(\"border\", \"2px solid #3b82f6\").style(\"background\", \"#eff6ff\");\n      slot.text(chartState[key] || \"\");\n\n      if (!interactivityLocked) {\n        slot.node().addEventListener(\"dragover\", (e) => e.preventDefault());\n        slot.node().addEventListener(\"drop\", (e) => {\n          e.preventDefault();\n          if (draggedItem) {\n            Object.keys(chartState).forEach(k => { if (chartState[k] === draggedItem) chartState[k] = null; });\n            chartState[key] = draggedItem;\n            draggedItem = null;\n            renderDragDrop(d3, container);\n            sendChartState();\n          }\n        });\n        if (chartState[key]) slot.style(\"cursor\", \"pointer\").on(\"click\", () => { chartState[key] = null; renderDragDrop(d3, container); sendChartState(); });\n      }\n    });\n\n    // Draggable items\n    const items = container.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\").style(\"justify-content\", \"center\");\n    const usedItems = Object.values(chartState).filter(Boolean);\n    DRAG_ITEMS.forEach((item) => {\n      const isUsed = usedItems.includes(item);\n      const div = items.append(\"div\").attr(\"draggable\", !interactivityLocked && !isUsed).style(\"padding\", \"6px 12px\").style(\"border\", \"2px solid #d1d5db\").style(\"border-radius\", \"6px\").style(\"background\", isUsed ? \"#e5e7eb\" : \"#fff\").style(\"cursor\", isUsed || interactivityLocked ? \"default\" : \"grab\").style(\"opacity\", isUsed ? \"0.5\" : \"1\").style(\"font-size\", \"14px\").text(item);\n      if (!interactivityLocked && !isUsed) div.node().addEventListener(\"dragstart\", () => { draggedItem = item; });\n    });\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; if (currentD3) renderDragDrop(currentD3, currentD3.select(\".drag-drop-container\")); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, sans-serif\").style(\"color\", \"#1f2937\").style(\"padding\", \"20px\").style(\"overflow\", \"auto\");\n\n    const intro = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"20px\").style(\"align-items\", \"center\");\n    const img = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    img.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\\\");\n    const txt = createStandardCard(d3, intro, { size: \"small\", marginBottom: \"0\" });\n    txt.append(\"div\").style(\"font-size\", \"16px\").html(\"David has a rectangular plot that is 8.5 meters wide. 4 meters of the length are for trees, and <em>x</em> meters are for shrubs.\");\n\n    const main = createStandardCard(d3, container, { size: \"large\", marginBottom: \"24px\" });\n    renderGarden(d3, main);\n    main.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to write 2 different expressions that represent the area of the garden in square meters.\");\n    const dragDrop = main.append(\"div\").attr(\"class\", \"drag-drop-container\");\n    renderDragDrop(d3, dragDrop);\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function applyInitialState(payload) {\n    chartState = payload?.slots || createDefaultState();\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      if (!e.data) return;\n      if (e.data.type === \"setInitialState\") { applyInitialState(e.data.payload); renderDragDrop(d3, d3.select(\".drag-drop-container\")); }\n      if (e.data.type === \"set_lock\") setInteractivity(e.data.payload === false);\n      if (e.data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector || \"#chart-root\");\n      window.clearChart = () => { chartState = createDefaultState(); renderDragDrop(d3, d3.select(\".drag-drop-container\")); sendChartState(); };\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- First expression: 8.5(4 + x) or equivalent\n- Second expression: 34 + 8.5x or equivalent\n- Both expressions should equal the same value"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 2: One-Step Equations",
      "assignment_id": 19351,
      "module_name": "LESSONS - Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19351/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 23781,
            "questionContent": {
              "questionText": "Watch the worked example video below to learn about solving 1-step equations.\n\nAfter watching, write down three main ideas from the video.",
              "explanation": "This question introduces students to solving 1-step algebraic equations through a worked example video. The video demonstrates how to solve one-step equations using inverse operations and visual models. Students should identify key concepts such as: using inverse operations, understanding the balance concept (what you do to one side you do to the other), using bar models to represent equations, and identifying the correct operation to isolate the variable. The three-response format ensures students actively engage with the content rather than passively watching.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  /**\n   * Video Player Component\n   * Creates a video player card with optional description text.\n   */\n  function createVideoPlayer(d3, container, videoUrl, options) {\n    options = options || {};\n    const description = options.description || null;\n    const maxWidth = options.maxWidth || \"800px\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const showCard = options.showCard !== false;\n\n    if (!videoUrl) {\n      return null;\n    }\n\n    if (description) {\n      container\n        .append(\"div\")\n        .attr(\"class\", \"video-description\")\n        .style(\"font-size\", \"16px\")\n        .style(\"margin-bottom\", \"24px\")\n        .text(description);\n    }\n\n    const videoCard = container\n      .append(\"div\")\n      .attr(\"class\", \"video-card\")\n      .style(\"margin-bottom\", marginBottom);\n\n    if (showCard) {\n      videoCard\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"16px\")\n        .style(\"padding\", \"20px\")\n        .style(\"box-shadow\", \"0 6px 16px rgba(15,23,42,0.05)\");\n    }\n\n    videoCard\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", maxWidth)\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return videoCard;\n  }\n\n  /**\n   * Standard Card Component\n   * Creates standardized cards with consistent styling.\n   */\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n    graph: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"18px\",\n      padding: \"24px\",\n      boxShadow: \"0 12px 28px rgba(15,23,42,0.08)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      idea1: \"\",\n      idea2: \"\",\n      idea3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let textarea1 = null;\n  let textarea2 = null;\n  let textarea3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      mainIdeas: {\n        idea1: chartState.idea1,\n        idea2: chartState.idea2,\n        idea3: chartState.idea3,\n      },\n    });\n  }\n\n  function renderControls() {\n    if (textarea1 && textarea1.node().value !== chartState.idea1) {\n      textarea1.node().value = chartState.idea1;\n    }\n    if (textarea2 && textarea2.node().value !== chartState.idea2) {\n      textarea2.node().value = chartState.idea2;\n    }\n    if (textarea3 && textarea3.node().value !== chartState.idea3) {\n      textarea3.node().value = chartState.idea3;\n    }\n\n    if (textarea1) textarea1.property(\"disabled\", interactivityLocked);\n    if (textarea2) textarea2.property(\"disabled\", interactivityLocked);\n    if (textarea3) textarea3.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // Introduction\n    container\n      .append(\"div\")\n      .attr(\"class\", \"intro\")\n      .style(\"font-size\", \"18px\")\n      .style(\"margin-bottom\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\n        \"In the upcoming unit, you'll be working with solving algebraic equations  using inverse operations to find the value of unknown variables.\"\n      );\n\n    container\n      .append(\"div\")\n      .attr(\"class\", \"skill-description\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#eff6ff\")\n      .style(\"border-left\", \"4px solid #3b82f6\")\n      .style(\"border-radius\", \"8px\")\n      .html(\n        \"<strong>Skill:</strong> I will solve one-step algebraic equations.\"\n      );\n\n    // Video player - using global component\n    createVideoPlayer(d3, container, VIDEO_URL, {\n      description: \"This worked example video will prepare you for the upcoming unit. Watch carefully!\",\n      maxWidth: \"800px\",\n      marginBottom: \"32px\"\n    });\n\n    // Reflection prompt\n    container\n      .append(\"div\")\n      .attr(\"class\", \"reflection-prompt\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"20px\")\n      .text(\"Write down three main ideas from the video:\");\n\n    // Idea 1 - using standard card\n    const idea1Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea1Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #1\");\n\n    textarea1 = idea1Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was one important thing you learned from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea1: this.value };\n        sendChartState();\n      });\n\n    // Idea 2 - using standard card\n    const idea2Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea2Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #2\");\n\n    textarea2 = idea2Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was another key concept from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea2: this.value };\n        sendChartState();\n      });\n\n    // Idea 3 - using standard card\n    const idea3Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea3Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #3\");\n\n    textarea3 = idea3Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was a third important idea from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea3: this.value };\n        sendChartState();\n      });\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.mainIdeas && typeof incoming.mainIdeas === \"object\") {\n      nextState.idea1 =\n        typeof incoming.mainIdeas.idea1 === \"string\"\n          ? incoming.mainIdeas.idea1\n          : \"\";\n      nextState.idea2 =\n        typeof incoming.mainIdeas.idea2 === \"string\"\n          ? incoming.mainIdeas.idea2\n          : \"\";\n      nextState.idea3 =\n        typeof incoming.mainIdeas.idea3 === \"string\"\n          ? incoming.mainIdeas.idea3\n          : \"\";\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "**Note: Nearly any thoughtful response should be accepted.** The purpose of this question is to encourage active viewing and reflection, not to test recall of specific facts.\n\n- Student watches the video\n- Student provides three separate responses\n- Each response shows some engagement with the video (nearly any relevant answer is acceptable)\n- Responses do not need to match specific expected answers\n- Sample acceptable responses (but many other responses are also valid):\n  - \"I can use inverse operations to solve for a variable\"\n  - \"Bar models help visualize the relationship between numbers and variables\"\n  - \"Addition and subtraction can undo each other to isolate the variable\"\n  - \"I learned how to solve equations\"\n  - \"You need to keep both sides equal\""
            }
          }
        },
        {
          "questions": {
            "id": 23782,
            "questionContent": {
              "questionText": "What is the value of _t_ in the equation t/7 = 8?\n\nUse the bar model to help you solve for _t_.",
              "explanation": "This question uses a bar model to visualize the equation t/7 = 8. The bar is divided into 7 equal sections, each representing t/7. Since each section equals 8, students can find the total value of t by multiplying: t = 7  8 = 56. This reinforces the inverse relationship between division and multiplication when solving one-step equations.\n\nThe bar model helps students see that:\n- t is the total (the whole bar)\n- When we divide t by 7, we get 8 (each of the 7 equal parts equals 8)\n- To find t, we multiply 7  8 = 56",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"t/7 = 8\";\n  const CORRECT_ANSWER = \"56\";\n  const VARIABLE = \"t\";\n  const NUM_SECTIONS = 7;\n  const SECTION_VALUE = \"8\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with variable\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(VARIABLE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#bfdbfe\" : \"#93c5fd\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section value label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"fill\", \"#1f2937\")\n        .text(SECTION_VALUE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: t = 56\n- The bar model shows 7 equal sections, each labeled with \"8\"\n- Student understands that t represents the total value of all 7 sections combined"
            }
          }
        },
        {
          "questions": {
            "id": 23783,
            "questionContent": {
              "questionText": "What is the value of _n_ in the equation n/6 = 9?\n\nUse the bar model to help you solve for _n_.",
              "explanation": "This question uses a bar model to visualize the equation n/6 = 9. The bar is divided into 6 equal sections, each representing n/6. Since each section equals 9, students can find the total value of n by multiplying: n = 6  9 = 54. This reinforces the inverse relationship between division and multiplication when solving one-step equations.\n\nThe bar model helps students see that:\n- n is the total (the whole bar)\n- When we divide n by 6, we get 9 (each of the 6 equal parts equals 9)\n- To find n, we multiply 6  9 = 54",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"n/6 = 9\";\n  const CORRECT_ANSWER = \"54\";\n  const VARIABLE = \"n\";\n  const NUM_SECTIONS = 6;\n  const SECTION_VALUE = \"9\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with variable\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(VARIABLE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#bfdbfe\" : \"#93c5fd\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section value label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"fill\", \"#1f2937\")\n        .text(SECTION_VALUE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: n = 54\n- The bar model shows 6 equal sections, each labeled with \"9\"\n- Student understands that n represents the total value of all 6 sections combined"
            }
          }
        },
        {
          "questions": {
            "id": 23788,
            "questionContent": {
              "questionText": "What is the value of _p_ in the equation 8p = 16?\n\nUse the bar model to help you solve for _p_.",
              "explanation": "This question uses a bar model to visualize the equation 8p = 16. The bar shows a total value of 16 and is divided into 8 equal sections, each representing p. Since 8 times p equals 16, students can find the value of p by dividing: p = 16  8 = 2. This reinforces the inverse relationship between multiplication and division when solving one-step equations.\n\nThe bar model helps students see that:\n- 16 is the total (the whole bar)\n- When we divide 16 into 8 equal parts, each part equals p\n- To find p, we divide 16  8 = 2",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"8p = 16\";\n  const CORRECT_ANSWER = \"2\";\n  const VARIABLE = \"p\";\n  const NUM_SECTIONS = 8;\n  const TOTAL_VALUE = \"16\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with total value\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(TOTAL_VALUE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#fde68a\" : \"#fcd34d\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section variable label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"font-style\", \"italic\")\n        .style(\"fill\", \"#1f2937\")\n        .text(VARIABLE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: p = 2\n- The bar model shows 8 equal sections, each labeled with \"p\"\n- The total value shown is 16\n- Student understands that p represents the value of each of the 8 equal sections"
            }
          }
        },
        {
          "questions": {
            "id": 23789,
            "questionContent": {
              "questionText": "What is the value of _q_ in the equation 6q = 18?\n\nUse the bar model to help you solve for _q_.",
              "explanation": "This question uses a bar model to visualize the equation 6q = 18. The bar shows a total value of 18 and is divided into 6 equal sections, each representing q. Since 6 times q equals 18, students can find the value of q by dividing: q = 18  6 = 3. This reinforces the inverse relationship between multiplication and division when solving one-step equations.\n\nThe bar model helps students see that:\n- 18 is the total (the whole bar)\n- When we divide 18 into 6 equal parts, each part equals q\n- To find q, we divide 18  6 = 3",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"6q = 18\";\n  const CORRECT_ANSWER = \"3\";\n  const VARIABLE = \"q\";\n  const NUM_SECTIONS = 6;\n  const TOTAL_VALUE = \"18\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with total value\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(TOTAL_VALUE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#fde68a\" : \"#fcd34d\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section variable label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"font-style\", \"italic\")\n        .style(\"fill\", \"#1f2937\")\n        .text(VARIABLE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: q = 3\n- The bar model shows 6 equal sections, each labeled with \"q\"\n- The total value shown is 18\n- Student understands that q represents the value of each of the 6 equal sections"
            }
          }
        },
        {
          "questions": {
            "id": 23794,
            "questionContent": {
              "questionText": "Use the drop-down menus to explain how to solve the equation m + 8 = 32.\n\nFirst, [DROPDOWN1] both sides of the equation. Then, the value of _m_ will be [DROPDOWN2].",
              "explanation": "This question requires students to identify the correct operation to solve m + 8 = 32. To isolate m, students must subtract 8 from both sides: m + 8 - 8 = 32 - 8, which simplifies to m = 24. This reinforces understanding of inverse operations and the balance property of equations.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"m + 8 = 32\";\n  const CORRECT_OPERATION = \"subtract 8 from\";\n  const CORRECT_ANSWER = \"24\";\n\n  const OPERATION_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"add 8 to\", label: \"add 8 to\" },\n    { value: \"subtract 8 from\", label: \"subtract 8 from\" },\n    { value: \"multiply by 8\", label: \"multiply by 8\" },\n    { value: \"divide by 8\", label: \"divide by 8\" },\n  ];\n\n  const ANSWER_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"4\", label: \"4\" },\n    { value: \"24\", label: \"24\" },\n    { value: \"40\", label: \"40\" },\n    { value: \"256\", label: \"256\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      operation: \"\",\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let operationSelect = null;\n  let answerSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      operation: chartState.operation,\n      answer: chartState.answer,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (operationSelect && operationSelect.node().value !== chartState.operation) {\n      operationSelect.node().value = chartState.operation;\n    }\n    if (answerSelect && answerSelect.node().value !== chartState.answer) {\n      answerSelect.node().value = chartState.answer;\n    }\n    if (operationSelect) operationSelect.property(\"disabled\", interactivityLocked);\n    if (answerSelect) answerSelect.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Use the drop-down menus to explain how to solve the equation <strong>${EQUATION}</strong>.`);\n\n    const questionCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const sentenceContainer = questionCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"2\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    sentenceContainer.append(\"span\").text(\"First,\");\n\n    operationSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, operation: this.value };\n        sendChartState();\n      });\n\n    OPERATION_OPTIONS.forEach((opt) => {\n      operationSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\"both sides of the equation. Then, the value of\");\n    sentenceContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"m\");\n    sentenceContainer.append(\"span\").text(\"will be\");\n\n    answerSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    ANSWER_OPTIONS.forEach((opt) => {\n      answerSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\".\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.operation === \"string\") {\n      nextState.operation = incoming.operation;\n    }\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"subtract 8 from\" for the first dropdown\n- Student selects \"24\" for the second dropdown\n- Student understands that subtracting 8 from both sides isolates m\n- Student recognizes that m = 32 - 8 = 24"
            }
          }
        },
        {
          "questions": {
            "id": 23795,
            "questionContent": {
              "questionText": "Use the drop-down menus to explain how to solve the equation n + 12 = 40.\n\nFirst, [DROPDOWN1] both sides of the equation. Then, the value of _n_ will be [DROPDOWN2].",
              "explanation": "This question requires students to identify the correct operation to solve n + 12 = 40. To isolate n, students must subtract 12 from both sides: n + 12 - 12 = 40 - 12, which simplifies to n = 28. This reinforces understanding of inverse operations and the balance property of equations.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"n + 12 = 40\";\n  const CORRECT_OPERATION = \"subtract 12 from\";\n  const CORRECT_ANSWER = \"28\";\n\n  const OPERATION_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"add 12 to\", label: \"add 12 to\" },\n    { value: \"subtract 12 from\", label: \"subtract 12 from\" },\n    { value: \"multiply by 12\", label: \"multiply by 12\" },\n    { value: \"divide by 12\", label: \"divide by 12\" },\n  ];\n\n  const ANSWER_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"28\", label: \"28\" },\n    { value: \"52\", label: \"52\" },\n    { value: \"480\", label: \"480\" },\n    { value: \"3.33\", label: \"3.33\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      operation: \"\",\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let operationSelect = null;\n  let answerSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      operation: chartState.operation,\n      answer: chartState.answer,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (operationSelect && operationSelect.node().value !== chartState.operation) {\n      operationSelect.node().value = chartState.operation;\n    }\n    if (answerSelect && answerSelect.node().value !== chartState.answer) {\n      answerSelect.node().value = chartState.answer;\n    }\n    if (operationSelect) operationSelect.property(\"disabled\", interactivityLocked);\n    if (answerSelect) answerSelect.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Use the drop-down menus to explain how to solve the equation <strong>${EQUATION}</strong>.`);\n\n    const questionCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const sentenceContainer = questionCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"2\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    sentenceContainer.append(\"span\").text(\"First,\");\n\n    operationSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, operation: this.value };\n        sendChartState();\n      });\n\n    OPERATION_OPTIONS.forEach((opt) => {\n      operationSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\"both sides of the equation. Then, the value of\");\n    sentenceContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"m\");\n    sentenceContainer.append(\"span\").text(\"will be\");\n\n    answerSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    ANSWER_OPTIONS.forEach((opt) => {\n      answerSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\".\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.operation === \"string\") {\n      nextState.operation = incoming.operation;\n    }\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"subtract 12 from\" for the first dropdown\n- Student selects \"28\" for the second dropdown\n- Student understands that subtracting 12 from both sides isolates n\n- Student recognizes that n = 40 - 12 = 28"
            }
          }
        },
        {
          "questions": {
            "id": 23800,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _p_ and the solution.\n\np  6 = 48",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for p  6 = 48. To isolate p, students must divide both sides by 6: (p  6)  6 = 48  6, which gives p = 8. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"p  6 = 48\";\n  const CORRECT_ANSWER = \"B\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Multiply by 6 on both sides of the equation. p = 288\" },\n    { id: \"B\", text: \"Divide by 6 on both sides of the equation. p = 8\" },\n    { id: \"C\", text: \"Multiply by 48 on both sides of the equation. p = 2304\" },\n    { id: \"D\", text: \"Divide by 48 on both sides of the equation. p = 1\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>p</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .text(EQUATION);\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Divide by 6 on both sides of the equation. p = 8\"\n- Student understands that division is the inverse operation of multiplication\n- Student recognizes that p  6 = 48 requires dividing both sides by 6\n- Student calculates that 48  6 = 8"
            }
          }
        },
        {
          "questions": {
            "id": 23801,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _r_ and the solution.\n\nr  5 = 35",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for r  5 = 35. To isolate r, students must divide both sides by 5: (r  5)  5 = 35  5, which gives r = 7. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"r  5 = 35\";\n  const CORRECT_ANSWER = \"B\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Multiply by 5 on both sides of the equation. r = 175\" },\n    { id: \"B\", text: \"Divide by 5 on both sides of the equation. r = 7\" },\n    { id: \"C\", text: \"Multiply by 35 on both sides of the equation. r = 1225\" },\n    { id: \"D\", text: \"Divide by 35 on both sides of the equation. r = 1\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>p</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .text(EQUATION);\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Divide by 5 on both sides of the equation. r = 7\"\n- Student understands that division is the inverse operation of multiplication\n- Student recognizes that r  5 = 35 requires dividing both sides by 5\n- Student calculates that 35  5 = 7"
            }
          }
        },
        {
          "questions": {
            "id": 23806,
            "questionContent": {
              "questionText": "At a bakery, a certain number of muffins, _m_, are separated into 3 bags with 5 muffins in each bag.\n\nThe baker uses the equation m/3 = 5 to calculate the total number of muffins, _m_, in the bags.\n\nWhat is the total number of muffins in the bags?",
              "explanation": "This word problem requires students to solve the equation m/3 = 5. The context helps students understand that m (total muffins) divided by 3 (bags) equals 5 (muffins per bag). To find m, students multiply: m = 3  5 = 15 muffins. This reinforces the inverse relationship between division and multiplication.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const PROBLEM_TEXT = `At a bakery, a certain number of muffins, m, are separated into 3 bags with 5 muffins in each bag.\n\nThe baker uses the equation m/3 = 5 to calculate the total number of muffins, m, in the bags.\n\nWhat is the total number of muffins in the bags?`;\n\n  const CORRECT_ANSWER = \"15\";\n  const UNIT = \"muffins\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(UNIT);\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 15 muffins\n- Student understands that m represents the total number of muffins\n- Student recognizes that dividing m by 3 gives 5 muffins per bag\n- Student uses multiplication (3  5) to find the total"
            }
          }
        },
        {
          "questions": {
            "id": 23807,
            "questionContent": {
              "questionText": "At a bakery, a certain number of cookies, _c_, are separated into 4 boxes with 8 cookies in each box.\n\nThe baker uses the equation c/4 = 8 to calculate the total number of cookies, _c_, in the boxes.\n\nWhat is the total number of cookies in the boxes?",
              "explanation": "This word problem requires students to solve the equation c/4 = 8. The context helps students understand that c (total cookies) divided by 4 (boxes) equals 8 (cookies per box). To find c, students multiply: c = 4  8 = 32 cookies. This reinforces the inverse relationship between division and multiplication.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const PROBLEM_TEXT = `At a bakery, a certain number of cookies, c, are separated into 4 boxes with 8 cookies in each box.\n\nThe baker uses the equation c/4 = 8 to calculate the total number of cookies, c, in the boxes.\n\nWhat is the total number of cookies in the boxes?`;\n\n  const CORRECT_ANSWER = \"32\";\n  const UNIT = \"cookies\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(UNIT);\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 32 cookies\n- Student understands that c represents the total number of cookies\n- Student recognizes that dividing c by 4 gives 8 cookies per box\n- Student uses multiplication (4  8) to find the total"
            }
          }
        },
        {
          "questions": {
            "id": 23812,
            "questionContent": {
              "questionText": "Match each solution to the correct equation.",
              "explanation": "This drag-and-match question requires students to solve three one-step equations and match them to their correct solutions:\n- w + 11 = 32: Subtract 11 from both sides  w = 21\n- d/4 = 5: Multiply both sides by 4  d = 20\n- b - 5 = 23: Add 5 to both sides  b = 28\n\nThe question provides extra solution options (12, 18, 35, 43) as distractors, requiring students to accurately solve each equation rather than guess.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATIONS = [\n    { id: \"eq1\", equation: \"w + 11 = 32\", correctAnswer: \"21\" },\n    { id: \"eq2\", equation: \"d/4 = 5\", correctAnswer: \"20\" },\n    { id: \"eq3\", equation: \"b - 5 = 23\", correctAnswer: \"28\" },\n  ];\n\n  const SOLUTION_OPTIONS = [\"\", \"12\", \"18\", \"20\", \"21\", \"28\", \"35\", \"43\"];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      eq1: \"\",\n      eq2: \"\",\n      eq3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let selects = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      matches: chartState,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(selects).forEach((id) => {\n      const select = selects[id];\n      if (select && select.node()) {\n        if (select.node().value !== chartState[id]) {\n          select.node().value = chartState[id];\n        }\n        select.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\"Match each solution to the correct equation.\");\n\n    const matchingCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    EQUATIONS.forEach((eq) => {\n      const row = matchingCard\n        .append(\"div\")\n        .style(\"display\", \"grid\")\n        .style(\"grid-template-columns\", \"1fr auto 1fr\")\n        .style(\"gap\", \"16px\")\n        .style(\"align-items\", \"center\")\n        .style(\"margin-bottom\", \"20px\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#f9fafb\")\n        .style(\"border-radius\", \"8px\");\n\n      row\n        .append(\"div\")\n        .style(\"text-align\", \"center\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"500\")\n        .text(eq.equation);\n\n      row\n        .append(\"div\")\n        .style(\"font-size\", \"24px\")\n        .style(\"color\", \"#9ca3af\")\n        .text(\"\");\n\n      const selectContainer = row.append(\"div\");\n\n      const select = selectContainer\n        .append(\"select\")\n        .style(\"width\", \"100%\")\n        .style(\"padding\", \"10px\")\n        .style(\"font-size\", \"16px\")\n        .style(\"border\", \"1px solid #cbd5e1\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n        .style(\"background\", \"#ffffff\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, [eq.id]: this.value };\n          sendChartState();\n        });\n\n      SOLUTION_OPTIONS.forEach((opt) => {\n        select\n          .append(\"option\")\n          .attr(\"value\", opt)\n          .text(opt || \"Select solution\");\n      });\n\n      selects[eq.id] = select;\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.matches && typeof incoming.matches === \"object\") {\n      Object.keys(nextState).forEach((key) => {\n        if (typeof incoming.matches[key] === \"string\") {\n          nextState[key] = incoming.matches[key];\n        }\n      });\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student correctly matches w + 11 = 32 to 21\n- Student correctly matches d/4 = 5 to 20\n- Student correctly matches b - 5 = 23 to 28\n- Student demonstrates ability to solve three different types of one-step equations\n- Student shows understanding of inverse operations"
            }
          }
        },
        {
          "questions": {
            "id": 23813,
            "questionContent": {
              "questionText": "Match each solution to the correct equation.",
              "explanation": "This drag-and-match question requires students to solve three one-step equations and match them to their correct solutions:\n- r + 15 = 40: Subtract 15 from both sides  r = 25\n- k/5 = 7: Multiply both sides by 5  k = 35\n- n - 8 = 30: Add 8 to both sides  n = 38\n\nThe question provides extra solution options as distractors, requiring students to accurately solve each equation rather than guess.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATIONS = [\n    { id: \"eq1\", equation: \"r + 15 = 40\", correctAnswer: \"25\" },\n    { id: \"eq2\", equation: \"k/5 = 7\", correctAnswer: \"35\" },\n    { id: \"eq3\", equation: \"n - 8 = 30\", correctAnswer: \"38\" },\n  ];\n\n  const SOLUTION_OPTIONS = [\"\", \"15\", \"22\", \"25\", \"30\", \"35\", \"38\", \"45\"];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      eq1: \"\",\n      eq2: \"\",\n      eq3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let selects = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      matches: chartState,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(selects).forEach((id) => {\n      const select = selects[id];\n      if (select && select.node()) {\n        if (select.node().value !== chartState[id]) {\n          select.node().value = chartState[id];\n        }\n        select.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\"Match each solution to the correct equation.\");\n\n    const matchingCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    EQUATIONS.forEach((eq) => {\n      const row = matchingCard\n        .append(\"div\")\n        .style(\"display\", \"grid\")\n        .style(\"grid-template-columns\", \"1fr auto 1fr\")\n        .style(\"gap\", \"16px\")\n        .style(\"align-items\", \"center\")\n        .style(\"margin-bottom\", \"20px\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#f9fafb\")\n        .style(\"border-radius\", \"8px\");\n\n      row\n        .append(\"div\")\n        .style(\"text-align\", \"center\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"500\")\n        .text(eq.equation);\n\n      row\n        .append(\"div\")\n        .style(\"font-size\", \"24px\")\n        .style(\"color\", \"#9ca3af\")\n        .text(\"\");\n\n      const selectContainer = row.append(\"div\");\n\n      const select = selectContainer\n        .append(\"select\")\n        .style(\"width\", \"100%\")\n        .style(\"padding\", \"10px\")\n        .style(\"font-size\", \"16px\")\n        .style(\"border\", \"1px solid #cbd5e1\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n        .style(\"background\", \"#ffffff\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, [eq.id]: this.value };\n          sendChartState();\n        });\n\n      SOLUTION_OPTIONS.forEach((opt) => {\n        select\n          .append(\"option\")\n          .attr(\"value\", opt)\n          .text(opt || \"Select solution\");\n      });\n\n      selects[eq.id] = select;\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.matches && typeof incoming.matches === \"object\") {\n      Object.keys(nextState).forEach((key) => {\n        if (typeof incoming.matches[key] === \"string\") {\n          nextState[key] = incoming.matches[key];\n        }\n      });\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student correctly matches r + 15 = 40 to 25\n- Student correctly matches k/5 = 7 to 35\n- Student correctly matches n - 8 = 30 to 38\n- Student demonstrates ability to solve three different types of one-step equations\n- Student shows understanding of inverse operations"
            }
          }
        },
        {
          "questions": {
            "id": 23818,
            "questionContent": {
              "questionText": "A traffic sign in the shape of an equilateral triangle with side lengths _s_ has a perimeter of 105 centimeters. The equation 3s = 105 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?",
              "explanation": "This word problem requires students to solve the equation 3s = 105. The context helps students understand that an equilateral triangle has 3 equal sides, so 3 times s (side length) equals 105 (total perimeter). To find s, students divide: s = 105  3 = 35 cm. This reinforces the inverse relationship between multiplication and division.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const PROBLEM_TEXT = `A traffic sign in the shape of an equilateral triangle with side lengths s has a perimeter of 105 centimeters. The equation 3s = 105 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?`;\n\n  const CORRECT_ANSWER = \"35\";\n  const UNIT = \"cm\";\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) inputElement.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow.append(\"span\").style(\"font-size\", \"16px\").text(UNIT);\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 35 cm\n- Student understands that s represents the length of one side\n- Student recognizes that 3 (number of sides) times s (side length) equals 105 (perimeter)\n- Student uses division (105  3) to find the side length"
            }
          }
        },
        {
          "questions": {
            "id": 23819,
            "questionContent": {
              "questionText": "A traffic sign in the shape of an equilateral triangle with side lengths _s_ has a perimeter of 120 centimeters. The equation 3s = 120 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?",
              "explanation": "This word problem requires students to solve the equation 3s = 120. The context helps students understand that an equilateral triangle has 3 equal sides, so 3 times s (side length) equals 120 (total perimeter). To find s, students divide: s = 120  3 = 40 cm. This reinforces the inverse relationship between multiplication and division.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const PROBLEM_TEXT = `A traffic sign in the shape of an equilateral triangle with side lengths s has a perimeter of 120 centimeters. The equation 3s = 120 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?`;\n\n  const CORRECT_ANSWER = \"40\";\n  const UNIT = \"cm\";\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) inputElement.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow.append(\"span\").style(\"font-size\", \"16px\").text(UNIT);\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 40 cm\n- Student understands that s represents the length of one side\n- Student recognizes that 3 (number of sides) times s (side length) equals 120 (perimeter)\n- Student uses division (120  3) to find the side length"
            }
          }
        },
        {
          "questions": {
            "id": 23824,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _g_ and the solution.\n\ng - 7 = 64",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for g - 7 = 64. The bar diagram shows g as the total, with 64 in one section and 7 in another. To isolate g, students must add 7 to both sides: g - 7 + 7 = 64 + 7, which gives g = 71. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"g - 7 = 64\";\n  const CORRECT_ANSWER = \"D\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Subtract 7 from both sides of the equation. g = 57\" },\n    { id: \"B\", text: \"Add 64 to both sides of the equation. g = 128\" },\n    { id: \"C\", text: \"Subtract 64 from both sides of the equation. g = 0\" },\n    { id: \"D\", text: \"Add 7 to both sides of the equation. g = 71\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>g</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(EQUATION);\n\n    // Bar diagram (two bars stacked)\n    const svg = equationCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 120)\n      .attr(\"viewBox\", \"0 0 400 120\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    const barX = 100;\n    const topBarY = 20;\n    const bottomBarY = 65;\n    const section1Width = 200;\n    const section2Width = 50;\n    const totalWidth = section1Width + section2Width;\n    const barHeight = 40;\n\n    // Top bar - Section 1 (64 - yellow)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section1Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#fbbf24\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#1f2937\")\n      .text(\"64\");\n\n    // Top bar - Section 2 (7 - blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX + section1Width)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section2Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width + section2Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"7\");\n\n    // Bottom bar - variable g (blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", bottomBarY)\n      .attr(\"width\", totalWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + totalWidth / 2)\n      .attr(\"y\", bottomBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"g\");\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Add 7 to both sides of the equation. g = 71\"\n- Student understands that addition is the inverse operation of subtraction\n- Student recognizes that g - 7 = 64 requires adding 7 to both sides\n- Student calculates that 64 + 7 = 71\n- Student understands the bar diagram showing the relationship"
            }
          }
        },
        {
          "questions": {
            "id": 23825,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _h_ and the solution.\n\nh - 9 = 52",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for h - 9 = 52. The bar diagram shows h as the total, with 52 in one section and 9 in another. To isolate h, students must add 9 to both sides: h - 9 + 9 = 52 + 9, which gives h = 61. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"h - 9 = 52\";\n  const CORRECT_ANSWER = \"D\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Subtract 9 from both sides of the equation. h = 43\" },\n    { id: \"B\", text: \"Add 52 to both sides of the equation. h = 104\" },\n    { id: \"C\", text: \"Subtract 52 from both sides of the equation. h = 0\" },\n    { id: \"D\", text: \"Add 9 to both sides of the equation. h = 61\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>h</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(EQUATION);\n\n    // Bar diagram (two bars stacked)\n    const svg = equationCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 120)\n      .attr(\"viewBox\", \"0 0 400 120\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    const barX = 100;\n    const topBarY = 20;\n    const bottomBarY = 65;\n    const section1Width = 200;\n    const section2Width = 50;\n    const totalWidth = section1Width + section2Width;\n    const barHeight = 40;\n\n    // Top bar - Section 1 (52 - yellow)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section1Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#fbbf24\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#1f2937\")\n      .text(\"52\");\n\n    // Top bar - Section 2 (9 - blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX + section1Width)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section2Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width + section2Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"9\");\n\n    // Bottom bar - variable h (blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", bottomBarY)\n      .attr(\"width\", totalWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + totalWidth / 2)\n      .attr(\"y\", bottomBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"h\");\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Add 9 to both sides of the equation. h = 61\"\n- Student understands that addition is the inverse operation of subtraction\n- Student recognizes that h - 9 = 52 requires adding 9 to both sides\n- Student calculates that 52 + 9 = 61\n- Student understands the bar diagram showing the relationship"
            }
          }
        },
        {
          "questions": {
            "id": 23784,
            "questionContent": {
              "questionText": "What is the value of _w_ in the equation w/5 = 12?\n\nUse the bar model to help you solve for _w_.",
              "explanation": "This question uses a bar model to visualize the equation w/5 = 12. The bar is divided into 5 equal sections, each representing w/5. Since each section equals 12, students can find the total value of w by multiplying: w = 5  12 = 60. This reinforces the inverse relationship between division and multiplication when solving one-step equations.\n\nThe bar model helps students see that:\n- w is the total (the whole bar)\n- When we divide w by 5, we get 12 (each of the 5 equal parts equals 12)\n- To find w, we multiply 5  12 = 60",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"w/5 = 12\";\n  const CORRECT_ANSWER = \"60\";\n  const VARIABLE = \"w\";\n  const NUM_SECTIONS = 5;\n  const SECTION_VALUE = \"12\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with variable\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(VARIABLE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#bfdbfe\" : \"#93c5fd\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section value label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"fill\", \"#1f2937\")\n        .text(SECTION_VALUE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: w = 60\n- The bar model shows 5 equal sections, each labeled with \"12\"\n- Student understands that w represents the total value of all 5 sections combined"
            }
          }
        },
        {
          "questions": {
            "id": 23790,
            "questionContent": {
              "questionText": "What is the value of _r_ in the equation 7r = 21?\n\nUse the bar model to help you solve for _r_.",
              "explanation": "This question uses a bar model to visualize the equation 7r = 21. The bar shows a total value of 21 and is divided into 7 equal sections, each representing r. Since 7 times r equals 21, students can find the value of r by dividing: r = 21  7 = 3. This reinforces the inverse relationship between multiplication and division when solving one-step equations.\n\nThe bar model helps students see that:\n- 21 is the total (the whole bar)\n- When we divide 21 into 7 equal parts, each part equals r\n- To find r, we divide 21  7 = 3",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"7r = 21\";\n  const CORRECT_ANSWER = \"3\";\n  const VARIABLE = \"r\";\n  const NUM_SECTIONS = 7;\n  const TOTAL_VALUE = \"21\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with total value\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(TOTAL_VALUE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#fde68a\" : \"#fcd34d\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section variable label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"font-style\", \"italic\")\n        .style(\"fill\", \"#1f2937\")\n        .text(VARIABLE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: r = 3\n- The bar model shows 7 equal sections, each labeled with \"r\"\n- The total value shown is 21\n- Student understands that r represents the value of each of the 7 equal sections"
            }
          }
        },
        {
          "questions": {
            "id": 23796,
            "questionContent": {
              "questionText": "Use the drop-down menus to explain how to solve the equation k + 15 = 50.\n\nFirst, [DROPDOWN1] both sides of the equation. Then, the value of _k_ will be [DROPDOWN2].",
              "explanation": "This question requires students to identify the correct operation to solve k + 15 = 50. To isolate k, students must subtract 15 from both sides: k + 15 - 15 = 50 - 15, which simplifies to k = 35. This reinforces understanding of inverse operations and the balance property of equations.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"k + 15 = 50\";\n  const CORRECT_OPERATION = \"subtract 15 from\";\n  const CORRECT_ANSWER = \"35\";\n\n  const OPERATION_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"add 15 to\", label: \"add 15 to\" },\n    { value: \"subtract 15 from\", label: \"subtract 15 from\" },\n    { value: \"multiply by 15\", label: \"multiply by 15\" },\n    { value: \"divide by 15\", label: \"divide by 15\" },\n  ];\n\n  const ANSWER_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"35\", label: \"35\" },\n    { value: \"65\", label: \"65\" },\n    { value: \"750\", label: \"750\" },\n    { value: \"3.33\", label: \"3.33\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      operation: \"\",\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let operationSelect = null;\n  let answerSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      operation: chartState.operation,\n      answer: chartState.answer,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (operationSelect && operationSelect.node().value !== chartState.operation) {\n      operationSelect.node().value = chartState.operation;\n    }\n    if (answerSelect && answerSelect.node().value !== chartState.answer) {\n      answerSelect.node().value = chartState.answer;\n    }\n    if (operationSelect) operationSelect.property(\"disabled\", interactivityLocked);\n    if (answerSelect) answerSelect.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Use the drop-down menus to explain how to solve the equation <strong>${EQUATION}</strong>.`);\n\n    const questionCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const sentenceContainer = questionCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"2\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    sentenceContainer.append(\"span\").text(\"First,\");\n\n    operationSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, operation: this.value };\n        sendChartState();\n      });\n\n    OPERATION_OPTIONS.forEach((opt) => {\n      operationSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\"both sides of the equation. Then, the value of\");\n    sentenceContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"m\");\n    sentenceContainer.append(\"span\").text(\"will be\");\n\n    answerSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    ANSWER_OPTIONS.forEach((opt) => {\n      answerSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\".\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.operation === \"string\") {\n      nextState.operation = incoming.operation;\n    }\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"subtract 15 from\" for the first dropdown\n- Student selects \"35\" for the second dropdown\n- Student understands that subtracting 15 from both sides isolates k\n- Student recognizes that k = 50 - 15 = 35"
            }
          }
        },
        {
          "questions": {
            "id": 23802,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _s_ and the solution.\n\ns  7 = 42",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for s  7 = 42. To isolate s, students must divide both sides by 7: (s  7)  7 = 42  7, which gives s = 6. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"s  7 = 42\";\n  const CORRECT_ANSWER = \"B\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Multiply by 7 on both sides of the equation. s = 294\" },\n    { id: \"B\", text: \"Divide by 7 on both sides of the equation. s = 6\" },\n    { id: \"C\", text: \"Multiply by 42 on both sides of the equation. s = 1764\" },\n    { id: \"D\", text: \"Divide by 42 on both sides of the equation. s = 1\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>p</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .text(EQUATION);\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Divide by 7 on both sides of the equation. s = 6\"\n- Student understands that division is the inverse operation of multiplication\n- Student recognizes that s  7 = 42 requires dividing both sides by 7\n- Student calculates that 42  7 = 6"
            }
          }
        },
        {
          "questions": {
            "id": 23808,
            "questionContent": {
              "questionText": "At a bakery, a certain number of cupcakes, _p_, are separated into 5 trays with 6 cupcakes in each tray.\n\nThe baker uses the equation p/5 = 6 to calculate the total number of cupcakes, _p_, in the trays.\n\nWhat is the total number of cupcakes in the trays?",
              "explanation": "This word problem requires students to solve the equation p/5 = 6. The context helps students understand that p (total cupcakes) divided by 5 (trays) equals 6 (cupcakes per tray). To find p, students multiply: p = 5  6 = 30 cupcakes. This reinforces the inverse relationship between division and multiplication.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const PROBLEM_TEXT = `At a bakery, a certain number of cupcakes, p, are separated into 5 trays with 6 cupcakes in each tray.\n\nThe baker uses the equation p/5 = 6 to calculate the total number of cupcakes, p, in the trays.\n\nWhat is the total number of cupcakes in the trays?`;\n\n  const CORRECT_ANSWER = \"30\";\n  const UNIT = \"cupcakes\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(UNIT);\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 30 cupcakes\n- Student understands that p represents the total number of cupcakes\n- Student recognizes that dividing p by 5 gives 6 cupcakes per tray\n- Student uses multiplication (5  6) to find the total"
            }
          }
        },
        {
          "questions": {
            "id": 23814,
            "questionContent": {
              "questionText": "Match each solution to the correct equation.",
              "explanation": "This drag-and-match question requires students to solve three one-step equations and match them to their correct solutions:\n- t + 12 = 35: Subtract 12 from both sides  t = 23\n- m/6 = 8: Multiply both sides by 6  m = 48\n- p - 9 = 25: Add 9 to both sides  p = 34\n\nThe question provides extra solution options as distractors, requiring students to accurately solve each equation rather than guess.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATIONS = [\n    { id: \"eq1\", equation: \"t + 12 = 35\", correctAnswer: \"23\" },\n    { id: \"eq2\", equation: \"m/6 = 8\", correctAnswer: \"48\" },\n    { id: \"eq3\", equation: \"p - 9 = 25\", correctAnswer: \"34\" },\n  ];\n\n  const SOLUTION_OPTIONS = [\"\", \"16\", \"23\", \"26\", \"34\", \"42\", \"48\", \"54\"];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      eq1: \"\",\n      eq2: \"\",\n      eq3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let selects = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      matches: chartState,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(selects).forEach((id) => {\n      const select = selects[id];\n      if (select && select.node()) {\n        if (select.node().value !== chartState[id]) {\n          select.node().value = chartState[id];\n        }\n        select.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\"Match each solution to the correct equation.\");\n\n    const matchingCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    EQUATIONS.forEach((eq) => {\n      const row = matchingCard\n        .append(\"div\")\n        .style(\"display\", \"grid\")\n        .style(\"grid-template-columns\", \"1fr auto 1fr\")\n        .style(\"gap\", \"16px\")\n        .style(\"align-items\", \"center\")\n        .style(\"margin-bottom\", \"20px\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#f9fafb\")\n        .style(\"border-radius\", \"8px\");\n\n      row\n        .append(\"div\")\n        .style(\"text-align\", \"center\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"500\")\n        .text(eq.equation);\n\n      row\n        .append(\"div\")\n        .style(\"font-size\", \"24px\")\n        .style(\"color\", \"#9ca3af\")\n        .text(\"\");\n\n      const selectContainer = row.append(\"div\");\n\n      const select = selectContainer\n        .append(\"select\")\n        .style(\"width\", \"100%\")\n        .style(\"padding\", \"10px\")\n        .style(\"font-size\", \"16px\")\n        .style(\"border\", \"1px solid #cbd5e1\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n        .style(\"background\", \"#ffffff\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, [eq.id]: this.value };\n          sendChartState();\n        });\n\n      SOLUTION_OPTIONS.forEach((opt) => {\n        select\n          .append(\"option\")\n          .attr(\"value\", opt)\n          .text(opt || \"Select solution\");\n      });\n\n      selects[eq.id] = select;\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.matches && typeof incoming.matches === \"object\") {\n      Object.keys(nextState).forEach((key) => {\n        if (typeof incoming.matches[key] === \"string\") {\n          nextState[key] = incoming.matches[key];\n        }\n      });\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student correctly matches t + 12 = 35 to 23\n- Student correctly matches m/6 = 8 to 48\n- Student correctly matches p - 9 = 25 to 34\n- Student demonstrates ability to solve three different types of one-step equations\n- Student shows understanding of inverse operations"
            }
          }
        },
        {
          "questions": {
            "id": 23820,
            "questionContent": {
              "questionText": "A traffic sign in the shape of an equilateral triangle with side lengths _s_ has a perimeter of 90 centimeters. The equation 3s = 90 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?",
              "explanation": "This word problem requires students to solve the equation 3s = 90. The context helps students understand that an equilateral triangle has 3 equal sides, so 3 times s (side length) equals 90 (total perimeter). To find s, students divide: s = 90  3 = 30 cm. This reinforces the inverse relationship between multiplication and division.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const PROBLEM_TEXT = `A traffic sign in the shape of an equilateral triangle with side lengths s has a perimeter of 90 centimeters. The equation 3s = 90 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?`;\n\n  const CORRECT_ANSWER = \"30\";\n  const UNIT = \"cm\";\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) inputElement.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow.append(\"span\").style(\"font-size\", \"16px\").text(UNIT);\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 30 cm\n- Student understands that s represents the length of one side\n- Student recognizes that 3 (number of sides) times s (side length) equals 90 (perimeter)\n- Student uses division (90  3) to find the side length"
            }
          }
        },
        {
          "questions": {
            "id": 23826,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _k_ and the solution.\n\nk - 12 = 48",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for k - 12 = 48. The bar diagram shows k as the total, with 48 in one section and 12 in another. To isolate k, students must add 12 to both sides: k - 12 + 12 = 48 + 12, which gives k = 60. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"k - 12 = 48\";\n  const CORRECT_ANSWER = \"D\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Subtract 12 from both sides of the equation. k = 36\" },\n    { id: \"B\", text: \"Add 48 to both sides of the equation. k = 96\" },\n    { id: \"C\", text: \"Subtract 48 from both sides of the equation. k = 0\" },\n    { id: \"D\", text: \"Add 12 to both sides of the equation. k = 60\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>k</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(EQUATION);\n\n    // Bar diagram (two bars stacked)\n    const svg = equationCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 120)\n      .attr(\"viewBox\", \"0 0 400 120\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    const barX = 100;\n    const topBarY = 20;\n    const bottomBarY = 65;\n    const section1Width = 200;\n    const section2Width = 50;\n    const totalWidth = section1Width + section2Width;\n    const barHeight = 40;\n\n    // Top bar - Section 1 (48 - yellow)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section1Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#fbbf24\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#1f2937\")\n      .text(\"48\");\n\n    // Top bar - Section 2 (12 - blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX + section1Width)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section2Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width + section2Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"12\");\n\n    // Bottom bar - variable k (blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", bottomBarY)\n      .attr(\"width\", totalWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + totalWidth / 2)\n      .attr(\"y\", bottomBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"k\");\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Add 12 to both sides of the equation. k = 60\"\n- Student understands that addition is the inverse operation of subtraction\n- Student recognizes that k - 12 = 48 requires adding 12 to both sides\n- Student calculates that 48 + 12 = 60\n- Student understands the bar diagram showing the relationship"
            }
          }
        },
        {
          "questions": {
            "id": 23785,
            "questionContent": {
              "questionText": "What is the value of _r_ in the equation r/8 = 7?\n\nUse the bar model to help you solve for _r_.",
              "explanation": "This question uses a bar model to visualize the equation r/8 = 7. The bar is divided into 8 equal sections, each representing r/8. Since each section equals 7, students can find the total value of r by multiplying: r = 8  7 = 56. This reinforces the inverse relationship between division and multiplication when solving one-step equations.\n\nThe bar model helps students see that:\n- r is the total (the whole bar)\n- When we divide r by 8, we get 7 (each of the 8 equal parts equals 7)\n- To find r, we multiply 8  7 = 56",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"r/8 = 7\";\n  const CORRECT_ANSWER = \"56\";\n  const VARIABLE = \"r\";\n  const NUM_SECTIONS = 8;\n  const SECTION_VALUE = \"7\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with variable\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(VARIABLE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#bfdbfe\" : \"#93c5fd\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section value label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"fill\", \"#1f2937\")\n        .text(SECTION_VALUE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: r = 56\n- The bar model shows 8 equal sections, each labeled with \"7\"\n- Student understands that r represents the total value of all 8 sections combined"
            }
          }
        },
        {
          "questions": {
            "id": 23791,
            "questionContent": {
              "questionText": "What is the value of _s_ in the equation 9s = 27?\n\nUse the bar model to help you solve for _s_.",
              "explanation": "This question uses a bar model to visualize the equation 9s = 27. The bar shows a total value of 27 and is divided into 9 equal sections, each representing s. Since 9 times s equals 27, students can find the value of s by dividing: s = 27  9 = 3. This reinforces the inverse relationship between multiplication and division when solving one-step equations.\n\nThe bar model helps students see that:\n- 27 is the total (the whole bar)\n- When we divide 27 into 9 equal parts, each part equals s\n- To find s, we divide 27  9 = 3",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"9s = 27\";\n  const CORRECT_ANSWER = \"3\";\n  const VARIABLE = \"s\";\n  const NUM_SECTIONS = 9;\n  const TOTAL_VALUE = \"27\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with total value\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(TOTAL_VALUE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#fde68a\" : \"#fcd34d\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section variable label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"font-style\", \"italic\")\n        .style(\"fill\", \"#1f2937\")\n        .text(VARIABLE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: s = 3\n- The bar model shows 9 equal sections, each labeled with \"s\"\n- The total value shown is 27\n- Student understands that s represents the value of each of the 9 equal sections"
            }
          }
        },
        {
          "questions": {
            "id": 23797,
            "questionContent": {
              "questionText": "Use the drop-down menus to explain how to solve the equation p + 9 = 27.\n\nFirst, [DROPDOWN1] both sides of the equation. Then, the value of _p_ will be [DROPDOWN2].",
              "explanation": "This question requires students to identify the correct operation to solve p + 9 = 27. To isolate p, students must subtract 9 from both sides: p + 9 - 9 = 27 - 9, which simplifies to p = 18. This reinforces understanding of inverse operations and the balance property of equations.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"p + 9 = 27\";\n  const CORRECT_OPERATION = \"subtract 9 from\";\n  const CORRECT_ANSWER = \"18\";\n\n  const OPERATION_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"add 9 to\", label: \"add 9 to\" },\n    { value: \"subtract 9 from\", label: \"subtract 9 from\" },\n    { value: \"multiply by 9\", label: \"multiply by 9\" },\n    { value: \"divide by 9\", label: \"divide by 9\" },\n  ];\n\n  const ANSWER_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"18\", label: \"18\" },\n    { value: \"36\", label: \"36\" },\n    { value: \"243\", label: \"243\" },\n    { value: \"3\", label: \"3\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      operation: \"\",\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let operationSelect = null;\n  let answerSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      operation: chartState.operation,\n      answer: chartState.answer,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (operationSelect && operationSelect.node().value !== chartState.operation) {\n      operationSelect.node().value = chartState.operation;\n    }\n    if (answerSelect && answerSelect.node().value !== chartState.answer) {\n      answerSelect.node().value = chartState.answer;\n    }\n    if (operationSelect) operationSelect.property(\"disabled\", interactivityLocked);\n    if (answerSelect) answerSelect.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Use the drop-down menus to explain how to solve the equation <strong>${EQUATION}</strong>.`);\n\n    const questionCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const sentenceContainer = questionCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"2\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    sentenceContainer.append(\"span\").text(\"First,\");\n\n    operationSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, operation: this.value };\n        sendChartState();\n      });\n\n    OPERATION_OPTIONS.forEach((opt) => {\n      operationSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\"both sides of the equation. Then, the value of\");\n    sentenceContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"m\");\n    sentenceContainer.append(\"span\").text(\"will be\");\n\n    answerSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    ANSWER_OPTIONS.forEach((opt) => {\n      answerSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\".\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.operation === \"string\") {\n      nextState.operation = incoming.operation;\n    }\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"subtract 9 from\" for the first dropdown\n- Student selects \"18\" for the second dropdown\n- Student understands that subtracting 9 from both sides isolates p\n- Student recognizes that p = 27 - 9 = 18"
            }
          }
        },
        {
          "questions": {
            "id": 23803,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _t_ and the solution.\n\nt  9 = 54",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for t  9 = 54. To isolate t, students must divide both sides by 9: (t  9)  9 = 54  9, which gives t = 6. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"t  9 = 54\";\n  const CORRECT_ANSWER = \"B\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Multiply by 9 on both sides of the equation. t = 486\" },\n    { id: \"B\", text: \"Divide by 9 on both sides of the equation. t = 6\" },\n    { id: \"C\", text: \"Multiply by 54 on both sides of the equation. t = 2916\" },\n    { id: \"D\", text: \"Divide by 54 on both sides of the equation. t = 1\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>p</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .text(EQUATION);\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Divide by 9 on both sides of the equation. t = 6\"\n- Student understands that division is the inverse operation of multiplication\n- Student recognizes that t  9 = 54 requires dividing both sides by 9\n- Student calculates that 54  9 = 6"
            }
          }
        },
        {
          "questions": {
            "id": 23809,
            "questionContent": {
              "questionText": "At a bakery, a certain number of brownies, _b_, are separated into 6 containers with 7 brownies in each container.\n\nThe baker uses the equation b/6 = 7 to calculate the total number of brownies, _b_, in the containers.\n\nWhat is the total number of brownies in the containers?",
              "explanation": "This word problem requires students to solve the equation b/6 = 7. The context helps students understand that b (total brownies) divided by 6 (containers) equals 7 (brownies per container). To find b, students multiply: b = 6  7 = 42 brownies. This reinforces the inverse relationship between division and multiplication.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const PROBLEM_TEXT = `At a bakery, a certain number of brownies, b, are separated into 6 containers with 7 brownies in each container.\n\nThe baker uses the equation b/6 = 7 to calculate the total number of brownies, b, in the containers.\n\nWhat is the total number of brownies in the containers?`;\n\n  const CORRECT_ANSWER = \"42\";\n  const UNIT = \"brownies\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(UNIT);\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 42 brownies\n- Student understands that b represents the total number of brownies\n- Student recognizes that dividing b by 6 gives 7 brownies per container\n- Student uses multiplication (6  7) to find the total"
            }
          }
        },
        {
          "questions": {
            "id": 23815,
            "questionContent": {
              "questionText": "Match each solution to the correct equation.",
              "explanation": "This drag-and-match question requires students to solve three one-step equations and match them to their correct solutions:\n- s + 18 = 45: Subtract 18 from both sides  s = 27\n- q/7 = 9: Multiply both sides by 7  q = 63\n- v - 12 = 36: Add 12 to both sides  v = 48\n\nThe question provides extra solution options as distractors, requiring students to accurately solve each equation rather than guess.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATIONS = [\n    { id: \"eq1\", equation: \"s + 18 = 45\", correctAnswer: \"27\" },\n    { id: \"eq2\", equation: \"q/7 = 9\", correctAnswer: \"63\" },\n    { id: \"eq3\", equation: \"v - 12 = 36\", correctAnswer: \"48\" },\n  ];\n\n  const SOLUTION_OPTIONS = [\"\", \"21\", \"27\", \"33\", \"48\", \"54\", \"63\", \"72\"];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      eq1: \"\",\n      eq2: \"\",\n      eq3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let selects = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      matches: chartState,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(selects).forEach((id) => {\n      const select = selects[id];\n      if (select && select.node()) {\n        if (select.node().value !== chartState[id]) {\n          select.node().value = chartState[id];\n        }\n        select.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\"Match each solution to the correct equation.\");\n\n    const matchingCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    EQUATIONS.forEach((eq) => {\n      const row = matchingCard\n        .append(\"div\")\n        .style(\"display\", \"grid\")\n        .style(\"grid-template-columns\", \"1fr auto 1fr\")\n        .style(\"gap\", \"16px\")\n        .style(\"align-items\", \"center\")\n        .style(\"margin-bottom\", \"20px\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#f9fafb\")\n        .style(\"border-radius\", \"8px\");\n\n      row\n        .append(\"div\")\n        .style(\"text-align\", \"center\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"500\")\n        .text(eq.equation);\n\n      row\n        .append(\"div\")\n        .style(\"font-size\", \"24px\")\n        .style(\"color\", \"#9ca3af\")\n        .text(\"\");\n\n      const selectContainer = row.append(\"div\");\n\n      const select = selectContainer\n        .append(\"select\")\n        .style(\"width\", \"100%\")\n        .style(\"padding\", \"10px\")\n        .style(\"font-size\", \"16px\")\n        .style(\"border\", \"1px solid #cbd5e1\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n        .style(\"background\", \"#ffffff\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, [eq.id]: this.value };\n          sendChartState();\n        });\n\n      SOLUTION_OPTIONS.forEach((opt) => {\n        select\n          .append(\"option\")\n          .attr(\"value\", opt)\n          .text(opt || \"Select solution\");\n      });\n\n      selects[eq.id] = select;\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.matches && typeof incoming.matches === \"object\") {\n      Object.keys(nextState).forEach((key) => {\n        if (typeof incoming.matches[key] === \"string\") {\n          nextState[key] = incoming.matches[key];\n        }\n      });\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student correctly matches s + 18 = 45 to 27\n- Student correctly matches q/7 = 9 to 63\n- Student correctly matches v - 12 = 36 to 48\n- Student demonstrates ability to solve three different types of one-step equations\n- Student shows understanding of inverse operations"
            }
          }
        },
        {
          "questions": {
            "id": 23821,
            "questionContent": {
              "questionText": "A traffic sign in the shape of an equilateral triangle with side lengths _s_ has a perimeter of 135 centimeters. The equation 3s = 135 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?",
              "explanation": "This word problem requires students to solve the equation 3s = 135. The context helps students understand that an equilateral triangle has 3 equal sides, so 3 times s (side length) equals 135 (total perimeter). To find s, students divide: s = 135  3 = 45 cm. This reinforces the inverse relationship between multiplication and division.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const PROBLEM_TEXT = `A traffic sign in the shape of an equilateral triangle with side lengths s has a perimeter of 135 centimeters. The equation 3s = 135 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?`;\n\n  const CORRECT_ANSWER = \"45\";\n  const UNIT = \"cm\";\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) inputElement.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow.append(\"span\").style(\"font-size\", \"16px\").text(UNIT);\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 45 cm\n- Student understands that s represents the length of one side\n- Student recognizes that 3 (number of sides) times s (side length) equals 135 (perimeter)\n- Student uses division (135  3) to find the side length"
            }
          }
        },
        {
          "questions": {
            "id": 23827,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _m_ and the solution.\n\nm - 8 = 35",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for m - 8 = 35. The bar diagram shows m as the total, with 35 in one section and 8 in another. To isolate m, students must add 8 to both sides: m - 8 + 8 = 35 + 8, which gives m = 43. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"m - 8 = 35\";\n  const CORRECT_ANSWER = \"D\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Subtract 8 from both sides of the equation. m = 27\" },\n    { id: \"B\", text: \"Add 35 to both sides of the equation. m = 70\" },\n    { id: \"C\", text: \"Subtract 35 from both sides of the equation. m = 0\" },\n    { id: \"D\", text: \"Add 8 to both sides of the equation. m = 43\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>m</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(EQUATION);\n\n    // Bar diagram (two bars stacked)\n    const svg = equationCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 120)\n      .attr(\"viewBox\", \"0 0 400 120\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    const barX = 100;\n    const topBarY = 20;\n    const bottomBarY = 65;\n    const section1Width = 200;\n    const section2Width = 50;\n    const totalWidth = section1Width + section2Width;\n    const barHeight = 40;\n\n    // Top bar - Section 1 (35 - yellow)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section1Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#fbbf24\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#1f2937\")\n      .text(\"35\");\n\n    // Top bar - Section 2 (8 - blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX + section1Width)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section2Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width + section2Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"8\");\n\n    // Bottom bar - variable m (blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", bottomBarY)\n      .attr(\"width\", totalWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + totalWidth / 2)\n      .attr(\"y\", bottomBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"m\");\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Add 8 to both sides of the equation. m = 43\"\n- Student understands that addition is the inverse operation of subtraction\n- Student recognizes that m - 8 = 35 requires adding 8 to both sides\n- Student calculates that 35 + 8 = 43\n- Student understands the bar diagram showing the relationship"
            }
          }
        },
        {
          "questions": {
            "id": 23786,
            "questionContent": {
              "questionText": "What is the value of _k_ in the equation k/9 = 6?\n\nUse the bar model to help you solve for _k_.",
              "explanation": "This question uses a bar model to visualize the equation k/9 = 6. The bar is divided into 9 equal sections, each representing k/9. Since each section equals 6, students can find the total value of k by multiplying: k = 9  6 = 54. This reinforces the inverse relationship between division and multiplication when solving one-step equations.\n\nThe bar model helps students see that:\n- k is the total (the whole bar)\n- When we divide k by 9, we get 6 (each of the 9 equal parts equals 6)\n- To find k, we multiply 9  6 = 54",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"k/9 = 6\";\n  const CORRECT_ANSWER = \"54\";\n  const VARIABLE = \"k\";\n  const NUM_SECTIONS = 9;\n  const SECTION_VALUE = \"6\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with variable\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(VARIABLE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#bfdbfe\" : \"#93c5fd\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section value label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"fill\", \"#1f2937\")\n        .text(SECTION_VALUE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: k = 54\n- The bar model shows 9 equal sections, each labeled with \"6\"\n- Student understands that k represents the total value of all 9 sections combined"
            }
          }
        },
        {
          "questions": {
            "id": 23792,
            "questionContent": {
              "questionText": "What is the value of _t_ in the equation 5t = 35?\n\nUse the bar model to help you solve for _t_.",
              "explanation": "This question uses a bar model to visualize the equation 5t = 35. The bar shows a total value of 35 and is divided into 5 equal sections, each representing t. Since 5 times t equals 35, students can find the value of t by dividing: t = 35  5 = 7. This reinforces the inverse relationship between multiplication and division when solving one-step equations.\n\nThe bar model helps students see that:\n- 35 is the total (the whole bar)\n- When we divide 35 into 5 equal parts, each part equals t\n- To find t, we divide 35  5 = 7",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"5t = 35\";\n  const CORRECT_ANSWER = \"7\";\n  const VARIABLE = \"t\";\n  const NUM_SECTIONS = 5;\n  const TOTAL_VALUE = \"35\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with total value\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(TOTAL_VALUE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#fde68a\" : \"#fcd34d\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section variable label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"font-style\", \"italic\")\n        .style(\"fill\", \"#1f2937\")\n        .text(VARIABLE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: t = 7\n- The bar model shows 5 equal sections, each labeled with \"t\"\n- The total value shown is 35\n- Student understands that t represents the value of each of the 5 equal sections"
            }
          }
        },
        {
          "questions": {
            "id": 23798,
            "questionContent": {
              "questionText": "Use the drop-down menus to explain how to solve the equation w + 7 = 35.\n\nFirst, [DROPDOWN1] both sides of the equation. Then, the value of _w_ will be [DROPDOWN2].",
              "explanation": "This question requires students to identify the correct operation to solve w + 7 = 35. To isolate w, students must subtract 7 from both sides: w + 7 - 7 = 35 - 7, which simplifies to w = 28. This reinforces understanding of inverse operations and the balance property of equations.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"w + 7 = 35\";\n  const CORRECT_OPERATION = \"subtract 7 from\";\n  const CORRECT_ANSWER = \"28\";\n\n  const OPERATION_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"add 7 to\", label: \"add 7 to\" },\n    { value: \"subtract 7 from\", label: \"subtract 7 from\" },\n    { value: \"multiply by 7\", label: \"multiply by 7\" },\n    { value: \"divide by 7\", label: \"divide by 7\" },\n  ];\n\n  const ANSWER_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"28\", label: \"28\" },\n    { value: \"42\", label: \"42\" },\n    { value: \"245\", label: \"245\" },\n    { value: \"5\", label: \"5\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      operation: \"\",\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let operationSelect = null;\n  let answerSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      operation: chartState.operation,\n      answer: chartState.answer,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (operationSelect && operationSelect.node().value !== chartState.operation) {\n      operationSelect.node().value = chartState.operation;\n    }\n    if (answerSelect && answerSelect.node().value !== chartState.answer) {\n      answerSelect.node().value = chartState.answer;\n    }\n    if (operationSelect) operationSelect.property(\"disabled\", interactivityLocked);\n    if (answerSelect) answerSelect.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Use the drop-down menus to explain how to solve the equation <strong>${EQUATION}</strong>.`);\n\n    const questionCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const sentenceContainer = questionCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"2\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    sentenceContainer.append(\"span\").text(\"First,\");\n\n    operationSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, operation: this.value };\n        sendChartState();\n      });\n\n    OPERATION_OPTIONS.forEach((opt) => {\n      operationSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\"both sides of the equation. Then, the value of\");\n    sentenceContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"m\");\n    sentenceContainer.append(\"span\").text(\"will be\");\n\n    answerSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    ANSWER_OPTIONS.forEach((opt) => {\n      answerSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\".\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.operation === \"string\") {\n      nextState.operation = incoming.operation;\n    }\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"subtract 7 from\" for the first dropdown\n- Student selects \"28\" for the second dropdown\n- Student understands that subtracting 7 from both sides isolates w\n- Student recognizes that w = 35 - 7 = 28"
            }
          }
        },
        {
          "questions": {
            "id": 23804,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _w_ and the solution.\n\nw  4 = 32",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for w  4 = 32. To isolate w, students must divide both sides by 4: (w  4)  4 = 32  4, which gives w = 8. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"w  4 = 32\";\n  const CORRECT_ANSWER = \"B\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Multiply by 4 on both sides of the equation. w = 128\" },\n    { id: \"B\", text: \"Divide by 4 on both sides of the equation. w = 8\" },\n    { id: \"C\", text: \"Multiply by 32 on both sides of the equation. w = 1024\" },\n    { id: \"D\", text: \"Divide by 32 on both sides of the equation. w = 1\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>p</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .text(EQUATION);\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Divide by 4 on both sides of the equation. w = 8\"\n- Student understands that division is the inverse operation of multiplication\n- Student recognizes that w  4 = 32 requires dividing both sides by 4\n- Student calculates that 32  4 = 8"
            }
          }
        },
        {
          "questions": {
            "id": 23810,
            "questionContent": {
              "questionText": "At a bakery, a certain number of donuts, _d_, are separated into 8 boxes with 9 donuts in each box.\n\nThe baker uses the equation d/8 = 9 to calculate the total number of donuts, _d_, in the boxes.\n\nWhat is the total number of donuts in the boxes?",
              "explanation": "This word problem requires students to solve the equation d/8 = 9. The context helps students understand that d (total donuts) divided by 8 (boxes) equals 9 (donuts per box). To find d, students multiply: d = 8  9 = 72 donuts. This reinforces the inverse relationship between division and multiplication.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const PROBLEM_TEXT = `At a bakery, a certain number of donuts, d, are separated into 8 boxes with 9 donuts in each box.\n\nThe baker uses the equation d/8 = 9 to calculate the total number of donuts, d, in the boxes.\n\nWhat is the total number of donuts in the boxes?`;\n\n  const CORRECT_ANSWER = \"72\";\n  const UNIT = \"donuts\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(UNIT);\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 72 donuts\n- Student understands that d represents the total number of donuts\n- Student recognizes that dividing d by 8 gives 9 donuts per box\n- Student uses multiplication (8  9) to find the total"
            }
          }
        },
        {
          "questions": {
            "id": 23816,
            "questionContent": {
              "questionText": "Match each solution to the correct equation.",
              "explanation": "This drag-and-match question requires students to solve three one-step equations and match them to their correct solutions:\n- x + 14 = 50: Subtract 14 from both sides  x = 36\n- y/8 = 6: Multiply both sides by 8  y = 48\n- z - 7 = 28: Add 7 to both sides  z = 35\n\nThe question provides extra solution options as distractors, requiring students to accurately solve each equation rather than guess.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATIONS = [\n    { id: \"eq1\", equation: \"x + 14 = 50\", correctAnswer: \"36\" },\n    { id: \"eq2\", equation: \"y/8 = 6\", correctAnswer: \"48\" },\n    { id: \"eq3\", equation: \"z - 7 = 28\", correctAnswer: \"35\" },\n  ];\n\n  const SOLUTION_OPTIONS = [\"\", \"28\", \"35\", \"36\", \"42\", \"48\", \"54\", \"64\"];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      eq1: \"\",\n      eq2: \"\",\n      eq3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let selects = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      matches: chartState,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(selects).forEach((id) => {\n      const select = selects[id];\n      if (select && select.node()) {\n        if (select.node().value !== chartState[id]) {\n          select.node().value = chartState[id];\n        }\n        select.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\"Match each solution to the correct equation.\");\n\n    const matchingCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    EQUATIONS.forEach((eq) => {\n      const row = matchingCard\n        .append(\"div\")\n        .style(\"display\", \"grid\")\n        .style(\"grid-template-columns\", \"1fr auto 1fr\")\n        .style(\"gap\", \"16px\")\n        .style(\"align-items\", \"center\")\n        .style(\"margin-bottom\", \"20px\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#f9fafb\")\n        .style(\"border-radius\", \"8px\");\n\n      row\n        .append(\"div\")\n        .style(\"text-align\", \"center\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"500\")\n        .text(eq.equation);\n\n      row\n        .append(\"div\")\n        .style(\"font-size\", \"24px\")\n        .style(\"color\", \"#9ca3af\")\n        .text(\"\");\n\n      const selectContainer = row.append(\"div\");\n\n      const select = selectContainer\n        .append(\"select\")\n        .style(\"width\", \"100%\")\n        .style(\"padding\", \"10px\")\n        .style(\"font-size\", \"16px\")\n        .style(\"border\", \"1px solid #cbd5e1\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n        .style(\"background\", \"#ffffff\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, [eq.id]: this.value };\n          sendChartState();\n        });\n\n      SOLUTION_OPTIONS.forEach((opt) => {\n        select\n          .append(\"option\")\n          .attr(\"value\", opt)\n          .text(opt || \"Select solution\");\n      });\n\n      selects[eq.id] = select;\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.matches && typeof incoming.matches === \"object\") {\n      Object.keys(nextState).forEach((key) => {\n        if (typeof incoming.matches[key] === \"string\") {\n          nextState[key] = incoming.matches[key];\n        }\n      });\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student correctly matches x + 14 = 50 to 36\n- Student correctly matches y/8 = 6 to 48\n- Student correctly matches z - 7 = 28 to 35\n- Student demonstrates ability to solve three different types of one-step equations\n- Student shows understanding of inverse operations"
            }
          }
        },
        {
          "questions": {
            "id": 23822,
            "questionContent": {
              "questionText": "A traffic sign in the shape of an equilateral triangle with side lengths _s_ has a perimeter of 75 centimeters. The equation 3s = 75 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?",
              "explanation": "This word problem requires students to solve the equation 3s = 75. The context helps students understand that an equilateral triangle has 3 equal sides, so 3 times s (side length) equals 75 (total perimeter). To find s, students divide: s = 75  3 = 25 cm. This reinforces the inverse relationship between multiplication and division.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const PROBLEM_TEXT = `A traffic sign in the shape of an equilateral triangle with side lengths s has a perimeter of 75 centimeters. The equation 3s = 75 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?`;\n\n  const CORRECT_ANSWER = \"25\";\n  const UNIT = \"cm\";\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) inputElement.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow.append(\"span\").style(\"font-size\", \"16px\").text(UNIT);\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 25 cm\n- Student understands that s represents the length of one side\n- Student recognizes that 3 (number of sides) times s (side length) equals 75 (perimeter)\n- Student uses division (75  3) to find the side length"
            }
          }
        },
        {
          "questions": {
            "id": 23828,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _n_ and the solution.\n\nn - 15 = 56",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for n - 15 = 56. The bar diagram shows n as the total, with 56 in one section and 15 in another. To isolate n, students must add 15 to both sides: n - 15 + 15 = 56 + 15, which gives n = 71. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"n - 15 = 56\";\n  const CORRECT_ANSWER = \"D\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Subtract 15 from both sides of the equation. n = 41\" },\n    { id: \"B\", text: \"Add 56 to both sides of the equation. n = 112\" },\n    { id: \"C\", text: \"Subtract 56 from both sides of the equation. n = 0\" },\n    { id: \"D\", text: \"Add 15 to both sides of the equation. n = 71\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>n</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(EQUATION);\n\n    // Bar diagram (two bars stacked)\n    const svg = equationCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 120)\n      .attr(\"viewBox\", \"0 0 400 120\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    const barX = 100;\n    const topBarY = 20;\n    const bottomBarY = 65;\n    const section1Width = 200;\n    const section2Width = 50;\n    const totalWidth = section1Width + section2Width;\n    const barHeight = 40;\n\n    // Top bar - Section 1 (56 - yellow)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section1Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#fbbf24\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#1f2937\")\n      .text(\"56\");\n\n    // Top bar - Section 2 (15 - blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX + section1Width)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section2Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width + section2Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"15\");\n\n    // Bottom bar - variable n (blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", bottomBarY)\n      .attr(\"width\", totalWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + totalWidth / 2)\n      .attr(\"y\", bottomBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"n\");\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Add 15 to both sides of the equation. n = 71\"\n- Student understands that addition is the inverse operation of subtraction\n- Student recognizes that n - 15 = 56 requires adding 15 to both sides\n- Student calculates that 56 + 15 = 71\n- Student understands the bar diagram showing the relationship"
            }
          }
        },
        {
          "questions": {
            "id": 23787,
            "questionContent": {
              "questionText": "What is the value of _m_ in the equation m/4 = 15?\n\nUse the bar model to help you solve for _m_.",
              "explanation": "This question uses a bar model to visualize the equation m/4 = 15. The bar is divided into 4 equal sections, each representing m/4. Since each section equals 15, students can find the total value of m by multiplying: m = 4  15 = 60. This reinforces the inverse relationship between division and multiplication when solving one-step equations.\n\nThe bar model helps students see that:\n- m is the total (the whole bar)\n- When we divide m by 4, we get 15 (each of the 4 equal parts equals 15)\n- To find m, we multiply 4  15 = 60",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"m/4 = 15\";\n  const CORRECT_ANSWER = \"60\";\n  const VARIABLE = \"m\";\n  const NUM_SECTIONS = 4;\n  const SECTION_VALUE = \"15\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with variable\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(VARIABLE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#bfdbfe\" : \"#93c5fd\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section value label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"fill\", \"#1f2937\")\n        .text(SECTION_VALUE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: m = 60\n- The bar model shows 4 equal sections, each labeled with \"15\"\n- Student understands that m represents the total value of all 4 sections combined"
            }
          }
        },
        {
          "questions": {
            "id": 23793,
            "questionContent": {
              "questionText": "What is the value of _w_ in the equation 4w = 28?\n\nUse the bar model to help you solve for _w_.",
              "explanation": "This question uses a bar model to visualize the equation 4w = 28. The bar shows a total value of 28 and is divided into 4 equal sections, each representing w. Since 4 times w equals 28, students can find the value of w by dividing: w = 28  4 = 7. This reinforces the inverse relationship between multiplication and division when solving one-step equations.\n\nThe bar model helps students see that:\n- 28 is the total (the whole bar)\n- When we divide 28 into 4 equal parts, each part equals w\n- To find w, we divide 28  4 = 7",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const EQUATION = \"4w = 28\";\n  const CORRECT_ANSWER = \"7\";\n  const VARIABLE = \"w\";\n  const NUM_SECTIONS = 4;\n  const TOTAL_VALUE = \"28\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`What is the value of <em>${VARIABLE}</em> in the equation <strong>${EQUATION}</strong>?`);\n\n    // === Bar Model Card ===\n    const barModelCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    const svg = barModelCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 150)\n      .attr(\"viewBox\", \"0 0 700 150\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    // Draw bar model (two bars stacked)\n    const barX = 50;\n    const topBarY = 40;\n    const bottomBarY = 85;\n    const barWidth = 600;\n    const barHeight = 40;\n    const sectionWidth = barWidth / NUM_SECTIONS;\n\n    // Top bar - single bar labeled with total value\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", barWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + barWidth / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(TOTAL_VALUE);\n\n    // Bottom bar - divided into sections\n    for (let i = 0; i < NUM_SECTIONS; i++) {\n      const x = barX + i * sectionWidth;\n\n      // Section rectangle\n      svg\n        .append(\"rect\")\n        .attr(\"x\", x)\n        .attr(\"y\", bottomBarY)\n        .attr(\"width\", sectionWidth)\n        .attr(\"height\", barHeight)\n        .style(\"fill\", i % 2 === 0 ? \"#fde68a\" : \"#fcd34d\")\n        .style(\"stroke\", \"#1f2937\")\n        .style(\"stroke-width\", 2);\n\n      // Section variable label\n      svg\n        .append(\"text\")\n        .attr(\"x\", x + sectionWidth / 2)\n        .attr(\"y\", bottomBarY + barHeight / 2)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"dominant-baseline\", \"middle\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"font-style\", \"italic\")\n        .style(\"fill\", \"#1f2937\")\n        .text(VARIABLE);\n\n      // Dashed dividers (except after last section)\n      if (i < NUM_SECTIONS - 1) {\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x + sectionWidth)\n          .attr(\"y1\", bottomBarY)\n          .attr(\"x2\", x + sectionWidth)\n          .attr(\"y2\", bottomBarY + barHeight)\n          .style(\"stroke\", \"#1f2937\")\n          .style(\"stroke-width\", 2)\n          .style(\"stroke-dasharray\", \"5,5\");\n      }\n    }\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .html(`${VARIABLE} =`);\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: w = 7\n- The bar model shows 4 equal sections, each labeled with \"w\"\n- The total value shown is 28\n- Student understands that w represents the value of each of the 4 equal sections"
            }
          }
        },
        {
          "questions": {
            "id": 23799,
            "questionContent": {
              "questionText": "Use the drop-down menus to explain how to solve the equation r + 11 = 45.\n\nFirst, [DROPDOWN1] both sides of the equation. Then, the value of _r_ will be [DROPDOWN2].",
              "explanation": "This question requires students to identify the correct operation to solve r + 11 = 45. To isolate r, students must subtract 11 from both sides: r + 11 - 11 = 45 - 11, which simplifies to r = 34. This reinforces understanding of inverse operations and the balance property of equations.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"r + 11 = 45\";\n  const CORRECT_OPERATION = \"subtract 11 from\";\n  const CORRECT_ANSWER = \"34\";\n\n  const OPERATION_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"add 11 to\", label: \"add 11 to\" },\n    { value: \"subtract 11 from\", label: \"subtract 11 from\" },\n    { value: \"multiply by 11\", label: \"multiply by 11\" },\n    { value: \"divide by 11\", label: \"divide by 11\" },\n  ];\n\n  const ANSWER_OPTIONS = [\n    { value: \"\", label: \"\" },\n    { value: \"34\", label: \"34\" },\n    { value: \"56\", label: \"56\" },\n    { value: \"495\", label: \"495\" },\n    { value: \"4.09\", label: \"4.09\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      operation: \"\",\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let operationSelect = null;\n  let answerSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      operation: chartState.operation,\n      answer: chartState.answer,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (operationSelect && operationSelect.node().value !== chartState.operation) {\n      operationSelect.node().value = chartState.operation;\n    }\n    if (answerSelect && answerSelect.node().value !== chartState.answer) {\n      answerSelect.node().value = chartState.answer;\n    }\n    if (operationSelect) operationSelect.property(\"disabled\", interactivityLocked);\n    if (answerSelect) answerSelect.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Use the drop-down menus to explain how to solve the equation <strong>${EQUATION}</strong>.`);\n\n    const questionCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const sentenceContainer = questionCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"2\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    sentenceContainer.append(\"span\").text(\"First,\");\n\n    operationSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, operation: this.value };\n        sendChartState();\n      });\n\n    OPERATION_OPTIONS.forEach((opt) => {\n      operationSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\"both sides of the equation. Then, the value of\");\n    sentenceContainer.append(\"span\").style(\"font-style\", \"italic\").text(\"m\");\n    sentenceContainer.append(\"span\").text(\"will be\");\n\n    answerSelect = sentenceContainer\n      .append(\"select\")\n      .style(\"padding\", \"6px 12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"change\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    ANSWER_OPTIONS.forEach((opt) => {\n      answerSelect\n        .append(\"option\")\n        .attr(\"value\", opt.value)\n        .text(opt.label);\n    });\n\n    sentenceContainer.append(\"span\").text(\".\");\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.operation === \"string\") {\n      nextState.operation = incoming.operation;\n    }\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"subtract 11 from\" for the first dropdown\n- Student selects \"34\" for the second dropdown\n- Student understands that subtracting 11 from both sides isolates r\n- Student recognizes that r = 45 - 11 = 34"
            }
          }
        },
        {
          "questions": {
            "id": 23805,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _k_ and the solution.\n\nk  8 = 56",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for k  8 = 56. To isolate k, students must divide both sides by 8: (k  8)  8 = 56  8, which gives k = 7. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"k  8 = 56\";\n  const CORRECT_ANSWER = \"B\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Multiply by 8 on both sides of the equation. k = 448\" },\n    { id: \"B\", text: \"Divide by 8 on both sides of the equation. k = 7\" },\n    { id: \"C\", text: \"Multiply by 56 on both sides of the equation. k = 3136\" },\n    { id: \"D\", text: \"Divide by 56 on both sides of the equation. k = 1\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>p</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .text(EQUATION);\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Divide by 8 on both sides of the equation. k = 7\"\n- Student understands that division is the inverse operation of multiplication\n- Student recognizes that k  8 = 56 requires dividing both sides by 8\n- Student calculates that 56  8 = 7"
            }
          }
        },
        {
          "questions": {
            "id": 23811,
            "questionContent": {
              "questionText": "At a bakery, a certain number of croissants, _r_, are separated into 7 bags with 4 croissants in each bag.\n\nThe baker uses the equation r/7 = 4 to calculate the total number of croissants, _r_, in the bags.\n\nWhat is the total number of croissants in the bags?",
              "explanation": "This word problem requires students to solve the equation r/7 = 4. The context helps students understand that r (total croissants) divided by 7 (bags) equals 4 (croissants per bag). To find r, students multiply: r = 7  4 = 28 croissants. This reinforces the inverse relationship between division and multiplication.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // CONFIGURATION\n  // ============================================================\n\n  const PROBLEM_TEXT = `At a bakery, a certain number of croissants, r, are separated into 7 bags with 4 croissants in each bag.\n\nThe baker uses the equation r/7 = 4 to calculate the total number of croissants, r, in the bags.\n\nWhat is the total number of croissants in the bags?`;\n\n  const CORRECT_ANSWER = \"28\";\n  const UNIT = \"croissants\";\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  // ============================================================\n  // STATE MANAGEMENT\n  // ============================================================\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  // ============================================================\n  // UTILITIES\n  // ============================================================\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n\n    const videoContainer = accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\");\n\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // RENDERING\n  // ============================================================\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) {\n      inputElement.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // === Emoji + Intro Card Row ===\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    // === Answer Input Card ===\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow\n      .append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(UNIT);\n\n    // === Video Accordion ===\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 28 croissants\n- Student understands that r represents the total number of croissants\n- Student recognizes that dividing r by 7 gives 4 croissants per bag\n- Student uses multiplication (7  4) to find the total"
            }
          }
        },
        {
          "questions": {
            "id": 23817,
            "questionContent": {
              "questionText": "Match each solution to the correct equation.",
              "explanation": "This drag-and-match question requires students to solve three one-step equations and match them to their correct solutions:\n- a + 16 = 48: Subtract 16 from both sides  a = 32\n- c/9 = 5: Multiply both sides by 9  c = 45\n- e - 11 = 34: Add 11 to both sides  e = 45\n\nThe question provides extra solution options as distractors, requiring students to accurately solve each equation rather than guess.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATIONS = [\n    { id: \"eq1\", equation: \"a + 16 = 48\", correctAnswer: \"32\" },\n    { id: \"eq2\", equation: \"c/9 = 5\", correctAnswer: \"45\" },\n    { id: \"eq3\", equation: \"e - 11 = 34\", correctAnswer: \"45\" },\n  ];\n\n  const SOLUTION_OPTIONS = [\"\", \"23\", \"32\", \"37\", \"40\", \"45\", \"53\", \"81\"];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      eq1: \"\",\n      eq2: \"\",\n      eq3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let selects = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      matches: chartState,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(selects).forEach((id) => {\n      const select = selects[id];\n      if (select && select.node()) {\n        if (select.node().value !== chartState[id]) {\n          select.node().value = chartState[id];\n        }\n        select.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\"Match each solution to the correct equation.\");\n\n    const matchingCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    EQUATIONS.forEach((eq) => {\n      const row = matchingCard\n        .append(\"div\")\n        .style(\"display\", \"grid\")\n        .style(\"grid-template-columns\", \"1fr auto 1fr\")\n        .style(\"gap\", \"16px\")\n        .style(\"align-items\", \"center\")\n        .style(\"margin-bottom\", \"20px\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#f9fafb\")\n        .style(\"border-radius\", \"8px\");\n\n      row\n        .append(\"div\")\n        .style(\"text-align\", \"center\")\n        .style(\"padding\", \"12px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"500\")\n        .text(eq.equation);\n\n      row\n        .append(\"div\")\n        .style(\"font-size\", \"24px\")\n        .style(\"color\", \"#9ca3af\")\n        .text(\"\");\n\n      const selectContainer = row.append(\"div\");\n\n      const select = selectContainer\n        .append(\"select\")\n        .style(\"width\", \"100%\")\n        .style(\"padding\", \"10px\")\n        .style(\"font-size\", \"16px\")\n        .style(\"border\", \"1px solid #cbd5e1\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n        .style(\"background\", \"#ffffff\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, [eq.id]: this.value };\n          sendChartState();\n        });\n\n      SOLUTION_OPTIONS.forEach((opt) => {\n        select\n          .append(\"option\")\n          .attr(\"value\", opt)\n          .text(opt || \"Select solution\");\n      });\n\n      selects[eq.id] = select;\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (incoming.matches && typeof incoming.matches === \"object\") {\n      Object.keys(nextState).forEach((key) => {\n        if (typeof incoming.matches[key] === \"string\") {\n          nextState[key] = incoming.matches[key];\n        }\n      });\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student correctly matches a + 16 = 48 to 32\n- Student correctly matches c/9 = 5 to 45\n- Student correctly matches e - 11 = 34 to 45\n- Student demonstrates ability to solve three different types of one-step equations\n- Student shows understanding of inverse operations"
            }
          }
        },
        {
          "questions": {
            "id": 23823,
            "questionContent": {
              "questionText": "A traffic sign in the shape of an equilateral triangle with side lengths _s_ has a perimeter of 150 centimeters. The equation 3s = 150 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?",
              "explanation": "This word problem requires students to solve the equation 3s = 150. The context helps students understand that an equilateral triangle has 3 equal sides, so 3 times s (side length) equals 150 (total perimeter). To find s, students divide: s = 150  3 = 50 cm. This reinforces the inverse relationship between multiplication and division.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const PROBLEM_TEXT = `A traffic sign in the shape of an equilateral triangle with side lengths s has a perimeter of 150 centimeters. The equation 3s = 150 can be used to find the length of one side of the sign.\n\nWhat is the length of one side of the sign?`;\n\n  const CORRECT_ANSWER = \"50\";\n  const UNIT = \"cm\";\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let inputElement = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    if (inputElement && inputElement.node().value !== chartState.answer) {\n      inputElement.node().value = chartState.answer;\n    }\n    if (inputElement) inputElement.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"white-space\", \"pre-line\")\n      .text(PROBLEM_TEXT);\n\n    const answerCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n\n    const answerRow = answerCard\n      .append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\");\n\n    inputElement = answerRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"placeholder\", \"\")\n      .style(\"width\", \"120px\")\n      .style(\"padding\", \"8px 12px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    answerRow.append(\"span\").style(\"font-size\", \"16px\").text(UNIT);\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.answer === \"string\") {\n      nextState.answer = incoming.answer;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters the correct value: 50 cm\n- Student understands that s represents the length of one side\n- Student recognizes that 3 (number of sides) times s (side length) equals 150 (perimeter)\n- Student uses division (150  3) to find the side length"
            }
          }
        },
        {
          "questions": {
            "id": 23829,
            "questionContent": {
              "questionText": "Select the answer choice that shows the step you can take to solve for _p_ and the solution.\n\np - 11 = 42",
              "explanation": "This multiple choice question requires students to identify both the correct operation AND the correct solution for p - 11 = 42. The bar diagram shows p as the total, with 42 in one section and 11 in another. To isolate p, students must add 11 to both sides: p - 11 + 11 = 42 + 11, which gives p = 53. The other choices show incorrect operations or incorrect calculations, reinforcing the importance of using the correct inverse operation.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const EQUATION = \"p - 11 = 42\";\n  const CORRECT_ANSWER = \"D\";\n\n  const CHOICES = [\n    { id: \"A\", text: \"Subtract 11 from both sides of the equation. p = 31\" },\n    { id: \"B\", text: \"Add 42 to both sides of the equation. p = 84\" },\n    { id: \"C\", text: \"Subtract 42 from both sides of the equation. p = 0\" },\n    { id: \"D\", text: \"Add 11 to both sides of the equation. p = 53\" },\n  ];\n\n  const WORKED_EXAMPLE_VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-222/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedChoice: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n  let choiceInputs = {};\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      selectedChoice: chartState.selectedChoice,\n    });\n  }\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n    return card;\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return;\n    const accordion = container\n      .append(\"details\")\n      .attr(\"class\", \"video-accordion\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"box-shadow\", \"0 2px 8px rgba(0,0,0,0.05)\");\n    accordion\n      .append(\"summary\")\n      .style(\"font-size\", \"16px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"user-select\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    const videoContainer = accordion.append(\"div\").style(\"margin-top\", \"16px\");\n    videoContainer\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"800px\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n    return accordion;\n  }\n\n  function renderControls() {\n    Object.keys(choiceInputs).forEach((id) => {\n      const input = choiceInputs[id];\n      if (input && input.node()) {\n        input.property(\"checked\", chartState.selectedChoice === id);\n        input.property(\"disabled\", interactivityLocked);\n      }\n    });\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, {\n      size: \"small\",\n      marginBottom: \"0\",\n    });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(`Select the answer choice that shows the step you can take to solve for <em>p</em> and the solution.`);\n\n    const equationCard = createStandardCard(d3, container, {\n      size: \"small\",\n      marginBottom: \"24px\",\n    });\n    equationCard\n      .append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-align\", \"center\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(EQUATION);\n\n    // Bar diagram (two bars stacked)\n    const svg = equationCard\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", 120)\n      .attr(\"viewBox\", \"0 0 400 120\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    const barX = 100;\n    const topBarY = 20;\n    const bottomBarY = 65;\n    const section1Width = 200;\n    const section2Width = 50;\n    const totalWidth = section1Width + section2Width;\n    const barHeight = 40;\n\n    // Top bar - Section 1 (42 - yellow)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section1Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#fbbf24\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#1f2937\")\n      .text(\"42\");\n\n    // Top bar - Section 2 (11 - blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX + section1Width)\n      .attr(\"y\", topBarY)\n      .attr(\"width\", section2Width)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + section1Width + section2Width / 2)\n      .attr(\"y\", topBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"11\");\n\n    // Bottom bar - variable p (blue)\n    svg\n      .append(\"rect\")\n      .attr(\"x\", barX)\n      .attr(\"y\", bottomBarY)\n      .attr(\"width\", totalWidth)\n      .attr(\"height\", barHeight)\n      .style(\"fill\", \"#60a5fa\")\n      .style(\"stroke\", \"#1f2937\")\n      .style(\"stroke-width\", 2);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", barX + totalWidth / 2)\n      .attr(\"y\", bottomBarY + barHeight / 2)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"dominant-baseline\", \"middle\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-style\", \"italic\")\n      .style(\"fill\", \"#ffffff\")\n      .text(\"p\");\n\n    const choicesCard = createStandardCard(d3, container, {\n      size: \"large\",\n      marginBottom: \"24px\",\n    });\n\n    CHOICES.forEach((choice) => {\n      const choiceRow = choicesCard\n        .append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"align-items\", \"flex-start\")\n        .style(\"gap\", \"12px\")\n        .style(\"padding\", \"12px\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"transition\", \"background-color 0.2s\")\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"background-color\", \"#f9fafb\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"background-color\", \"transparent\");\n        })\n        .on(\"click\", function () {\n          if (!interactivityLocked) {\n            chartState = { ...chartState, selectedChoice: choice.id };\n            sendChartState();\n            renderControls();\n          }\n        });\n\n      const input = choiceRow\n        .append(\"input\")\n        .attr(\"type\", \"radio\")\n        .attr(\"name\", \"choice\")\n        .attr(\"value\", choice.id)\n        .style(\"margin-top\", \"4px\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"change\", function () {\n          chartState = { ...chartState, selectedChoice: choice.id };\n          sendChartState();\n        });\n\n      choiceInputs[choice.id] = input;\n\n      choiceRow\n        .append(\"label\")\n        .style(\"font-size\", \"16px\")\n        .style(\"cursor\", \"pointer\")\n        .style(\"flex\", \"1\")\n        .text(choice.text);\n    });\n\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n    if (typeof incoming.selectedChoice === \"string\") {\n      nextState.selectedChoice = incoming.selectedChoice;\n    }\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = function () {\n          return \"\";\n        };\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback = document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML = \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects the correct answer: \"Add 11 to both sides of the equation. p = 53\"\n- Student understands that addition is the inverse operation of subtraction\n- Student recognizes that p - 11 = 42 requires adding 11 to both sides\n- Student calculates that 42 + 11 = 53\n- Student understands the bar diagram showing the relationship"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Ramp Up 3: Two-Step Equations",
      "assignment_id": 19404,
      "module_name": "LESSONS - Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19404/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 24229,
            "questionContent": {
              "questionText": "Watch the worked example video below to learn about solving two-step equations.\n\nAfter watching, write down three main ideas from the video.",
              "explanation": "This question introduces students to solving two-step equations through a worked example video. The video demonstrates how to solve equations of the form ax + b = c by performing inverse operations in the correct order. Key concepts include: maintaining balance in an equation, using inverse operations (addition/subtraction first, then multiplication/division), and checking solutions by substitution. The three-response format ensures students actively engage with the content rather than passively watching.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS (Inlined)\n  // ============================================================\n\n  /**\n   * Video Player Component\n   * Creates a video player card with optional description text.\n   */\n  function createVideoPlayer(d3, container, videoUrl, options) {\n    options = options || {};\n    const description = options.description || null;\n    const maxWidth = options.maxWidth || \"800px\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const showCard = options.showCard !== false;\n\n    if (!videoUrl) {\n      return null;\n    }\n\n    if (description) {\n      container\n        .append(\"div\")\n        .attr(\"class\", \"video-description\")\n        .style(\"font-size\", \"16px\")\n        .style(\"margin-bottom\", \"24px\")\n        .text(description);\n    }\n\n    const videoCard = container\n      .append(\"div\")\n      .attr(\"class\", \"video-card\")\n      .style(\"margin-bottom\", marginBottom);\n\n    if (showCard) {\n      videoCard\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #e5e7eb\")\n        .style(\"border-radius\", \"16px\")\n        .style(\"padding\", \"20px\")\n        .style(\"box-shadow\", \"0 6px 16px rgba(15,23,42,0.05)\");\n    }\n\n    videoCard\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", maxWidth)\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"block\")\n      .style(\"margin\", \"0 auto\");\n\n    return videoCard;\n  }\n\n  /**\n   * Standard Card Component\n   * Creates standardized cards with consistent styling.\n   */\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    medium: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"20px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n    graph: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"18px\",\n      padding: \"24px\",\n      boxShadow: \"0 12px 28px rgba(15,23,42,0.08)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const title = options.title || null;\n    const size = options.size || \"large\";\n    const className = options.className || \"standard-card\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const marginTop = options.marginTop || \"0\";\n\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    const card = container\n      .append(\"div\")\n      .attr(\"class\", className)\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom)\n      .style(\"margin-top\", marginTop);\n\n    if (title) {\n      card\n        .append(\"div\")\n        .attr(\"class\", \"card-title\")\n        .style(\"font-size\", \"18px\")\n        .style(\"font-weight\", \"600\")\n        .style(\"margin-bottom\", \"16px\")\n        .html(title);\n    }\n\n    return card;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      idea1: \"\",\n      idea2: \"\",\n      idea3: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let currentD3 = null;\n\n  let textarea1 = null;\n  let textarea2 = null;\n  let textarea3 = null;\n\n  function ensureD3() {\n    if (window.d3) {\n      return Promise.resolve(window.d3);\n    }\n    if (d3Promise) {\n      return d3Promise;\n    }\n\n    d3Promise = new Promise((resolve, reject) => {\n      const existing = document.querySelector('script[data-source=\"d3@7\"]');\n      if (existing) {\n        existing.addEventListener(\"load\", () => resolve(window.d3));\n        existing.addEventListener(\"error\", reject);\n        return;\n      }\n\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.dataset.source = \"d3@7\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = () =>\n        reject(new Error(\"Unable to load d3.js from CDN.\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n\n    if (window.parent && typeof window.parent.postMessage === \"function\") {\n      window.parent.postMessage(message, \"*\");\n    }\n\n    if (typeof window.postMessage === \"function\") {\n      window.postMessage(message, \"*\");\n    }\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      mainIdeas: {\n        idea1: chartState.idea1,\n        idea2: chartState.idea2,\n        idea3: chartState.idea3,\n      },\n    });\n  }\n\n  function renderControls() {\n    if (textarea1 && textarea1.node().value !== chartState.idea1) {\n      textarea1.node().value = chartState.idea1;\n    }\n    if (textarea2 && textarea2.node().value !== chartState.idea2) {\n      textarea2.node().value = chartState.idea2;\n    }\n    if (textarea3 && textarea3.node().value !== chartState.idea3) {\n      textarea3.node().value = chartState.idea3;\n    }\n\n    if (textarea1) textarea1.property(\"disabled\", interactivityLocked);\n    if (textarea2) textarea2.property(\"disabled\", interactivityLocked);\n    if (textarea3) textarea3.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\n        \"font-family\",\n        \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\"\n      )\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // Introduction\n    container\n      .append(\"div\")\n      .attr(\"class\", \"intro\")\n      .style(\"font-size\", \"18px\")\n      .style(\"margin-bottom\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .text(\n        \"In this skill, you'll learn how to solve two-step equations by using inverse operations to isolate the variable.\"\n      );\n\n    container\n      .append(\"div\")\n      .attr(\"class\", \"skill-description\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"20px\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#eff6ff\")\n      .style(\"border-left\", \"4px solid #3b82f6\")\n      .style(\"border-radius\", \"8px\")\n      .html(\n        \"<strong>Skill:</strong> I will solve two-step equations.\"\n      );\n\n    // Video player\n    createVideoPlayer(d3, container, VIDEO_URL, {\n      description: \"This worked example video will show you how to solve two-step equations. Watch carefully!\",\n      maxWidth: \"800px\",\n      marginBottom: \"32px\"\n    });\n\n    // Reflection prompt\n    container\n      .append(\"div\")\n      .attr(\"class\", \"reflection-prompt\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"20px\")\n      .text(\"Write down three main ideas from the video:\");\n\n    // Idea 1\n    const idea1Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea1Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #1\");\n\n    textarea1 = idea1Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was one important thing you learned from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea1: this.value };\n        sendChartState();\n      });\n\n    // Idea 2\n    const idea2Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea2Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #2\");\n\n    textarea2 = idea2Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was another key concept from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea2: this.value };\n        sendChartState();\n      });\n\n    // Idea 3\n    const idea3Card = createStandardCard(d3, container, {\n      size: \"small\",\n      className: \"idea-card\",\n      marginBottom: \"16px\"\n    });\n\n    idea3Card\n      .append(\"div\")\n      .attr(\"class\", \"idea-label\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#3b82f6\")\n      .text(\"Main Idea #3\");\n\n    textarea3 = idea3Card\n      .append(\"textarea\")\n      .attr(\"rows\", 3)\n      .style(\"width\", \"100%\")\n      .style(\"box-sizing\", \"border-box\")\n      .style(\"border\", \"1px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"padding\", \"12px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.5\")\n      .style(\"resize\", \"vertical\")\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .attr(\"placeholder\", \"What was a third important idea from the video?\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, idea3: this.value };\n        sendChartState();\n      });\n  }\n\n  function renderAll(d3) {\n    renderControls();\n  }\n\n  function renderFromState(d3) {\n    renderAll(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    const nextState = createDefaultState();\n\n    if (incoming.mainIdeas && typeof incoming.mainIdeas === \"object\") {\n      nextState.idea1 =\n        typeof incoming.mainIdeas.idea1 === \"string\"\n          ? incoming.mainIdeas.idea1\n          : \"\";\n      nextState.idea2 =\n        typeof incoming.mainIdeas.idea2 === \"string\"\n          ? incoming.mainIdeas.idea2\n          : \"\";\n      nextState.idea3 =\n        typeof incoming.mainIdeas.idea3 === \"string\"\n          ? incoming.mainIdeas.idea3\n          : \"\";\n    }\n\n    chartState = nextState;\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) {\n      return;\n    }\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") {\n        return;\n      }\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        currentD3 = d3;\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n\n        window.getSvg = function () {\n          return \"\";\n        };\n\n        window.setInteractivity = setInteractivity;\n\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        const fallback =\n          document.querySelector(containerSelectorRef) || document.body;\n        fallback.innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "**Note: Nearly any thoughtful response should be accepted.** The purpose of this question is to encourage active viewing and reflection, not to test recall of specific facts.\n\n- Student watches the video\n- Student provides three separate responses\n- Each response shows some engagement with the video (nearly any relevant answer is acceptable)\n- Responses do not need to match specific expected answers\n- Sample acceptable responses (but many other responses are also valid):\n  - \"To solve a two-step equation, you undo operations in reverse order\"\n  - \"Whatever you do to one side of an equation, you must do to the other side\"\n  - \"The goal is to isolate the variable by using inverse operations\"\n  - \"I learned how to solve two-step equations\"\n  - \"You do the opposite operation to both sides\""
            }
          }
        },
        {
          "questions": {
            "id": 24230,
            "questionContent": {
              "questionText": "The bar model shows steps for solving the equation 2x + 5 = 17.\n\nWhat is the solution to the equation?",
              "explanation": "Using the bar model:\n- Step 1: 2x + 5 = 17 (shown with two x-tiles and one 5-tile equaling 17)\n- Step 2: Subtract 5 from both sides: 2x = 12\n- Step 3: Divide both sides by 2: x = 6\n\nThe solution is x = 6.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  // ============================================================\n  // REUSABLE COMPONENTS\n  // ============================================================\n\n  const CARD_STYLES = {\n    large: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"16px\",\n      padding: \"24px\",\n      boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\",\n    },\n    small: {\n      background: \"#ffffff\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: \"12px\",\n      padding: \"16px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n    },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl, options) {\n    options = options || {};\n    const title = options.title || \" [If you're stuck] Watch the Worked Example Video Again\";\n    const expandedTitle = options.expandedTitle || \" [If you're stuck] Watch the Worked Example Video Again\";\n\n    if (!videoUrl) return null;\n\n    container\n      .append(\"div\")\n      .style(\"font-size\", \"14px\")\n      .style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Optional:\");\n\n    const accordion = container\n      .append(\"details\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"margin-bottom\", \"20px\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"list-style\", \"none\")\n      .html(title)\n      .on(\"click\", function () {\n        const details = d3.select(this.parentNode);\n        const isOpen = details.property(\"open\");\n        d3.select(this).html(isOpen ? title : expandedTitle);\n      });\n\n    accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\")\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"600px\")\n      .style(\"border-radius\", \"8px\");\n\n    return accordion;\n  }\n\n  // ============================================================\n  // QUESTION-SPECIFIC CODE\n  // ============================================================\n\n  const WORKED_EXAMPLE_VIDEO_URL =\n    \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"The bar model shows steps for solving the equation <strong>2x + 5 = 17</strong>.\");\n\n    // Bar model visualization\n    const barCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Step 1: 2x + 5 = 17\n    const step1 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: 2x + 5 = 17\");\n\n    const bars1 = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    // Two x bars (green)\n    bars1.append(\"div\")\n      .style(\"width\", \"60px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"x\");\n    bars1.append(\"div\")\n      .style(\"width\", \"60px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"x\");\n\n    // 5 bar (purple)\n    bars1.append(\"div\")\n      .style(\"width\", \"40px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"5\");\n\n    // = 17 to the right\n    bars1.append(\"div\")\n      .style(\"margin-left\", \"12px\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .text(\"= 17\");\n\n    // Step 2: 2x = 12\n    const step2 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step2.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 2: 2x = 12\");\n\n    const bars2 = step2.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    bars2.append(\"div\")\n      .style(\"width\", \"60px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"x\");\n    bars2.append(\"div\")\n      .style(\"width\", \"60px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"x\");\n\n    // = 12 to the right\n    bars2.append(\"div\")\n      .style(\"margin-left\", \"12px\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .text(\"= 12\");\n\n    // Step 3: x = ?\n    const step3 = barCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    step3.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 3: x = ?\");\n\n    const bars3 = step3.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    bars3.append(\"div\")\n      .style(\"width\", \"60px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"x\");\n    bars3.append(\"div\")\n      .style(\"width\", \"60px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"x\");\n\n    // Question marks under each x\n    const qmarks = step3.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"4px\").style(\"margin-top\", \"4px\");\n    qmarks.append(\"div\").style(\"width\", \"60px\").style(\"text-align\", \"center\").style(\"font-weight\", \"600\").text(\"?\");\n    qmarks.append(\"div\").style(\"width\", \"60px\").style(\"text-align\", \"center\").style(\"font-weight\", \"600\").text(\"?\");\n\n    // Answer input section\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"12px\")\n      .text(\"What is the solution to the equation?\");\n\n    const inputRow = answerCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    inputRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x =\");\n\n    answerInput = inputRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\",\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = () => \"\";\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        document.querySelector(containerSelectorRef).innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 6\n- Accept: 6, x=6, x = 6"
            }
          }
        },
        {
          "questions": {
            "id": 24231,
            "questionContent": {
              "questionText": "The bar model shows steps for solving the equation 3x + 4 = 19.\n\nWhat is the solution to the equation?",
              "explanation": "Using the bar model:\n- Step 1: 3x + 4 = 19 (shown with three x-tiles and one 4-tile equaling 19)\n- Step 2: Subtract 4 from both sides: 3x = 15\n- Step 3: Divide both sides by 3: x = 5\n\nThe solution is x = 5.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const size = options.size || \"large\";\n    const marginBottom = options.marginBottom || \"32px\";\n    const styles = CARD_STYLES[size] || CARD_STYLES.large;\n\n    return container\n      .append(\"div\")\n      .style(\"background\", styles.background)\n      .style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius)\n      .style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow)\n      .style(\"margin-bottom\", marginBottom);\n  }\n\n  function createVideoAccordion(d3, container, videoUrl, options) {\n    options = options || {};\n    const title = options.title || \" [If you're stuck] Watch the Worked Example Video Again\";\n    const expandedTitle = options.expandedTitle || \" [If you're stuck] Watch the Worked Example Video Again\";\n\n    if (!videoUrl) return null;\n\n    container\n      .append(\"div\")\n      .style(\"font-size\", \"14px\")\n      .style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\")\n      .style(\"margin-bottom\", \"8px\")\n      .style(\"color\", \"#6b7280\")\n      .text(\"Optional:\");\n\n    const accordion = container\n      .append(\"details\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\")\n      .style(\"padding\", \"16px\")\n      .style(\"margin-bottom\", \"20px\");\n\n    accordion\n      .append(\"summary\")\n      .style(\"cursor\", \"pointer\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\")\n      .style(\"color\", \"#3b82f6\")\n      .style(\"list-style\", \"none\")\n      .html(title)\n      .on(\"click\", function () {\n        const details = d3.select(this.parentNode);\n        const isOpen = details.property(\"open\");\n        d3.select(this).html(isOpen ? title : expandedTitle);\n      });\n\n    accordion\n      .append(\"div\")\n      .style(\"margin-top\", \"16px\")\n      .append(\"video\")\n      .attr(\"controls\", true)\n      .attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\")\n      .style(\"max-width\", \"600px\")\n      .style(\"border-radius\", \"8px\");\n\n    return accordion;\n  }\n\n  const WORKED_EXAMPLE_VIDEO_URL =\n    \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return {\n      answer: \"\",\n    };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let containerSelectorRef = \"#chart-root\";\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.async = true;\n      script.onload = () => resolve(window.d3);\n      script.onerror = () => reject(new Error(\"Unable to load d3.js\"));\n      document.head.appendChild(script);\n    });\n\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const message = { type, payload };\n    if (window.parent) window.parent.postMessage(message, \"*\");\n    window.postMessage(message, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      answer: chartState.answer,\n    });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container\n      .style(\"font-family\", \"'Inter', system-ui, -apple-system, BlinkMacSystemFont\")\n      .style(\"color\", \"#1f2937\")\n      .style(\"line-height\", \"1.6\")\n      .style(\"overflow\", \"auto\");\n\n    // Intro cards\n    const introContainer = container\n      .append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .append(\"div\")\n      .style(\"font-size\", \"48px\")\n      .text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard\n      .append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"line-height\", \"1.6\")\n      .html(\"The bar model shows steps for solving the equation <strong>3x + 4 = 19</strong>.\");\n\n    // Bar model visualization\n    const barCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Step 1: 3x + 4 = 19\n    const step1 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: 3x + 4 = 19\");\n\n    const bars1 = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    // Three x bars (green)\n    for (let i = 0; i < 3; i++) {\n      bars1.append(\"div\")\n        .style(\"width\", \"60px\").style(\"height\", \"40px\")\n        .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").text(\"x\");\n    }\n\n    // 4 bar (purple)\n    bars1.append(\"div\")\n      .style(\"width\", \"40px\").style(\"height\", \"40px\")\n      .style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\")\n      .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\").text(\"4\");\n\n    // = 19 to the right\n    bars1.append(\"div\")\n      .style(\"margin-left\", \"12px\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .text(\"= 19\");\n\n    // Step 2: 3x = 15\n    const step2 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step2.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 2: 3x = 15\");\n\n    const bars2 = step2.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 3; i++) {\n      bars2.append(\"div\")\n        .style(\"width\", \"60px\").style(\"height\", \"40px\")\n        .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").text(\"x\");\n    }\n\n    // = 15 to the right\n    bars2.append(\"div\")\n      .style(\"margin-left\", \"12px\")\n      .style(\"font-size\", \"20px\")\n      .style(\"font-weight\", \"600\")\n      .text(\"= 15\");\n\n    // Step 3: x = ?\n    const step3 = barCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    step3.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 3: x = ?\");\n\n    const bars3 = step3.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 3; i++) {\n      bars3.append(\"div\")\n        .style(\"width\", \"60px\").style(\"height\", \"40px\")\n        .style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").text(\"x\");\n    }\n\n    // Question marks under each x\n    const qmarks = step3.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"4px\").style(\"margin-top\", \"4px\");\n    for (let i = 0; i < 3; i++) {\n      qmarks.append(\"div\").style(\"width\", \"60px\").style(\"text-align\", \"center\").style(\"font-weight\", \"600\").text(\"?\");\n    }\n\n    // Answer input section\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\")\n      .style(\"font-weight\", \"600\")\n      .style(\"margin-bottom\", \"12px\")\n      .text(\"What is the solution to the equation?\");\n\n    const inputRow = answerCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    inputRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"x =\");\n\n    answerInput = inputRow\n      .append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState = { ...chartState, answer: this.value };\n        sendChartState();\n      });\n\n    // Video accordion\n    createVideoAccordion(d3, container, WORKED_EXAMPLE_VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls();\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload && typeof payload === \"object\" ? payload : {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\",\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n\n    window.addEventListener(\"message\", (event) => {\n      const { data } = event;\n      if (!data || typeof data !== \"object\") return;\n\n      if (data.type === \"setInitialState\") {\n        applyInitialState(data.payload);\n        renderFromState(d3);\n      }\n      if (data.type === \"set_lock\") {\n        setInteractivity(data.payload === false);\n      }\n      if (data.type === \"check_answer\") {\n        sendChartState();\n      }\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector || \"#chart-root\";\n    ensureD3()\n      .then((d3) => {\n        buildLayout(d3, containerSelectorRef);\n        renderFromState(d3);\n        window.clearChart = function () {\n          chartState = createDefaultState();\n          renderFromState(d3);\n          sendMessage(\"selection_cleared\", null);\n          sendChartState();\n        };\n        window.getSvg = () => \"\";\n        window.setInteractivity = setInteractivity;\n        setupMessageHandlers(d3);\n      })\n      .catch((error) => {\n        console.error(error);\n        document.querySelector(containerSelectorRef).innerHTML =\n          \"<p style='color:#b91c1c'>Failed to load visualization.</p>\";\n      });\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 5\n- Accept: 5, x=5, x = 5"
            }
          }
        },
        {
          "questions": {
            "id": 24234,
            "questionContent": {
              "questionText": "The algebra tiles show the first step for solving the equation 4x + 3 = 11.\n\nDrag the number of unit tiles equal to each x-tile.\n\nWhat is the solution to the equation 4x + 3 = 11?",
              "explanation": "Using algebra tiles:\n- Equation: 4x + 3 = 11 (4 x-tiles and 3 unit tiles = 11 unit tiles)\n- Step 1: Remove 3 from both sides: 4x = 8\n- Step 2: Since we have 4 x-tiles and 8 unit tiles, each x-tile equals 2 unit tiles\n- Solution: x = 2",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\")\n      .style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\")\n      .attr(\"controls\", true).attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { tiles: [[], [], [], []], answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let dropZones = [];\n  let answerInput = null;\n  let dragSourceRef = null;\n  let currentD3 = null;\n  let containerSelectorRef = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      tiles: chartState.tiles.map(arr => arr.length),\n      answer: chartState.answer\n    });\n  }\n\n  function renderDropZones() {\n    dropZones.forEach((zone, i) => {\n      if (!zone) return;\n      // Clear existing tiles in the zone\n      zone.selectAll(\".dropped-tile\").remove();\n\n      // Render tiles from state\n      chartState.tiles[i].forEach((tileId, tileIndex) => {\n        zone.append(\"div\")\n          .attr(\"class\", \"dropped-tile\")\n          .attr(\"data-tile-id\", tileId)\n          .style(\"width\", \"24px\")\n          .style(\"height\", \"24px\")\n          .style(\"background\", \"#fda4af\")\n          .style(\"border\", \"2px solid #f43f5e\")\n          .style(\"border-radius\", \"4px\")\n          .style(\"display\", \"flex\")\n          .style(\"align-items\", \"center\")\n          .style(\"justify-content\", \"center\")\n          .style(\"font-weight\", \"600\")\n          .style(\"font-size\", \"12px\")\n          .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n          .text(\"1\")\n          .on(\"click\", function() {\n            if (interactivityLocked) return;\n            // Remove this tile when clicked\n            chartState.tiles[i].splice(tileIndex, 1);\n            sendChartState();\n            renderDropZones();\n          });\n      });\n    });\n  }\n\n  function renderControls() {\n    renderDropZones();\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\")\n      .style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"line-height\", \"1.6\")\n      .html(\"The algebra tiles show the first step for solving the equation <strong>4x + 3 = 11</strong>.\");\n\n    // Algebra tiles visualization\n    const tilesCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display: 4x + 3 = 11\n    const eq1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    eq1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Equation: 4x + 3 = 11\");\n    const eqRow1 = eq1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    // 4 x-tiles (blue rectangles)\n    for (let i = 0; i < 4; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    // 3 unit tiles (pink squares)\n    for (let i = 0; i < 3; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    eqRow1.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // 11 unit tiles arranged as 4 columns\n    const rightSide = eqRow1.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(4, 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < 11; i++) {\n      rightSide.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Step 1: 4x = 8\n    const step1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"20px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: 4x = 8\");\n    const stepRow = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    for (let i = 0; i < 4; i++) {\n      stepRow.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    stepRow.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // 8 unit tiles arranged as 4 columns x 2 rows\n    const right8 = stepRow.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(4, 24px)\")\n      .style(\"grid-template-rows\", \"repeat(2, 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < 8; i++) {\n      right8.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Drag instruction\n    tilesCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"Drag the number of unit tiles equal to each x-tile.\");\n\n    // Drop zones container\n    const dropZoneContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"16px\")\n      .style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"border-radius\", \"12px\");\n\n    dropZones = [];\n    for (let i = 0; i < 4; i++) {\n      const zoneWrapper = dropZoneContainer.append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-direction\", \"column\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"8px\");\n\n      // X-tile above drop zone\n      zoneWrapper.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").text(\"x\");\n\n      // Drop zone\n      const zone = zoneWrapper.append(\"div\")\n        .attr(\"class\", \"drop-zone\")\n        .attr(\"data-zone-index\", i)\n        .style(\"min-width\", \"60px\")\n        .style(\"min-height\", \"60px\")\n        .style(\"border\", \"2px dashed #9ca3af\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-wrap\", \"wrap\")\n        .style(\"gap\", \"2px\")\n        .style(\"padding\", \"4px\")\n        .style(\"align-content\", \"flex-start\")\n        .style(\"justify-content\", \"center\")\n        .style(\"background\", \"#fff\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"dragover\", function(event) {\n          event.preventDefault();\n          d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n        })\n        .on(\"dragleave\", function() {\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        })\n        .on(\"drop\", function(event) {\n          event.preventDefault();\n          if (interactivityLocked) return;\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n\n          const zoneIndex = parseInt(d3.select(this).attr(\"data-zone-index\"));\n          // Add a new tile to this zone\n          chartState.tiles[zoneIndex].push(\"tile-\" + Date.now());\n          sendChartState();\n          renderDropZones();\n        });\n\n      dropZones.push(zone);\n    }\n\n    // Draggable unit tile source - single tile that can be dragged multiple times\n    const dragSourceContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\")\n      .style(\"margin-top\", \"16px\");\n\n    dragSourceContainer.append(\"span\")\n      .style(\"font-weight\", \"500\")\n      .text(\"Drag unit tile:\");\n\n    // Single draggable tile (can be dragged multiple times)\n    dragSourceContainer.append(\"div\")\n      .attr(\"draggable\", \"true\")\n      .style(\"width\", \"28px\")\n      .style(\"height\", \"28px\")\n      .style(\"background\", \"#fda4af\")\n      .style(\"border\", \"2px solid #f43f5e\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"cursor\", \"grab\")\n      .style(\"box-shadow\", \"0 2px 4px rgba(0,0,0,0.1)\")\n      .text(\"1\")\n      .on(\"dragstart\", function(event) {\n        if (interactivityLocked) {\n          event.preventDefault();\n          return;\n        }\n        d3.select(this).style(\"opacity\", \"0.6\");\n        event.dataTransfer.setData(\"text/plain\", \"unit-tile\");\n      })\n      .on(\"dragend\", function() {\n        d3.select(this).style(\"opacity\", \"1\");\n      });\n\n    // Instruction to remove\n    dragSourceContainer.append(\"span\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-left\", \"8px\")\n      .text(\"(Click tiles in drop zones to remove)\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"What is the solution to the equation 4x + 3 = 11?\");\n\n    const inputRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    inputRow.append(\"span\").style(\"font-size\", \"18px\").style(\"font-style\", \"italic\").text(\"x =\");\n    answerInput = inputRow.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    // Handle both array of counts and array of arrays\n    if (Array.isArray(incoming.tiles)) {\n      if (typeof incoming.tiles[0] === \"number\") {\n        // Convert counts to arrays\n        chartState.tiles = incoming.tiles.map((count, i) => {\n          const arr = [];\n          for (let j = 0; j < count; j++) arr.push(\"tile-\" + i + \"-\" + j);\n          return arr;\n        });\n      } else {\n        chartState.tiles = incoming.tiles;\n      }\n    } else {\n      chartState.tiles = [[], [], [], []];\n    }\n    chartState.answer = typeof incoming.answer === \"string\" ? incoming.answer : \"\";\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector;\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Part 1: Student drags 2 unit tiles to each of the 4 x-tile drop zones\n- Part 2: Student enters x = 2\n- Accept: 2, x=2, x = 2"
            }
          }
        },
        {
          "questions": {
            "id": 24235,
            "questionContent": {
              "questionText": "The algebra tiles show the first step for solving the equation 3x + 2 = 11.\n\nDrag the number of unit tiles equal to each x-tile.\n\nWhat is the solution to the equation 3x + 2 = 11?",
              "explanation": "Using algebra tiles:\n- Equation: 3x + 2 = 11 (3 x-tiles and 2 unit tiles = 11 unit tiles)\n- Step 1: Remove 2 from both sides: 3x = 9\n- Step 2: Since we have 3 x-tiles and 9 unit tiles, each x-tile equals 3 unit tiles\n- Solution: x = 3",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\")\n      .style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\")\n      .attr(\"controls\", true).attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  // Variation V01: 3x + 2 = 11  x = 3\n  const NUM_X_TILES = 3;\n  const NUM_UNIT_TILES_LEFT = 2;\n  const TOTAL_RIGHT = 11;\n  const STEP1_RESULT = 9; // 3x = 9\n  const SOLUTION = 3;\n\n  function createDefaultState() {\n    return { tiles: Array(NUM_X_TILES).fill(null).map(() => []), answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let dropZones = [];\n  let answerInput = null;\n  let dragSourceRef = null;\n  let currentD3 = null;\n  let containerSelectorRef = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      tiles: chartState.tiles.map(arr => arr.length),\n      answer: chartState.answer\n    });\n  }\n\n  function renderDropZones() {\n    dropZones.forEach((zone, i) => {\n      if (!zone) return;\n      // Clear existing tiles in the zone\n      zone.selectAll(\".dropped-tile\").remove();\n\n      // Render tiles from state\n      chartState.tiles[i].forEach((tileId, tileIndex) => {\n        zone.append(\"div\")\n          .attr(\"class\", \"dropped-tile\")\n          .attr(\"data-tile-id\", tileId)\n          .style(\"width\", \"24px\")\n          .style(\"height\", \"24px\")\n          .style(\"background\", \"#fda4af\")\n          .style(\"border\", \"2px solid #f43f5e\")\n          .style(\"border-radius\", \"4px\")\n          .style(\"display\", \"flex\")\n          .style(\"align-items\", \"center\")\n          .style(\"justify-content\", \"center\")\n          .style(\"font-weight\", \"600\")\n          .style(\"font-size\", \"12px\")\n          .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n          .text(\"1\")\n          .on(\"click\", function() {\n            if (interactivityLocked) return;\n            // Remove this tile when clicked\n            chartState.tiles[i].splice(tileIndex, 1);\n            sendChartState();\n            renderDropZones();\n          });\n      });\n    });\n  }\n\n  function renderControls() {\n    renderDropZones();\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\")\n      .style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"line-height\", \"1.6\")\n      .html(\"The algebra tiles show the first step for solving the equation <strong>\" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT + \"</strong>.\");\n\n    // Algebra tiles visualization\n    const tilesCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display\n    const eq1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    eq1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Equation: \" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT);\n    const eqRow1 = eq1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    // X-tiles (blue rectangles)\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    // Unit tiles on left side (pink squares)\n    for (let i = 0; i < NUM_UNIT_TILES_LEFT; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    eqRow1.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // Right side unit tiles arranged in columns\n    const rightSide = eqRow1.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(\" + NUM_X_TILES + \", 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < TOTAL_RIGHT; i++) {\n      rightSide.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Step 1\n    const step1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"20px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: \" + NUM_X_TILES + \"x = \" + STEP1_RESULT);\n    const stepRow = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      stepRow.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    stepRow.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // Step 1 result tiles arranged in grid\n    const rightStep1 = stepRow.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(\" + NUM_X_TILES + \", 24px)\")\n      .style(\"grid-template-rows\", \"repeat(\" + SOLUTION + \", 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < STEP1_RESULT; i++) {\n      rightStep1.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Drag instruction\n    tilesCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"Drag the number of unit tiles equal to each x-tile.\");\n\n    // Drop zones container\n    const dropZoneContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"16px\")\n      .style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"border-radius\", \"12px\");\n\n    dropZones = [];\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      const zoneWrapper = dropZoneContainer.append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-direction\", \"column\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"8px\");\n\n      // X-tile above drop zone\n      zoneWrapper.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").text(\"x\");\n\n      // Drop zone\n      const zone = zoneWrapper.append(\"div\")\n        .attr(\"class\", \"drop-zone\")\n        .attr(\"data-zone-index\", i)\n        .style(\"min-width\", \"60px\")\n        .style(\"min-height\", \"60px\")\n        .style(\"border\", \"2px dashed #9ca3af\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-wrap\", \"wrap\")\n        .style(\"gap\", \"2px\")\n        .style(\"padding\", \"4px\")\n        .style(\"align-content\", \"flex-start\")\n        .style(\"justify-content\", \"center\")\n        .style(\"background\", \"#fff\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"dragover\", function(event) {\n          event.preventDefault();\n          d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n        })\n        .on(\"dragleave\", function() {\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        })\n        .on(\"drop\", function(event) {\n          event.preventDefault();\n          if (interactivityLocked) return;\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n\n          const zoneIndex = parseInt(d3.select(this).attr(\"data-zone-index\"));\n          // Add a new tile to this zone\n          chartState.tiles[zoneIndex].push(\"tile-\" + Date.now());\n          sendChartState();\n          renderDropZones();\n        });\n\n      dropZones.push(zone);\n    }\n\n    // Draggable unit tile source - single tile that can be dragged multiple times\n    const dragSourceContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\")\n      .style(\"margin-top\", \"16px\");\n\n    dragSourceContainer.append(\"span\")\n      .style(\"font-weight\", \"500\")\n      .text(\"Drag unit tile:\");\n\n    // Single draggable tile (can be dragged multiple times)\n    dragSourceContainer.append(\"div\")\n      .attr(\"draggable\", \"true\")\n      .style(\"width\", \"28px\")\n      .style(\"height\", \"28px\")\n      .style(\"background\", \"#fda4af\")\n      .style(\"border\", \"2px solid #f43f5e\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"cursor\", \"grab\")\n      .style(\"box-shadow\", \"0 2px 4px rgba(0,0,0,0.1)\")\n      .text(\"1\")\n      .on(\"dragstart\", function(event) {\n        if (interactivityLocked) {\n          event.preventDefault();\n          return;\n        }\n        d3.select(this).style(\"opacity\", \"0.6\");\n        event.dataTransfer.setData(\"text/plain\", \"unit-tile\");\n      })\n      .on(\"dragend\", function() {\n        d3.select(this).style(\"opacity\", \"1\");\n      });\n\n    // Instruction to remove\n    dragSourceContainer.append(\"span\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-left\", \"8px\")\n      .text(\"(Click tiles in drop zones to remove)\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"What is the solution to the equation \" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT + \"?\");\n\n    const inputRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    inputRow.append(\"span\").style(\"font-size\", \"18px\").style(\"font-style\", \"italic\").text(\"x =\");\n    answerInput = inputRow.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    // Handle both array of counts and array of arrays\n    if (Array.isArray(incoming.tiles)) {\n      if (typeof incoming.tiles[0] === \"number\") {\n        // Convert counts to arrays\n        chartState.tiles = incoming.tiles.map((count, i) => {\n          const arr = [];\n          for (let j = 0; j < count; j++) arr.push(\"tile-\" + i + \"-\" + j);\n          return arr;\n        });\n      } else {\n        chartState.tiles = incoming.tiles;\n      }\n    } else {\n      chartState.tiles = Array(NUM_X_TILES).fill(null).map(() => []);\n    }\n    chartState.answer = typeof incoming.answer === \"string\" ? incoming.answer : \"\";\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector;\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Part 1: Student drags 3 unit tiles to each of the 3 x-tile drop zones\n- Part 2: Student enters x = 3\n- Accept: 3, x=3, x = 3"
            }
          }
        },
        {
          "questions": {
            "id": 24238,
            "questionContent": {
              "questionText": "Which model represents the equation 4x + 9 = 53?\n\nWhat are the steps needed to solve the equation 4x + 9 = 53?",
              "explanation": "The equation 4x + 9 = 53 is modeled by:\n- Four equal-sized x sections plus one 9 section, with the total being 53\n\nTo solve:\n1. Subtract 9 from both sides: 4x = 44\n2. Divide both sides by 4: x = 11",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedModel: null, step1: \"\", step2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let radioButtons = [];\n  let step1Select = null;\n  let step2Select = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { selectedModel: chartState.selectedModel, step1: chartState.step1, step2: chartState.step2 });\n  }\n\n  function renderControls() {\n    radioButtons.forEach((rb, i) => {\n      rb.property(\"checked\", chartState.selectedModel === i);\n      rb.property(\"disabled\", interactivityLocked);\n    });\n    if (step1Select) { step1Select.node().value = chartState.step1; step1Select.property(\"disabled\", interactivityLocked); }\n    if (step2Select) { step2Select.node().value = chartState.step2; step2Select.property(\"disabled\", interactivityLocked); }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which model represents the equation <strong>4x + 9 = 53</strong>?\");\n\n    // Multiple choice for models\n    const mcCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    radioButtons = [];\n\n    const models = [\n      { label: \"Option 1\", desc: \"x + 9 = 53\", parts: [{ type: \"x\", count: 1 }, { type: \"num\", val: 9 }] },\n      { label: \"Option 2\", desc: \"3x + 9 = 53\", parts: [{ type: \"x\", count: 3 }, { type: \"num\", val: 9 }] },\n      { label: \"Option 3\", desc: \"4x + 9 = 53 (Correct)\", parts: [{ type: \"x\", count: 4 }, { type: \"num\", val: 9 }] },\n      { label: \"Option 4\", desc: \"4(53) + 9 = x\", parts: [{ type: \"num\", val: 53, count: 4 }, { type: \"num\", val: 9 }] },\n    ];\n\n    models.forEach((model, i) => {\n      const row = mcCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"cursor\", \"pointer\")\n        .on(\"click\", function () {\n          if (interactivityLocked) return;\n          chartState.selectedModel = i;\n          sendChartState();\n          renderControls();\n        });\n\n      const radio = row.append(\"input\").attr(\"type\", \"radio\").attr(\"name\", \"model\").attr(\"value\", i)\n        .on(\"change\", function () {\n          chartState.selectedModel = i;\n          sendChartState();\n        });\n      radioButtons.push(radio);\n\n      // Bar model with = 53 to the right\n      const barContainer = row.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"2px\");\n\n      if (i === 0) {\n        // x + 9 = 53\n        barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"9\");\n      } else if (i === 1) {\n        // 3x + 9 = 53\n        for (let j = 0; j < 3; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"9\");\n      } else if (i === 2) {\n        // 4x + 9 = 53 (correct)\n        for (let j = 0; j < 4; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"9\");\n      } else {\n        // 4(53) + 9 = x (wrong)\n        for (let j = 0; j < 4; j++) {\n          barContainer.append(\"div\").style(\"width\", \"40px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"53\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"9\");\n      }\n\n      // = 53 to the right of bars\n      barContainer.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"18px\").style(\"font-weight\", \"600\").text(\"= 53\");\n    });\n\n    // Steps section\n    const stepsCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    stepsCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"What are the steps needed to solve the equation 4x + 9 = 53?\");\n\n    // Step 1\n    const step1Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"12px\");\n    step1Row.append(\"span\").text(\"The first step is to\");\n    step1Select = step1Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step1 = this.value;\n        sendChartState();\n      });\n    step1Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step1Select.append(\"option\").attr(\"value\", \"add 9\").text(\"add 9\");\n    step1Select.append(\"option\").attr(\"value\", \"subtract 9\").text(\"subtract 9\");\n    step1Select.append(\"option\").attr(\"value\", \"multiply by 4\").text(\"multiply by 4\");\n    step1Select.append(\"option\").attr(\"value\", \"divide by 4\").text(\"divide by 4\");\n    step1Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    // Step 2\n    const step2Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    step2Row.append(\"span\").text(\"The second step is to\");\n    step2Select = step2Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step2 = this.value;\n        sendChartState();\n      });\n    step2Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step2Select.append(\"option\").attr(\"value\", \"add 9\").text(\"add 9\");\n    step2Select.append(\"option\").attr(\"value\", \"subtract 9\").text(\"subtract 9\");\n    step2Select.append(\"option\").attr(\"value\", \"multiply by 4\").text(\"multiply by 4\");\n    step2Select.append(\"option\").attr(\"value\", \"divide by 4\").text(\"divide by 4\");\n    step2Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      selectedModel: typeof incoming.selectedModel === \"number\" ? incoming.selectedModel : null,\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : \"\",\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Part 1 (Multiple Choice):\n- Correct answer: Option 3 (four x-tiles and one 9-tile equaling 53)\n\nPart 2 (Drag-match):\n- First step: subtract 9\n- Second step: divide by 4"
            }
          }
        },
        {
          "questions": {
            "id": 24239,
            "questionContent": {
              "questionText": "Which model represents the equation 3x + 7 = 40?\n\nWhat are the steps needed to solve the equation 3x + 7 = 40?",
              "explanation": "The equation 3x + 7 = 40 is modeled by:\n- Three equal-sized x sections plus one 7 section, with the total being 40\n\nTo solve:\n1. Subtract 7 from both sides: 3x = 33\n2. Divide both sides by 3: x = 11",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedModel: null, step1: \"\", step2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let radioButtons = [];\n  let step1Select = null;\n  let step2Select = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { selectedModel: chartState.selectedModel, step1: chartState.step1, step2: chartState.step2 });\n  }\n\n  function renderControls() {\n    radioButtons.forEach((rb, i) => {\n      rb.property(\"checked\", chartState.selectedModel === i);\n      rb.property(\"disabled\", interactivityLocked);\n    });\n    if (step1Select) { step1Select.node().value = chartState.step1; step1Select.property(\"disabled\", interactivityLocked); }\n    if (step2Select) { step2Select.node().value = chartState.step2; step2Select.property(\"disabled\", interactivityLocked); }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which model represents the equation <strong>3x + 7 = 40</strong>?\");\n\n    // Multiple choice for models\n    const mcCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    radioButtons = [];\n\n    const models = [\n      { label: \"Option 1\", desc: \"x + 7 = 40\", parts: [{ type: \"x\", count: 1 }, { type: \"num\", val: 7 }] },\n      { label: \"Option 2\", desc: \"2x + 7 = 40\", parts: [{ type: \"x\", count: 2 }, { type: \"num\", val: 7 }] },\n      { label: \"Option 3\", desc: \"3x + 7 = 40 (Correct)\", parts: [{ type: \"x\", count: 3 }, { type: \"num\", val: 7 }] },\n      { label: \"Option 4\", desc: \"3(40) + 7 = x\", parts: [{ type: \"num\", val: 40, count: 3 }, { type: \"num\", val: 7 }] },\n    ];\n\n    models.forEach((model, i) => {\n      const row = mcCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"cursor\", \"pointer\")\n        .on(\"click\", function () {\n          if (interactivityLocked) return;\n          chartState.selectedModel = i;\n          sendChartState();\n          renderControls();\n        });\n\n      const radio = row.append(\"input\").attr(\"type\", \"radio\").attr(\"name\", \"model\").attr(\"value\", i)\n        .on(\"change\", function () {\n          chartState.selectedModel = i;\n          sendChartState();\n        });\n      radioButtons.push(radio);\n\n      // Bar model with = 40 to the right\n      const barContainer = row.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"2px\");\n\n      if (i === 0) {\n        // x + 7 = 40\n        barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"7\");\n      } else if (i === 1) {\n        // 2x + 7 = 40\n        for (let j = 0; j < 2; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"7\");\n      } else if (i === 2) {\n        // 3x + 7 = 40 (correct)\n        for (let j = 0; j < 3; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"7\");\n      } else {\n        // 3(40) + 7 = x (wrong)\n        for (let j = 0; j < 3; j++) {\n          barContainer.append(\"div\").style(\"width\", \"40px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"40\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"7\");\n      }\n\n      // = 40 to the right of bars\n      barContainer.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"18px\").style(\"font-weight\", \"600\").text(\"= 40\");\n    });\n\n    // Steps section\n    const stepsCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    stepsCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"What are the steps needed to solve the equation 3x + 7 = 40?\");\n\n    // Step 1\n    const step1Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"12px\");\n    step1Row.append(\"span\").text(\"The first step is to\");\n    step1Select = step1Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step1 = this.value;\n        sendChartState();\n      });\n    step1Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step1Select.append(\"option\").attr(\"value\", \"add 7\").text(\"add 7\");\n    step1Select.append(\"option\").attr(\"value\", \"subtract 7\").text(\"subtract 7\");\n    step1Select.append(\"option\").attr(\"value\", \"multiply by 3\").text(\"multiply by 3\");\n    step1Select.append(\"option\").attr(\"value\", \"divide by 3\").text(\"divide by 3\");\n    step1Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    // Step 2\n    const step2Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    step2Row.append(\"span\").text(\"The second step is to\");\n    step2Select = step2Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step2 = this.value;\n        sendChartState();\n      });\n    step2Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step2Select.append(\"option\").attr(\"value\", \"add 7\").text(\"add 7\");\n    step2Select.append(\"option\").attr(\"value\", \"subtract 7\").text(\"subtract 7\");\n    step2Select.append(\"option\").attr(\"value\", \"multiply by 3\").text(\"multiply by 3\");\n    step2Select.append(\"option\").attr(\"value\", \"divide by 3\").text(\"divide by 3\");\n    step2Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      selectedModel: typeof incoming.selectedModel === \"number\" ? incoming.selectedModel : null,\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : \"\",\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Part 1 (Multiple Choice):\n- Correct answer: Option 3 (three x-tiles and one 7-tile equaling 40)\n\nPart 2 (Drag-match):\n- First step: subtract 7\n- Second step: divide by 3"
            }
          }
        },
        {
          "questions": {
            "id": 24242,
            "questionContent": {
              "questionText": "Cora is solving the equation 4k + 30 = 66. Her first step is shown below (subtract 30 from both sides).\n\nUse the dropdown to describe her second step.",
              "explanation": "To solve 4k + 30 = 66:\n- Step 1: Subtract 30 from both sides: 4k + 30 - 30 = 66 - 30, which gives 4k = 36\n- Step 2: Divide both sides by 4: 4k / 4 = 36 / 4, which gives k = 9\n\nThe solution is k = 9.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { secondStep: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let stepSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { secondStep: chartState.secondStep });\n  }\n\n  function renderControls() {\n    if (stepSelect) {\n      stepSelect.node().value = chartState.secondStep;\n      stepSelect.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Cora is solving the equation <strong>4k + 30 = 66</strong>. Her first step is shown below.\");\n\n    // Work shown card\n    const workCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    workCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").style(\"color\", \"#374151\").text(\"Cora's Work:\");\n\n    // Original equation\n    const eq1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#f0fdf4\").style(\"border-radius\", \"8px\");\n    eq1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#16a34a\").text(\"Equation:\");\n    eq1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"4k + 30 = 66\");\n\n    // Step 1\n    const step1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#eff6ff\").style(\"border-radius\", \"8px\");\n    step1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#2563eb\").text(\"Step 1:\");\n    step1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"4k + 30 <span style='color:#dc2626'>- 30</span> = 66 <span style='color:#dc2626'>- 30</span>\");\n\n    // Result after step 1\n    const result1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"background\", \"#fef3c7\").style(\"border-radius\", \"8px\");\n    result1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#d97706\").text(\"Result:\");\n    result1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"4k = 36\");\n\n    // Question about step 2\n    const questionCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    questionCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Use the dropdown to describe her second step:\");\n\n    const selectRow = questionCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\");\n    selectRow.append(\"span\").text(\"The second step is to\");\n\n    stepSelect = selectRow.append(\"select\")\n      .style(\"padding\", \"10px 16px\")\n      .style(\"border\", \"2px solid #3b82f6\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"min-width\", \"160px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"cursor\", \"pointer\")\n      .on(\"change\", function () {\n        chartState.secondStep = this.value;\n        sendChartState();\n      });\n\n    stepSelect.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    stepSelect.append(\"option\").attr(\"value\", \"add 4\").text(\"add 4\");\n    stepSelect.append(\"option\").attr(\"value\", \"subtract 4\").text(\"subtract 4\");\n    stepSelect.append(\"option\").attr(\"value\", \"multiply by 4\").text(\"multiply by 4\");\n    stepSelect.append(\"option\").attr(\"value\", \"divide by 4\").text(\"divide by 4\");\n\n    selectRow.append(\"span\").text(\"on both sides.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      secondStep: typeof incoming.secondStep === \"string\" ? incoming.secondStep : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"divide by 4\" from the dropdown\n- The equation shown is 4k + 30 = 66\n- First step shown: 4k + 30 - 30 = 66 - 30 resulting in 4k = 36\n- Second step: student selects the correct operation (divide by 4)"
            }
          }
        },
        {
          "questions": {
            "id": 24243,
            "questionContent": {
              "questionText": "Cora is solving the equation 5m + 20 = 45. Her first step is shown below (subtract 20 from both sides).\n\nUse the dropdown to describe her second step.",
              "explanation": "To solve 5m + 20 = 45:\n- Step 1: Subtract 20 from both sides: 5m + 20 - 20 = 45 - 20, which gives 5m = 25\n- Step 2: Divide both sides by 5: 5m / 5 = 25 / 5, which gives m = 5\n\nThe solution is m = 5.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { secondStep: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let stepSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { secondStep: chartState.secondStep });\n  }\n\n  function renderControls() {\n    if (stepSelect) {\n      stepSelect.node().value = chartState.secondStep;\n      stepSelect.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Cora is solving the equation <strong>5m + 20 = 45</strong>. Her first step is shown below.\");\n\n    // Work shown card\n    const workCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    workCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").style(\"color\", \"#374151\").text(\"Cora's Work:\");\n\n    // Original equation\n    const eq1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#f0fdf4\").style(\"border-radius\", \"8px\");\n    eq1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#16a34a\").text(\"Equation:\");\n    eq1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"5m + 20 = 45\");\n\n    // Step 1\n    const step1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#eff6ff\").style(\"border-radius\", \"8px\");\n    step1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#2563eb\").text(\"Step 1:\");\n    step1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"5m + 20 <span style='color:#dc2626'>- 20</span> = 45 <span style='color:#dc2626'>- 20</span>\");\n\n    // Result after step 1\n    const result1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"background\", \"#fef3c7\").style(\"border-radius\", \"8px\");\n    result1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#d97706\").text(\"Result:\");\n    result1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"5m = 25\");\n\n    // Question about step 2\n    const questionCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    questionCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Use the dropdown to describe her second step:\");\n\n    const selectRow = questionCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\");\n    selectRow.append(\"span\").text(\"The second step is to\");\n\n    stepSelect = selectRow.append(\"select\")\n      .style(\"padding\", \"10px 16px\")\n      .style(\"border\", \"2px solid #3b82f6\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"min-width\", \"160px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"cursor\", \"pointer\")\n      .on(\"change\", function () {\n        chartState.secondStep = this.value;\n        sendChartState();\n      });\n\n    stepSelect.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    stepSelect.append(\"option\").attr(\"value\", \"add 5\").text(\"add 5\");\n    stepSelect.append(\"option\").attr(\"value\", \"subtract 5\").text(\"subtract 5\");\n    stepSelect.append(\"option\").attr(\"value\", \"multiply by 5\").text(\"multiply by 5\");\n    stepSelect.append(\"option\").attr(\"value\", \"divide by 5\").text(\"divide by 5\");\n\n    selectRow.append(\"span\").text(\"on both sides.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      secondStep: typeof incoming.secondStep === \"string\" ? incoming.secondStep : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"divide by 5\" from the dropdown\n- The equation shown is 5m + 20 = 45\n- First step shown: 5m + 20 - 20 = 45 - 20 resulting in 5m = 25\n- Second step: student selects the correct operation (divide by 5)"
            }
          }
        },
        {
          "questions": {
            "id": 24246,
            "questionContent": {
              "questionText": "Naomi wants to solve the equation 10x - 16 = 24.\n\nDrag tiles to show the steps needed to solve the equation.",
              "explanation": "To solve 10x - 16 = 24:\n- Step 1: Add 16 to both sides: 10x - 16 + 16 = 24 + 16, which gives 10x = 40\n- Step 2: Divide both sides by 10: 10x / 10 = 40 / 10, which gives x = 4\n\nThe solution is x = 4.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  // Draggable operation tiles\n  const DRAG_TILES = [\n    { id: \"multiply-10\", text: \"multiply both sides by 10\" },\n    { id: \"divide-10\", text: \"divide both sides by 10\" },\n    { id: \"add-16\", text: \"add 16 to both sides\" },\n    { id: \"subtract-16\", text: \"subtract 16 from both sides\" },\n    { id: \"add-10\", text: \"add 10 to both sides\" },\n    { id: \"subtract-10\", text: \"subtract 10 from both sides\" },\n  ];\n\n  function createDefaultState() {\n    return { step1: null, step2: null };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let step1Zone = null;\n  let step2Zone = null;\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      step1: chartState.step1,\n      step2: chartState.step2\n    });\n  }\n\n  function renderDropZones(d3) {\n    // Render Step 1 zone\n    if (step1Zone) {\n      step1Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step1) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step1);\n        if (tile) {\n          step1Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#dbeafe\")\n            .style(\"border\", \"2px solid #3b82f6\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step1 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n\n    // Render Step 2 zone\n    if (step2Zone) {\n      step2Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step2) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step2);\n        if (tile) {\n          step2Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#fef3c7\")\n            .style(\"border\", \"2px solid #d97706\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step2 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n  }\n\n  function renderControls(d3) {\n    renderDropZones(d3);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) renderControls(currentD3);\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Naomi wants to solve the equation below.\");\n\n    // Equation display\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-size\", \"24px\").style(\"font-family\", \"serif\").style(\"text-align\", \"center\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"16px\").html(\"10<em>x</em>  16 = 24\");\n\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to the table to show how she can solve the equation in two steps.\");\n\n    // Steps table\n    const stepsTable = eqCard.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\");\n\n    // Step 1 row\n    const step1Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step1Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 1\");\n\n    step1Zone = step1Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"1\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step1 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Step 2 row\n    const step2Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step2Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 2\");\n\n    step2Zone = step2Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"2\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#d97706\").style(\"background\", \"#fef9c3\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step2 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Draggable tiles\n    const tilesContainer = eqCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"gap\", \"8px\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"border-radius\", \"12px\");\n\n    DRAG_TILES.forEach(tile => {\n      tilesContainer.append(\"div\")\n        .attr(\"draggable\", \"true\")\n        .attr(\"data-tile-id\", tile.id)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"14px\")\n        .style(\"cursor\", \"grab\")\n        .style(\"user-select\", \"none\")\n        .text(tile.text)\n        .on(\"dragstart\", function(event) {\n          if (interactivityLocked) {\n            event.preventDefault();\n            return;\n          }\n          d3.select(this).style(\"opacity\", \"0.5\");\n          event.dataTransfer.setData(\"text/plain\", tile.id);\n        })\n        .on(\"dragend\", function() {\n          d3.select(this).style(\"opacity\", \"1\");\n        });\n    });\n\n    // Instruction\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-top\", \"12px\")\n      .style(\"text-align\", \"center\")\n      .text(\"Click a tile in a step box to remove it.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : null,\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : null\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Step 1: add 16 (to both sides)\n- Step 2: divide by 10 (both sides)\n- Student selects or drags the correct operations in the correct order"
            }
          }
        },
        {
          "questions": {
            "id": 24247,
            "questionContent": {
              "questionText": "Naomi wants to solve the equation 8x - 12 = 28.\n\nDrag tiles to show the steps needed to solve the equation.",
              "explanation": "To solve 8x - 12 = 28:\n- Step 1: Add 12 to both sides: 8x - 12 + 12 = 28 + 12, which gives 8x = 40\n- Step 2: Divide both sides by 8: 8x / 8 = 40 / 8, which gives x = 5\n\nThe solution is x = 5.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  // Draggable operation tiles\n  const DRAG_TILES = [\n    { id: \"multiply-8\", text: \"multiply both sides by 8\" },\n    { id: \"divide-8\", text: \"divide both sides by 8\" },\n    { id: \"add-12\", text: \"add 12 to both sides\" },\n    { id: \"subtract-12\", text: \"subtract 12 from both sides\" },\n    { id: \"add-8\", text: \"add 8 to both sides\" },\n    { id: \"subtract-8\", text: \"subtract 8 from both sides\" },\n  ];\n\n  function createDefaultState() {\n    return { step1: null, step2: null };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let step1Zone = null;\n  let step2Zone = null;\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      step1: chartState.step1,\n      step2: chartState.step2\n    });\n  }\n\n  function renderDropZones(d3) {\n    // Render Step 1 zone\n    if (step1Zone) {\n      step1Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step1) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step1);\n        if (tile) {\n          step1Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#dbeafe\")\n            .style(\"border\", \"2px solid #3b82f6\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step1 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n\n    // Render Step 2 zone\n    if (step2Zone) {\n      step2Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step2) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step2);\n        if (tile) {\n          step2Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#fef3c7\")\n            .style(\"border\", \"2px solid #d97706\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step2 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n  }\n\n  function renderControls(d3) {\n    renderDropZones(d3);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) renderControls(currentD3);\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Naomi wants to solve the equation below.\");\n\n    // Equation display\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-size\", \"24px\").style(\"font-family\", \"serif\").style(\"text-align\", \"center\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"16px\").html(\"8<em>x</em>  12 = 28\");\n\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to the table to show how she can solve the equation in two steps.\");\n\n    // Steps table\n    const stepsTable = eqCard.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\");\n\n    // Step 1 row\n    const step1Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step1Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 1\");\n\n    step1Zone = step1Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"1\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step1 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Step 2 row\n    const step2Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step2Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 2\");\n\n    step2Zone = step2Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"2\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#d97706\").style(\"background\", \"#fef9c3\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step2 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Draggable tiles\n    const tilesContainer = eqCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"gap\", \"8px\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"border-radius\", \"12px\");\n\n    DRAG_TILES.forEach(tile => {\n      tilesContainer.append(\"div\")\n        .attr(\"draggable\", \"true\")\n        .attr(\"data-tile-id\", tile.id)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"14px\")\n        .style(\"cursor\", \"grab\")\n        .style(\"user-select\", \"none\")\n        .text(tile.text)\n        .on(\"dragstart\", function(event) {\n          if (interactivityLocked) {\n            event.preventDefault();\n            return;\n          }\n          d3.select(this).style(\"opacity\", \"0.5\");\n          event.dataTransfer.setData(\"text/plain\", tile.id);\n        })\n        .on(\"dragend\", function() {\n          d3.select(this).style(\"opacity\", \"1\");\n        });\n    });\n\n    // Instruction\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-top\", \"12px\")\n      .style(\"text-align\", \"center\")\n      .text(\"Click a tile in a step box to remove it.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : null,\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : null\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Step 1: add 12 (to both sides)\n- Step 2: divide by 8 (both sides)\n- Student selects or drags the correct operations in the correct order"
            }
          }
        },
        {
          "questions": {
            "id": 24250,
            "questionContent": {
              "questionText": "Six friends split the cost c at a restaurant. Each friend adds a $3 tip to their share and pays $16 total.\n\nThe equation is: c/6 + 3 = 16\n\nFind the total cost c of the meal before tip.",
              "explanation": "To solve c/6 + 3 = 16:\n- Step 1: Subtract 3 from both sides: c/6 + 3 - 3 = 16 - 3, which gives c/6 = 13\n- Step 2: Multiply both sides by 6: (c/6) * 6 = 13 * 6, which gives c = 78\n\nThe total cost of the meal before tip was $78.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"margin-bottom\", \"8px\").text(\"6 friends have lunch together at a restaurant. They split the total cost, c, evenly and then add in $3 each to tip the waiter.\");\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"Each person pays a total of $16.\");\n\n    // Equation and question card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"18px\")\n      .style(\"margin-bottom\", \"16px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"The equation\");\n\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\").style(\"margin\", \"0 4px\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"c\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"6\");\n\n    eqDisplay.append(\"span\").text(\"+ 3 = 16 models the scenario.\");\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Use the equation to find the total cost, c.\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"c = $\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters c = 78 or $78\n- Accept: 78, c=78, c = 78, $78"
            }
          }
        },
        {
          "questions": {
            "id": 24251,
            "questionContent": {
              "questionText": "Four friends split the cost c at a restaurant. Each friend adds a $5 tip to their share and pays $18 total.\n\nThe equation is: c/4 + 5 = 18\n\nFind the total cost c of the meal before tip.",
              "explanation": "To solve c/4 + 5 = 18:\n- Step 1: Subtract 5 from both sides: c/4 + 5 - 5 = 18 - 5, which gives c/4 = 13\n- Step 2: Multiply both sides by 4: (c/4) * 4 = 13 * 4, which gives c = 52\n\nThe total cost of the meal before tip was $52.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"margin-bottom\", \"8px\").text(\"4 friends have lunch together at a restaurant. They split the total cost, c, evenly and then add in $5 each to tip the waiter.\");\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"Each person pays a total of $18.\");\n\n    // Equation and question card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"18px\")\n      .style(\"margin-bottom\", \"16px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"The equation\");\n\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\").style(\"margin\", \"0 4px\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"c\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"4\");\n\n    eqDisplay.append(\"span\").text(\"+ 5 = 18 models the scenario.\");\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Use the equation to find the total cost, c.\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"c = $\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters c = 52 or $52\n- Accept: 52, c=52, c = 52, $52"
            }
          }
        },
        {
          "questions": {
            "id": 24254,
            "questionContent": {
              "questionText": "Solve the equation: 10 + n/2 = 19",
              "explanation": "To solve 10 + n/2 = 19:\n- Step 1: Subtract 10 from both sides: 10 + n/2 - 10 = 19 - 10, which gives n/2 = 9\n- Step 2: Multiply both sides by 2: (n/2) * 2 = 9 * 2, which gives n = 18\n\nThe solution is n = 18.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Problem card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Solve the equation:\");\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"10 +\");\n\n    // n/2 as fraction\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"n\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"2\");\n\n    eqDisplay.append(\"span\").text(\"= 19\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"n =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters n = 18\n- Accept: 18, n=18, n = 18"
            }
          }
        },
        {
          "questions": {
            "id": 24255,
            "questionContent": {
              "questionText": "Solve the equation: 8 + m/3 = 14",
              "explanation": "To solve 8 + m/3 = 14:\n- Step 1: Subtract 8 from both sides: 8 + m/3 - 8 = 14 - 8, which gives m/3 = 6\n- Step 2: Multiply both sides by 3: (m/3) * 3 = 6 * 3, which gives m = 18\n\nThe solution is m = 18.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Problem card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Solve the equation:\");\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"8 +\");\n\n    // m/3 as fraction\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"m\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"3\");\n\n    eqDisplay.append(\"span\").text(\"= 14\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"m =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters m = 18\n- Accept: 18, m=18, m = 18"
            }
          }
        },
        {
          "questions": {
            "id": 24258,
            "questionContent": {
              "questionText": "Solve the equation: 35 = 5x - 10",
              "explanation": "To solve 35 = 5x - 10:\n- Step 1: Add 10 to both sides: 35 + 10 = 5x - 10 + 10, which gives 45 = 5x\n- Step 2: Divide both sides by 5: 45 / 5 = 5x / 5, which gives 9 = x or x = 9\n\nThe solution is x = 9.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Solve the equation below.\");\n\n    // Equation card\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Equation:\");\n\n    // Display equation\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"28px\")\n      .style(\"font-family\", \"serif\")\n      .style(\"text-align\", \"center\")\n      .style(\"padding\", \"20px\")\n      .style(\"background\", \"#f0fdf4\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"35 = 5x - 10\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"What is the solution?\");\n\n    const answerRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    answerRow.append(\"span\").style(\"font-size\", \"20px\").style(\"font-style\", \"italic\").text(\"x =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #10b981\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .attr(\"placeholder\", \"?\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 9\n- Accept: 9, x=9, x = 9"
            }
          }
        },
        {
          "questions": {
            "id": 24259,
            "questionContent": {
              "questionText": "Solve the equation: 28 = 4x - 8",
              "explanation": "To solve 28 = 4x - 8:\n- Step 1: Add 8 to both sides: 28 + 8 = 4x - 8 + 8, which gives 36 = 4x\n- Step 2: Divide both sides by 4: 36 / 4 = 4x / 4, which gives 9 = x or x = 9\n\nThe solution is x = 9.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Solve the equation below.\");\n\n    // Equation card\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Equation:\");\n\n    // Display equation\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"28px\")\n      .style(\"font-family\", \"serif\")\n      .style(\"text-align\", \"center\")\n      .style(\"padding\", \"20px\")\n      .style(\"background\", \"#f0fdf4\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"28 = 4x - 8\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"What is the solution?\");\n\n    const answerRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    answerRow.append(\"span\").style(\"font-size\", \"20px\").style(\"font-style\", \"italic\").text(\"x =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #10b981\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .attr(\"placeholder\", \"?\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 9\n- Accept: 9, x=9, x = 9"
            }
          }
        },
        {
          "questions": {
            "id": 24262,
            "questionContent": {
              "questionText": "A bowling alley charges $3 per game, plus a $5 shoe rental fee. Eileen spent $14 at the bowling alley. How many games did she bowl?\n\nThe equation is: 3x + 5 = 14\n\nFind x, the number of games Eileen bowled.",
              "explanation": "To solve 3x + 5 = 14:\n- Step 1: Subtract 5 from both sides: 3x + 5 - 5 = 14 - 5, which gives 3x = 9\n- Step 2: Divide both sides by 3: 3x / 3 = 9 / 3, which gives x = 3\n\nEileen bowled 3 games.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"A bowling alley charges $3 per game, plus a $5 shoe rental fee. Eileen spent $14 at the bowling alley. How many games did she bowl?\");\n\n    // Answer input card\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    const answerRow = answerCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(\"games\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 3\n- Accept: 3, x=3, x = 3, 3 games"
            }
          }
        },
        {
          "questions": {
            "id": 24263,
            "questionContent": {
              "questionText": "A bowling alley charges $3 per game, plus a $5 shoe rental fee. Eileen spent $14 at the bowling alley. How many games did she bowl?\n\nThe equation is: 3x + 5 = 14\n\nFind x, the number of games Eileen bowled.",
              "explanation": "To solve 3x + 5 = 14:\n- Step 1: Subtract 5 from both sides: 3x + 5 - 5 = 14 - 5, which gives 3x = 9\n- Step 2: Divide both sides by 3: 3x / 3 = 9 / 3, which gives x = 3\n\nEileen bowled 3 games.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"A bowling alley charges $3 per game, plus a $5 shoe rental fee. Eileen spent $14 at the bowling alley. How many games did she bowl?\");\n\n    // Answer input card\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    const answerRow = answerCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(\"movies\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 3\n- Accept: 3, x=3, x = 3, 3 games"
            }
          }
        },
        {
          "questions": {
            "id": 24232,
            "questionContent": {
              "questionText": "The bar model shows steps for solving the equation 2x + 7 = 15.\n\nWhat is the solution to the equation?",
              "explanation": "Using the bar model:\n- Step 1: 2x + 7 = 15 (shown with two x-tiles and one 7-tile equaling 15)\n- Step 2: Subtract 7 from both sides: 2x = 8\n- Step 3: Divide both sides by 2: x = 4\n\nThe solution is x = 4.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\")\n      .style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\")\n      .attr(\"controls\", true).attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() { return { answer: \"\" }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { answer: chartState.answer }); }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) answerInput.node().value = chartState.answer;\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"The bar model shows steps for solving the equation <strong>2x + 7 = 15</strong>.\");\n\n    const barCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Step 1: 2x + 7 = 15\n    const step1 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: 2x + 7 = 15\");\n    const bars1 = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 2; i++) {\n      bars1.append(\"div\").style(\"width\", \"60px\").style(\"height\", \"40px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n    }\n    bars1.append(\"div\").style(\"width\", \"40px\").style(\"height\", \"40px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"7\");\n    bars1.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"20px\").style(\"font-weight\", \"600\").text(\"= 15\");\n\n    // Step 2: 2x = 8\n    const step2 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step2.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 2: 2x = 8\");\n    const bars2 = step2.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 2; i++) {\n      bars2.append(\"div\").style(\"width\", \"60px\").style(\"height\", \"40px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n    }\n    bars2.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"20px\").style(\"font-weight\", \"600\").text(\"= 8\");\n\n    // Step 3: x = ?\n    const step3 = barCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    step3.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 3: x = ?\");\n    const bars3 = step3.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 2; i++) {\n      bars3.append(\"div\").style(\"width\", \"60px\").style(\"height\", \"40px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n    }\n    const qmarks = step3.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"4px\").style(\"margin-top\", \"4px\");\n    for (let i = 0; i < 2; i++) {\n      qmarks.append(\"div\").style(\"width\", \"60px\").style(\"text-align\", \"center\").style(\"font-weight\", \"600\").text(\"?\");\n    }\n\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"What is the solution to the equation?\");\n    const inputRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    inputRow.append(\"span\").style(\"font-size\", \"18px\").style(\"font-style\", \"italic\").text(\"x =\");\n    answerInput = inputRow.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").style(\"width\", \"80px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #cbd5e1\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () { chartState.answer = this.value; sendChartState(); });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\" };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 4\n- Accept: 4, x=4, x = 4"
            }
          }
        },
        {
          "questions": {
            "id": 24236,
            "questionContent": {
              "questionText": "The algebra tiles show the first step for solving the equation 5x + 4 = 19.\n\nDrag the number of unit tiles equal to each x-tile.\n\nWhat is the solution to the equation 5x + 4 = 19?",
              "explanation": "Using algebra tiles:\n- Equation: 5x + 4 = 19 (5 x-tiles and 4 unit tiles = 19 unit tiles)\n- Step 1: Remove 4 from both sides: 5x = 15\n- Step 2: Since we have 5 x-tiles and 15 unit tiles, each x-tile equals 3 unit tiles\n- Solution: x = 3",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\")\n      .style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\")\n      .attr(\"controls\", true).attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  // Variation V02: 5x + 4 = 19  x = 3\n  const NUM_X_TILES = 5;\n  const NUM_UNIT_TILES_LEFT = 4;\n  const TOTAL_RIGHT = 19;\n  const STEP1_RESULT = 15; // 5x = 15\n  const SOLUTION = 3;\n\n  function createDefaultState() {\n    return { tiles: Array(NUM_X_TILES).fill(null).map(() => []), answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let dropZones = [];\n  let answerInput = null;\n  let dragSourceRef = null;\n  let currentD3 = null;\n  let containerSelectorRef = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      tiles: chartState.tiles.map(arr => arr.length),\n      answer: chartState.answer\n    });\n  }\n\n  function renderDropZones() {\n    dropZones.forEach((zone, i) => {\n      if (!zone) return;\n      // Clear existing tiles in the zone\n      zone.selectAll(\".dropped-tile\").remove();\n\n      // Render tiles from state\n      chartState.tiles[i].forEach((tileId, tileIndex) => {\n        zone.append(\"div\")\n          .attr(\"class\", \"dropped-tile\")\n          .attr(\"data-tile-id\", tileId)\n          .style(\"width\", \"24px\")\n          .style(\"height\", \"24px\")\n          .style(\"background\", \"#fda4af\")\n          .style(\"border\", \"2px solid #f43f5e\")\n          .style(\"border-radius\", \"4px\")\n          .style(\"display\", \"flex\")\n          .style(\"align-items\", \"center\")\n          .style(\"justify-content\", \"center\")\n          .style(\"font-weight\", \"600\")\n          .style(\"font-size\", \"12px\")\n          .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n          .text(\"1\")\n          .on(\"click\", function() {\n            if (interactivityLocked) return;\n            // Remove this tile when clicked\n            chartState.tiles[i].splice(tileIndex, 1);\n            sendChartState();\n            renderDropZones();\n          });\n      });\n    });\n  }\n\n  function renderControls() {\n    renderDropZones();\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\")\n      .style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"line-height\", \"1.6\")\n      .html(\"The algebra tiles show the first step for solving the equation <strong>\" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT + \"</strong>.\");\n\n    // Algebra tiles visualization\n    const tilesCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display\n    const eq1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    eq1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Equation: \" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT);\n    const eqRow1 = eq1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    // X-tiles (blue rectangles)\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    // Unit tiles on left side (pink squares)\n    for (let i = 0; i < NUM_UNIT_TILES_LEFT; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    eqRow1.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // Right side unit tiles arranged in columns\n    const rightSide = eqRow1.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(\" + NUM_X_TILES + \", 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < TOTAL_RIGHT; i++) {\n      rightSide.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Step 1\n    const step1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"20px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: \" + NUM_X_TILES + \"x = \" + STEP1_RESULT);\n    const stepRow = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      stepRow.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    stepRow.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // Step 1 result tiles arranged in grid\n    const rightStep1 = stepRow.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(\" + NUM_X_TILES + \", 24px)\")\n      .style(\"grid-template-rows\", \"repeat(\" + SOLUTION + \", 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < STEP1_RESULT; i++) {\n      rightStep1.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Drag instruction\n    tilesCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"Drag the number of unit tiles equal to each x-tile.\");\n\n    // Drop zones container\n    const dropZoneContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"16px\")\n      .style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"border-radius\", \"12px\");\n\n    dropZones = [];\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      const zoneWrapper = dropZoneContainer.append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-direction\", \"column\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"8px\");\n\n      // X-tile above drop zone\n      zoneWrapper.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").text(\"x\");\n\n      // Drop zone\n      const zone = zoneWrapper.append(\"div\")\n        .attr(\"class\", \"drop-zone\")\n        .attr(\"data-zone-index\", i)\n        .style(\"min-width\", \"60px\")\n        .style(\"min-height\", \"60px\")\n        .style(\"border\", \"2px dashed #9ca3af\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-wrap\", \"wrap\")\n        .style(\"gap\", \"2px\")\n        .style(\"padding\", \"4px\")\n        .style(\"align-content\", \"flex-start\")\n        .style(\"justify-content\", \"center\")\n        .style(\"background\", \"#fff\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"dragover\", function(event) {\n          event.preventDefault();\n          d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n        })\n        .on(\"dragleave\", function() {\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        })\n        .on(\"drop\", function(event) {\n          event.preventDefault();\n          if (interactivityLocked) return;\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n\n          const zoneIndex = parseInt(d3.select(this).attr(\"data-zone-index\"));\n          // Add a new tile to this zone\n          chartState.tiles[zoneIndex].push(\"tile-\" + Date.now());\n          sendChartState();\n          renderDropZones();\n        });\n\n      dropZones.push(zone);\n    }\n\n    // Draggable unit tile source - single tile that can be dragged multiple times\n    const dragSourceContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\")\n      .style(\"margin-top\", \"16px\");\n\n    dragSourceContainer.append(\"span\")\n      .style(\"font-weight\", \"500\")\n      .text(\"Drag unit tile:\");\n\n    // Single draggable tile (can be dragged multiple times)\n    dragSourceContainer.append(\"div\")\n      .attr(\"draggable\", \"true\")\n      .style(\"width\", \"28px\")\n      .style(\"height\", \"28px\")\n      .style(\"background\", \"#fda4af\")\n      .style(\"border\", \"2px solid #f43f5e\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"cursor\", \"grab\")\n      .style(\"box-shadow\", \"0 2px 4px rgba(0,0,0,0.1)\")\n      .text(\"1\")\n      .on(\"dragstart\", function(event) {\n        if (interactivityLocked) {\n          event.preventDefault();\n          return;\n        }\n        d3.select(this).style(\"opacity\", \"0.6\");\n        event.dataTransfer.setData(\"text/plain\", \"unit-tile\");\n      })\n      .on(\"dragend\", function() {\n        d3.select(this).style(\"opacity\", \"1\");\n      });\n\n    // Instruction to remove\n    dragSourceContainer.append(\"span\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-left\", \"8px\")\n      .text(\"(Click tiles in drop zones to remove)\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"What is the solution to the equation \" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT + \"?\");\n\n    const inputRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    inputRow.append(\"span\").style(\"font-size\", \"18px\").style(\"font-style\", \"italic\").text(\"x =\");\n    answerInput = inputRow.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    // Handle both array of counts and array of arrays\n    if (Array.isArray(incoming.tiles)) {\n      if (typeof incoming.tiles[0] === \"number\") {\n        // Convert counts to arrays\n        chartState.tiles = incoming.tiles.map((count, i) => {\n          const arr = [];\n          for (let j = 0; j < count; j++) arr.push(\"tile-\" + i + \"-\" + j);\n          return arr;\n        });\n      } else {\n        chartState.tiles = incoming.tiles;\n      }\n    } else {\n      chartState.tiles = Array(NUM_X_TILES).fill(null).map(() => []);\n    }\n    chartState.answer = typeof incoming.answer === \"string\" ? incoming.answer : \"\";\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector;\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Part 1: Student drags 3 unit tiles to each of the 5 x-tile drop zones\n- Part 2: Student enters x = 3\n- Accept: 3, x=3, x = 3"
            }
          }
        },
        {
          "questions": {
            "id": 24240,
            "questionContent": {
              "questionText": "Which model represents the equation 5x + 8 = 48?\n\nWhat are the steps needed to solve the equation 5x + 8 = 48?",
              "explanation": "The equation 5x + 8 = 48 is modeled by:\n- Five equal-sized x sections plus one 8 section, with the total being 48\n\nTo solve:\n1. Subtract 8 from both sides: 5x = 40\n2. Divide both sides by 5: x = 8",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedModel: null, step1: \"\", step2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let radioButtons = [];\n  let step1Select = null;\n  let step2Select = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { selectedModel: chartState.selectedModel, step1: chartState.step1, step2: chartState.step2 });\n  }\n\n  function renderControls() {\n    radioButtons.forEach((rb, i) => {\n      rb.property(\"checked\", chartState.selectedModel === i);\n      rb.property(\"disabled\", interactivityLocked);\n    });\n    if (step1Select) { step1Select.node().value = chartState.step1; step1Select.property(\"disabled\", interactivityLocked); }\n    if (step2Select) { step2Select.node().value = chartState.step2; step2Select.property(\"disabled\", interactivityLocked); }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which model represents the equation <strong>5x + 8 = 48</strong>?\");\n\n    // Multiple choice for models\n    const mcCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    radioButtons = [];\n\n    const models = [\n      { label: \"Option 1\", desc: \"x + 8 = 48\", parts: [{ type: \"x\", count: 1 }, { type: \"num\", val: 8 }] },\n      { label: \"Option 2\", desc: \"4x + 8 = 48\", parts: [{ type: \"x\", count: 4 }, { type: \"num\", val: 8 }] },\n      { label: \"Option 3\", desc: \"5x + 8 = 48 (Correct)\", parts: [{ type: \"x\", count: 5 }, { type: \"num\", val: 8 }] },\n      { label: \"Option 4\", desc: \"5(48) + 8 = x\", parts: [{ type: \"num\", val: 48, count: 5 }, { type: \"num\", val: 8 }] },\n    ];\n\n    models.forEach((model, i) => {\n      const row = mcCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"cursor\", \"pointer\")\n        .on(\"click\", function () {\n          if (interactivityLocked) return;\n          chartState.selectedModel = i;\n          sendChartState();\n          renderControls();\n        });\n\n      const radio = row.append(\"input\").attr(\"type\", \"radio\").attr(\"name\", \"model\").attr(\"value\", i)\n        .on(\"change\", function () {\n          chartState.selectedModel = i;\n          sendChartState();\n        });\n      radioButtons.push(radio);\n\n      // Bar model with = 48 to the right\n      const barContainer = row.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"2px\");\n\n      if (i === 0) {\n        // x + 8 = 48\n        barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"8\");\n      } else if (i === 1) {\n        // 4x + 8 = 48\n        for (let j = 0; j < 4; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"8\");\n      } else if (i === 2) {\n        // 5x + 8 = 48 (correct)\n        for (let j = 0; j < 5; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"8\");\n      } else {\n        // 5(48) + 8 = x (wrong)\n        for (let j = 0; j < 5; j++) {\n          barContainer.append(\"div\").style(\"width\", \"40px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"48\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"8\");\n      }\n\n      // = 48 to the right of bars\n      barContainer.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"18px\").style(\"font-weight\", \"600\").text(\"= 48\");\n    });\n\n    // Steps section\n    const stepsCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    stepsCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"What are the steps needed to solve the equation 5x + 8 = 48?\");\n\n    // Step 1\n    const step1Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"12px\");\n    step1Row.append(\"span\").text(\"The first step is to\");\n    step1Select = step1Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step1 = this.value;\n        sendChartState();\n      });\n    step1Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step1Select.append(\"option\").attr(\"value\", \"add 8\").text(\"add 8\");\n    step1Select.append(\"option\").attr(\"value\", \"subtract 8\").text(\"subtract 8\");\n    step1Select.append(\"option\").attr(\"value\", \"multiply by 5\").text(\"multiply by 5\");\n    step1Select.append(\"option\").attr(\"value\", \"divide by 5\").text(\"divide by 5\");\n    step1Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    // Step 2\n    const step2Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    step2Row.append(\"span\").text(\"The second step is to\");\n    step2Select = step2Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step2 = this.value;\n        sendChartState();\n      });\n    step2Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step2Select.append(\"option\").attr(\"value\", \"add 8\").text(\"add 8\");\n    step2Select.append(\"option\").attr(\"value\", \"subtract 8\").text(\"subtract 8\");\n    step2Select.append(\"option\").attr(\"value\", \"multiply by 5\").text(\"multiply by 5\");\n    step2Select.append(\"option\").attr(\"value\", \"divide by 5\").text(\"divide by 5\");\n    step2Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      selectedModel: typeof incoming.selectedModel === \"number\" ? incoming.selectedModel : null,\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : \"\",\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Part 1 (Multiple Choice):\n- Correct answer: Option 3 (five x-tiles and one 8-tile equaling 48)\n\nPart 2 (Drag-match):\n- First step: subtract 8\n- Second step: divide by 5"
            }
          }
        },
        {
          "questions": {
            "id": 24244,
            "questionContent": {
              "questionText": "Cora is solving the equation 3p + 18 = 36. Her first step is shown below (subtract 18 from both sides).\n\nUse the dropdown to describe her second step.",
              "explanation": "To solve 3p + 18 = 36:\n- Step 1: Subtract 18 from both sides: 3p + 18 - 18 = 36 - 18, which gives 3p = 18\n- Step 2: Divide both sides by 3: 3p / 3 = 18 / 3, which gives p = 6\n\nThe solution is p = 6.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { secondStep: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let stepSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { secondStep: chartState.secondStep });\n  }\n\n  function renderControls() {\n    if (stepSelect) {\n      stepSelect.node().value = chartState.secondStep;\n      stepSelect.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Cora is solving the equation <strong>3p + 18 = 36</strong>. Her first step is shown below.\");\n\n    // Work shown card\n    const workCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    workCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").style(\"color\", \"#374151\").text(\"Cora's Work:\");\n\n    // Original equation\n    const eq1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#f0fdf4\").style(\"border-radius\", \"8px\");\n    eq1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#16a34a\").text(\"Equation:\");\n    eq1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"3p + 18 = 36\");\n\n    // Step 1\n    const step1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#eff6ff\").style(\"border-radius\", \"8px\");\n    step1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#2563eb\").text(\"Step 1:\");\n    step1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"3p + 18 <span style='color:#dc2626'>- 18</span> = 36 <span style='color:#dc2626'>- 18</span>\");\n\n    // Result after step 1\n    const result1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"background\", \"#fef3c7\").style(\"border-radius\", \"8px\");\n    result1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#d97706\").text(\"Result:\");\n    result1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"3p = 18\");\n\n    // Question about step 2\n    const questionCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    questionCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Use the dropdown to describe her second step:\");\n\n    const selectRow = questionCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\");\n    selectRow.append(\"span\").text(\"The second step is to\");\n\n    stepSelect = selectRow.append(\"select\")\n      .style(\"padding\", \"10px 16px\")\n      .style(\"border\", \"2px solid #3b82f6\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"min-width\", \"160px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"cursor\", \"pointer\")\n      .on(\"change\", function () {\n        chartState.secondStep = this.value;\n        sendChartState();\n      });\n\n    stepSelect.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    stepSelect.append(\"option\").attr(\"value\", \"add 3\").text(\"add 3\");\n    stepSelect.append(\"option\").attr(\"value\", \"subtract 3\").text(\"subtract 3\");\n    stepSelect.append(\"option\").attr(\"value\", \"multiply by 3\").text(\"multiply by 3\");\n    stepSelect.append(\"option\").attr(\"value\", \"divide by 3\").text(\"divide by 3\");\n\n    selectRow.append(\"span\").text(\"on both sides.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      secondStep: typeof incoming.secondStep === \"string\" ? incoming.secondStep : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"divide by 3\" from the dropdown\n- The equation shown is 3p + 18 = 36\n- First step shown: 3p + 18 - 18 = 36 - 18 resulting in 3p = 18\n- Second step: student selects the correct operation (divide by 3)"
            }
          }
        },
        {
          "questions": {
            "id": 24248,
            "questionContent": {
              "questionText": "Naomi wants to solve the equation 6x - 18 = 30.\n\nDrag tiles to show the steps needed to solve the equation.",
              "explanation": "To solve 6x - 18 = 30:\n- Step 1: Add 18 to both sides: 6x - 18 + 18 = 30 + 18, which gives 6x = 48\n- Step 2: Divide both sides by 6: 6x / 6 = 48 / 6, which gives x = 8\n\nThe solution is x = 8.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  // Draggable operation tiles\n  const DRAG_TILES = [\n    { id: \"multiply-6\", text: \"multiply both sides by 6\" },\n    { id: \"divide-6\", text: \"divide both sides by 6\" },\n    { id: \"add-18\", text: \"add 18 to both sides\" },\n    { id: \"subtract-18\", text: \"subtract 18 from both sides\" },\n    { id: \"add-6\", text: \"add 6 to both sides\" },\n    { id: \"subtract-6\", text: \"subtract 6 from both sides\" },\n  ];\n\n  function createDefaultState() {\n    return { step1: null, step2: null };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let step1Zone = null;\n  let step2Zone = null;\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      step1: chartState.step1,\n      step2: chartState.step2\n    });\n  }\n\n  function renderDropZones(d3) {\n    // Render Step 1 zone\n    if (step1Zone) {\n      step1Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step1) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step1);\n        if (tile) {\n          step1Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#dbeafe\")\n            .style(\"border\", \"2px solid #3b82f6\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step1 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n\n    // Render Step 2 zone\n    if (step2Zone) {\n      step2Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step2) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step2);\n        if (tile) {\n          step2Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#fef3c7\")\n            .style(\"border\", \"2px solid #d97706\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step2 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n  }\n\n  function renderControls(d3) {\n    renderDropZones(d3);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) renderControls(currentD3);\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Naomi wants to solve the equation below.\");\n\n    // Equation display\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-size\", \"24px\").style(\"font-family\", \"serif\").style(\"text-align\", \"center\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"16px\").html(\"6<em>x</em>  18 = 30\");\n\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to the table to show how she can solve the equation in two steps.\");\n\n    // Steps table\n    const stepsTable = eqCard.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\");\n\n    // Step 1 row\n    const step1Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step1Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 1\");\n\n    step1Zone = step1Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"1\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step1 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Step 2 row\n    const step2Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step2Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 2\");\n\n    step2Zone = step2Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"2\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#d97706\").style(\"background\", \"#fef9c3\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step2 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Draggable tiles\n    const tilesContainer = eqCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"gap\", \"8px\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"border-radius\", \"12px\");\n\n    DRAG_TILES.forEach(tile => {\n      tilesContainer.append(\"div\")\n        .attr(\"draggable\", \"true\")\n        .attr(\"data-tile-id\", tile.id)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"14px\")\n        .style(\"cursor\", \"grab\")\n        .style(\"user-select\", \"none\")\n        .text(tile.text)\n        .on(\"dragstart\", function(event) {\n          if (interactivityLocked) {\n            event.preventDefault();\n            return;\n          }\n          d3.select(this).style(\"opacity\", \"0.5\");\n          event.dataTransfer.setData(\"text/plain\", tile.id);\n        })\n        .on(\"dragend\", function() {\n          d3.select(this).style(\"opacity\", \"1\");\n        });\n    });\n\n    // Instruction\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-top\", \"12px\")\n      .style(\"text-align\", \"center\")\n      .text(\"Click a tile in a step box to remove it.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : null,\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : null\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Step 1: add 18 (to both sides)\n- Step 2: divide by 6 (both sides)\n- Student selects or drags the correct operations in the correct order"
            }
          }
        },
        {
          "questions": {
            "id": 24252,
            "questionContent": {
              "questionText": "Five friends split the cost c at a restaurant. Each friend adds a $4 tip to their share and pays $15 total.\n\nThe equation is: c/5 + 4 = 15\n\nFind the total cost c of the meal before tip.",
              "explanation": "To solve c/5 + 4 = 15:\n- Step 1: Subtract 4 from both sides: c/5 + 4 - 4 = 15 - 4, which gives c/5 = 11\n- Step 2: Multiply both sides by 5: (c/5) * 5 = 11 * 5, which gives c = 55\n\nThe total cost of the meal before tip was $55.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"margin-bottom\", \"8px\").text(\"5 friends have lunch together at a restaurant. They split the total cost, c, evenly and then add in $4 each to tip the waiter.\");\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"Each person pays a total of $15.\");\n\n    // Equation and question card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"18px\")\n      .style(\"margin-bottom\", \"16px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"The equation\");\n\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\").style(\"margin\", \"0 4px\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"c\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"5\");\n\n    eqDisplay.append(\"span\").text(\"+ 4 = 15 models the scenario.\");\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Use the equation to find the total cost, c.\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"c = $\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters c = 55 or $55\n- Accept: 55, c=55, c = 55, $55"
            }
          }
        },
        {
          "questions": {
            "id": 24256,
            "questionContent": {
              "questionText": "Solve the equation: 5 + p/4 = 12",
              "explanation": "To solve 5 + p/4 = 12:\n- Step 1: Subtract 5 from both sides: 5 + p/4 - 5 = 12 - 5, which gives p/4 = 7\n- Step 2: Multiply both sides by 4: (p/4) * 4 = 7 * 4, which gives p = 28\n\nThe solution is p = 28.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Problem card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Solve the equation:\");\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"5 +\");\n\n    // p/4 as fraction\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"p\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"4\");\n\n    eqDisplay.append(\"span\").text(\"= 12\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"p =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters p = 28\n- Accept: 28, p=28, p = 28"
            }
          }
        },
        {
          "questions": {
            "id": 24260,
            "questionContent": {
              "questionText": "Solve the equation: 42 = 6x - 12",
              "explanation": "To solve 42 = 6x - 12:\n- Step 1: Add 12 to both sides: 42 + 12 = 6x - 12 + 12, which gives 54 = 6x\n- Step 2: Divide both sides by 6: 54 / 6 = 6x / 6, which gives 9 = x or x = 9\n\nThe solution is x = 9.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Solve the equation below.\");\n\n    // Equation card\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Equation:\");\n\n    // Display equation\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"28px\")\n      .style(\"font-family\", \"serif\")\n      .style(\"text-align\", \"center\")\n      .style(\"padding\", \"20px\")\n      .style(\"background\", \"#f0fdf4\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"42 = 6x - 12\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"What is the solution?\");\n\n    const answerRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    answerRow.append(\"span\").style(\"font-size\", \"20px\").style(\"font-style\", \"italic\").text(\"x =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #10b981\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .attr(\"placeholder\", \"?\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 9\n- Accept: 9, x=9, x = 9"
            }
          }
        },
        {
          "questions": {
            "id": 24264,
            "questionContent": {
              "questionText": "An arcade charges $2 per game, plus an $8 entry fee. Sofia spent $18 at the arcade. How many games did she play?\n\nThe equation is: 2x + 8 = 18\n\nFind x, the number of games Sofia played.",
              "explanation": "To solve 2x + 8 = 18:\n- Step 1: Subtract 8 from both sides: 2x + 8 - 8 = 18 - 8, which gives 2x = 10\n- Step 2: Divide both sides by 2: 2x / 2 = 10 / 2, which gives x = 5\n\nSofia played 5 games.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"An arcade charges $2 per game, plus an $8 entry fee. Sofia spent $18 at the arcade. How many games did she play?\");\n\n    // Answer input card\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    const answerRow = answerCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(\"games\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 5\n- Accept: 5, x=5, x = 5, 5 games"
            }
          }
        },
        {
          "questions": {
            "id": 24233,
            "questionContent": {
              "questionText": "The bar model shows steps for solving the equation 4x + 2 = 18.\n\nWhat is the solution to the equation?",
              "explanation": "Using the bar model:\n- Step 1: 4x + 2 = 18 (shown with four x-tiles and one 2-tile equaling 18)\n- Step 2: Subtract 2 from both sides: 4x = 16\n- Step 3: Divide both sides by 4: x = 4\n\nThe solution is x = 4.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\")\n      .style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\")\n      .attr(\"controls\", true).attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() { return { answer: \"\" }; }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() { sendMessage(\"response_updated\", { answer: chartState.answer }); }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) answerInput.node().value = chartState.answer;\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"The bar model shows steps for solving the equation <strong>4x + 2 = 18</strong>.\");\n\n    const barCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Step 1: 4x + 2 = 18\n    const step1 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: 4x + 2 = 18\");\n    const bars1 = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 4; i++) {\n      bars1.append(\"div\").style(\"width\", \"60px\").style(\"height\", \"40px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n    }\n    bars1.append(\"div\").style(\"width\", \"40px\").style(\"height\", \"40px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"2\");\n    bars1.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"20px\").style(\"font-weight\", \"600\").text(\"= 18\");\n\n    // Step 2: 4x = 16\n    const step2 = barCard.append(\"div\").style(\"margin-bottom\", \"24px\");\n    step2.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 2: 4x = 16\");\n    const bars2 = step2.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 4; i++) {\n      bars2.append(\"div\").style(\"width\", \"60px\").style(\"height\", \"40px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n    }\n    bars2.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"20px\").style(\"font-weight\", \"600\").text(\"= 16\");\n\n    // Step 3: x = ?\n    const step3 = barCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    step3.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 3: x = ?\");\n    const bars3 = step3.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n    for (let i = 0; i < 4; i++) {\n      bars3.append(\"div\").style(\"width\", \"60px\").style(\"height\", \"40px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n    }\n    const qmarks = step3.append(\"div\").style(\"display\", \"flex\").style(\"gap\", \"4px\").style(\"margin-top\", \"4px\");\n    for (let i = 0; i < 4; i++) {\n      qmarks.append(\"div\").style(\"width\", \"60px\").style(\"text-align\", \"center\").style(\"font-weight\", \"600\").text(\"?\");\n    }\n\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"What is the solution to the equation?\");\n    const inputRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    inputRow.append(\"span\").style(\"font-size\", \"18px\").style(\"font-style\", \"italic\").text(\"x =\");\n    answerInput = inputRow.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\").style(\"width\", \"80px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #cbd5e1\").style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\").on(\"input\", function () { chartState.answer = this.value; sendChartState(); });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = { answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\" };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 4\n- Accept: 4, x=4, x = 4"
            }
          }
        },
        {
          "questions": {
            "id": 24237,
            "questionContent": {
              "questionText": "The algebra tiles show the first step for solving the equation 2x + 5 = 13.\n\nDrag the number of unit tiles equal to each x-tile.\n\nWhat is the solution to the equation 2x + 5 = 13?",
              "explanation": "Using algebra tiles:\n- Equation: 2x + 5 = 13 (2 x-tiles and 5 unit tiles = 13 unit tiles)\n- Step 1: Remove 5 from both sides: 2x = 8\n- Step 2: Since we have 2 x-tiles and 8 unit tiles, each x-tile equals 4 unit tiles\n- Solution: x = 4",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"font-weight\", \"500\")\n      .style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\")\n      .style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\")\n      .style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\")\n      .text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\")\n      .attr(\"controls\", true).attr(\"src\", videoUrl)\n      .style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  // Variation V03: 2x + 5 = 13  x = 4\n  const NUM_X_TILES = 2;\n  const NUM_UNIT_TILES_LEFT = 5;\n  const TOTAL_RIGHT = 13;\n  const STEP1_RESULT = 8; // 2x = 8\n  const SOLUTION = 4;\n\n  function createDefaultState() {\n    return { tiles: Array(NUM_X_TILES).fill(null).map(() => []), answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let dropZones = [];\n  let answerInput = null;\n  let dragSourceRef = null;\n  let currentD3 = null;\n  let containerSelectorRef = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      tiles: chartState.tiles.map(arr => arr.length),\n      answer: chartState.answer\n    });\n  }\n\n  function renderDropZones() {\n    dropZones.forEach((zone, i) => {\n      if (!zone) return;\n      // Clear existing tiles in the zone\n      zone.selectAll(\".dropped-tile\").remove();\n\n      // Render tiles from state\n      chartState.tiles[i].forEach((tileId, tileIndex) => {\n        zone.append(\"div\")\n          .attr(\"class\", \"dropped-tile\")\n          .attr(\"data-tile-id\", tileId)\n          .style(\"width\", \"24px\")\n          .style(\"height\", \"24px\")\n          .style(\"background\", \"#fda4af\")\n          .style(\"border\", \"2px solid #f43f5e\")\n          .style(\"border-radius\", \"4px\")\n          .style(\"display\", \"flex\")\n          .style(\"align-items\", \"center\")\n          .style(\"justify-content\", \"center\")\n          .style(\"font-weight\", \"600\")\n          .style(\"font-size\", \"12px\")\n          .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n          .text(\"1\")\n          .on(\"click\", function() {\n            if (interactivityLocked) return;\n            // Remove this tile when clicked\n            chartState.tiles[i].splice(tileIndex, 1);\n            sendChartState();\n            renderDropZones();\n          });\n      });\n    });\n  }\n\n  function renderControls() {\n    renderDropZones();\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    renderControls();\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\")\n      .style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\")\n      .style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n      .append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"line-height\", \"1.6\")\n      .html(\"The algebra tiles show the first step for solving the equation <strong>\" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT + \"</strong>.\");\n\n    // Algebra tiles visualization\n    const tilesCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display\n    const eq1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"16px\");\n    eq1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Equation: \" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT);\n    const eqRow1 = eq1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    // X-tiles (blue rectangles)\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    // Unit tiles on left side (pink squares)\n    for (let i = 0; i < NUM_UNIT_TILES_LEFT; i++) {\n      eqRow1.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    eqRow1.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // Right side unit tiles arranged in columns\n    const rightSide = eqRow1.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(\" + NUM_X_TILES + \", 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < TOTAL_RIGHT; i++) {\n      rightSide.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Step 1\n    const step1 = tilesCard.append(\"div\").style(\"margin-bottom\", \"20px\");\n    step1.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"8px\").text(\"Step 1: \" + NUM_X_TILES + \"x = \" + STEP1_RESULT);\n    const stepRow = step1.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"4px\");\n\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      stepRow.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"14px\").text(\"x\");\n    }\n\n    stepRow.append(\"div\").style(\"font-size\", \"24px\").style(\"margin\", \"0 8px\").text(\"=\");\n\n    // Step 1 result tiles arranged in grid\n    const rightStep1 = stepRow.append(\"div\")\n      .style(\"display\", \"grid\")\n      .style(\"grid-template-columns\", \"repeat(\" + NUM_X_TILES + \", 24px)\")\n      .style(\"grid-template-rows\", \"repeat(\" + SOLUTION + \", 24px)\")\n      .style(\"gap\", \"2px\");\n    for (let i = 0; i < STEP1_RESULT; i++) {\n      rightStep1.append(\"div\").style(\"width\", \"24px\").style(\"height\", \"24px\")\n        .style(\"background\", \"#fda4af\").style(\"border\", \"2px solid #f43f5e\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"1\");\n    }\n\n    // Drag instruction\n    tilesCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"Drag the number of unit tiles equal to each x-tile.\");\n\n    // Drop zones container\n    const dropZoneContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"16px\")\n      .style(\"padding\", \"16px\").style(\"background\", \"#f9fafb\").style(\"border-radius\", \"12px\");\n\n    dropZones = [];\n    for (let i = 0; i < NUM_X_TILES; i++) {\n      const zoneWrapper = dropZoneContainer.append(\"div\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-direction\", \"column\")\n        .style(\"align-items\", \"center\")\n        .style(\"gap\", \"8px\");\n\n      // X-tile above drop zone\n      zoneWrapper.append(\"div\").style(\"width\", \"30px\").style(\"height\", \"60px\")\n        .style(\"background\", \"#93c5fd\").style(\"border\", \"2px solid #3b82f6\")\n        .style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\")\n        .style(\"font-weight\", \"600\").text(\"x\");\n\n      // Drop zone\n      const zone = zoneWrapper.append(\"div\")\n        .attr(\"class\", \"drop-zone\")\n        .attr(\"data-zone-index\", i)\n        .style(\"min-width\", \"60px\")\n        .style(\"min-height\", \"60px\")\n        .style(\"border\", \"2px dashed #9ca3af\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"display\", \"flex\")\n        .style(\"flex-wrap\", \"wrap\")\n        .style(\"gap\", \"2px\")\n        .style(\"padding\", \"4px\")\n        .style(\"align-content\", \"flex-start\")\n        .style(\"justify-content\", \"center\")\n        .style(\"background\", \"#fff\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"dragover\", function(event) {\n          event.preventDefault();\n          d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n        })\n        .on(\"dragleave\", function() {\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        })\n        .on(\"drop\", function(event) {\n          event.preventDefault();\n          if (interactivityLocked) return;\n          d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n\n          const zoneIndex = parseInt(d3.select(this).attr(\"data-zone-index\"));\n          // Add a new tile to this zone\n          chartState.tiles[zoneIndex].push(\"tile-\" + Date.now());\n          sendChartState();\n          renderDropZones();\n        });\n\n      dropZones.push(zone);\n    }\n\n    // Draggable unit tile source - single tile that can be dragged multiple times\n    const dragSourceContainer = tilesCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"12px\")\n      .style(\"margin-top\", \"16px\");\n\n    dragSourceContainer.append(\"span\")\n      .style(\"font-weight\", \"500\")\n      .text(\"Drag unit tile:\");\n\n    // Single draggable tile (can be dragged multiple times)\n    dragSourceContainer.append(\"div\")\n      .attr(\"draggable\", \"true\")\n      .style(\"width\", \"28px\")\n      .style(\"height\", \"28px\")\n      .style(\"background\", \"#fda4af\")\n      .style(\"border\", \"2px solid #f43f5e\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"font-weight\", \"600\")\n      .style(\"font-size\", \"14px\")\n      .style(\"cursor\", \"grab\")\n      .style(\"box-shadow\", \"0 2px 4px rgba(0,0,0,0.1)\")\n      .text(\"1\")\n      .on(\"dragstart\", function(event) {\n        if (interactivityLocked) {\n          event.preventDefault();\n          return;\n        }\n        d3.select(this).style(\"opacity\", \"0.6\");\n        event.dataTransfer.setData(\"text/plain\", \"unit-tile\");\n      })\n      .on(\"dragend\", function() {\n        d3.select(this).style(\"opacity\", \"1\");\n      });\n\n    // Instruction to remove\n    dragSourceContainer.append(\"span\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-left\", \"8px\")\n      .text(\"(Click tiles in drop zones to remove)\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\")\n      .text(\"What is the solution to the equation \" + NUM_X_TILES + \"x + \" + NUM_UNIT_TILES_LEFT + \" = \" + TOTAL_RIGHT + \"?\");\n\n    const inputRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    inputRow.append(\"span\").style(\"font-size\", \"18px\").style(\"font-style\", \"italic\").text(\"x =\");\n    answerInput = inputRow.append(\"input\").attr(\"type\", \"text\").attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\").style(\"padding\", \"10px\").style(\"border\", \"2px solid #cbd5e1\")\n      .style(\"border-radius\", \"8px\").style(\"font-size\", \"18px\").style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    // Handle both array of counts and array of arrays\n    if (Array.isArray(incoming.tiles)) {\n      if (typeof incoming.tiles[0] === \"number\") {\n        // Convert counts to arrays\n        chartState.tiles = incoming.tiles.map((count, i) => {\n          const arr = [];\n          for (let j = 0; j < count; j++) arr.push(\"tile-\" + i + \"-\" + j);\n          return arr;\n        });\n      } else {\n        chartState.tiles = incoming.tiles;\n      }\n    } else {\n      chartState.tiles = Array(NUM_X_TILES).fill(null).map(() => []);\n    }\n    chartState.answer = typeof incoming.answer === \"string\" ? incoming.answer : \"\";\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    containerSelectorRef = containerSelector;\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Part 1: Student drags 4 unit tiles to each of the 2 x-tile drop zones\n- Part 2: Student enters x = 4\n- Accept: 4, x=4, x = 4"
            }
          }
        },
        {
          "questions": {
            "id": 24241,
            "questionContent": {
              "questionText": "Which model represents the equation 2x + 11 = 35?\n\nWhat are the steps needed to solve the equation 2x + 11 = 35?",
              "explanation": "The equation 2x + 11 = 35 is modeled by:\n- Two equal-sized x sections plus one 11 section, with the total being 35\n\nTo solve:\n1. Subtract 11 from both sides: 2x = 24\n2. Divide both sides by 2: x = 12",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { selectedModel: null, step1: \"\", step2: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let radioButtons = [];\n  let step1Select = null;\n  let step2Select = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { selectedModel: chartState.selectedModel, step1: chartState.step1, step2: chartState.step2 });\n  }\n\n  function renderControls() {\n    radioButtons.forEach((rb, i) => {\n      rb.property(\"checked\", chartState.selectedModel === i);\n      rb.property(\"disabled\", interactivityLocked);\n    });\n    if (step1Select) { step1Select.node().value = chartState.step1; step1Select.property(\"disabled\", interactivityLocked); }\n    if (step2Select) { step2Select.node().value = chartState.step2; step2Select.property(\"disabled\", interactivityLocked); }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Which model represents the equation <strong>2x + 11 = 35</strong>?\");\n\n    // Multiple choice for models\n    const mcCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    radioButtons = [];\n\n    const models = [\n      { label: \"Option 1\", desc: \"x + 11 = 35\", parts: [{ type: \"x\", count: 1 }, { type: \"num\", val: 11 }] },\n      { label: \"Option 2\", desc: \"3x + 11 = 35\", parts: [{ type: \"x\", count: 3 }, { type: \"num\", val: 11 }] },\n      { label: \"Option 3\", desc: \"2x + 11 = 35 (Correct)\", parts: [{ type: \"x\", count: 2 }, { type: \"num\", val: 11 }] },\n      { label: \"Option 4\", desc: \"2(35) + 11 = x\", parts: [{ type: \"num\", val: 35, count: 2 }, { type: \"num\", val: 11 }] },\n    ];\n\n    models.forEach((model, i) => {\n      const row = mcCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"cursor\", \"pointer\")\n        .on(\"click\", function () {\n          if (interactivityLocked) return;\n          chartState.selectedModel = i;\n          sendChartState();\n          renderControls();\n        });\n\n      const radio = row.append(\"input\").attr(\"type\", \"radio\").attr(\"name\", \"model\").attr(\"value\", i)\n        .on(\"change\", function () {\n          chartState.selectedModel = i;\n          sendChartState();\n        });\n      radioButtons.push(radio);\n\n      // Bar model with = 35 to the right\n      const barContainer = row.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"2px\");\n\n      if (i === 0) {\n        // x + 11 = 35\n        barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"11\");\n      } else if (i === 1) {\n        // 3x + 11 = 35\n        for (let j = 0; j < 3; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"11\");\n      } else if (i === 2) {\n        // 2x + 11 = 35 (correct)\n        for (let j = 0; j < 2; j++) {\n          barContainer.append(\"div\").style(\"width\", \"50px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"x\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"11\");\n      } else {\n        // 2(35) + 11 = x (wrong)\n        for (let j = 0; j < 2; j++) {\n          barContainer.append(\"div\").style(\"width\", \"40px\").style(\"height\", \"35px\").style(\"background\", \"#bbf7d0\").style(\"border\", \"2px solid #22c55e\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").style(\"font-size\", \"12px\").text(\"35\");\n        }\n        barContainer.append(\"div\").style(\"width\", \"35px\").style(\"height\", \"35px\").style(\"background\", \"#c4b5fd\").style(\"border\", \"2px solid #8b5cf6\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").style(\"font-weight\", \"600\").text(\"11\");\n      }\n\n      // = 35 to the right of bars\n      barContainer.append(\"div\").style(\"margin-left\", \"12px\").style(\"font-size\", \"18px\").style(\"font-weight\", \"600\").text(\"= 35\");\n    });\n\n    // Steps section\n    const stepsCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    stepsCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"What are the steps needed to solve the equation 2x + 11 = 35?\");\n\n    // Step 1\n    const step1Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"12px\");\n    step1Row.append(\"span\").text(\"The first step is to\");\n    step1Select = step1Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step1 = this.value;\n        sendChartState();\n      });\n    step1Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step1Select.append(\"option\").attr(\"value\", \"add 11\").text(\"add 11\");\n    step1Select.append(\"option\").attr(\"value\", \"subtract 11\").text(\"subtract 11\");\n    step1Select.append(\"option\").attr(\"value\", \"multiply by 2\").text(\"multiply by 2\");\n    step1Select.append(\"option\").attr(\"value\", \"divide by 2\").text(\"divide by 2\");\n    step1Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    // Step 2\n    const step2Row = stepsCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    step2Row.append(\"span\").text(\"The second step is to\");\n    step2Select = step2Row.append(\"select\").style(\"padding\", \"8px 12px\").style(\"border\", \"2px dashed #9ca3af\").style(\"border-radius\", \"8px\").style(\"font-size\", \"14px\").style(\"min-width\", \"150px\")\n      .on(\"change\", function () {\n        chartState.step2 = this.value;\n        sendChartState();\n      });\n    step2Select.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    step2Select.append(\"option\").attr(\"value\", \"add 11\").text(\"add 11\");\n    step2Select.append(\"option\").attr(\"value\", \"subtract 11\").text(\"subtract 11\");\n    step2Select.append(\"option\").attr(\"value\", \"multiply by 2\").text(\"multiply by 2\");\n    step2Select.append(\"option\").attr(\"value\", \"divide by 2\").text(\"divide by 2\");\n    step2Row.append(\"span\").text(\"on both sides of the equation.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      selectedModel: typeof incoming.selectedModel === \"number\" ? incoming.selectedModel : null,\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : \"\",\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "Part 1 (Multiple Choice):\n- Correct answer: Option 3 (two x-tiles and one 11-tile equaling 35)\n\nPart 2 (Drag-match):\n- First step: subtract 11\n- Second step: divide by 2"
            }
          }
        },
        {
          "questions": {
            "id": 24245,
            "questionContent": {
              "questionText": "Cora is solving the equation 6n + 24 = 54. Her first step is shown below (subtract 24 from both sides).\n\nUse the dropdown to describe her second step.",
              "explanation": "To solve 6n + 24 = 54:\n- Step 1: Subtract 24 from both sides: 6n + 24 - 24 = 54 - 24, which gives 6n = 30\n- Step 2: Divide both sides by 6: 6n / 6 = 30 / 6, which gives n = 5\n\nThe solution is n = 5.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { secondStep: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let stepSelect = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { secondStep: chartState.secondStep });\n  }\n\n  function renderControls() {\n    if (stepSelect) {\n      stepSelect.node().value = chartState.secondStep;\n      stepSelect.property(\"disabled\", interactivityLocked);\n    }\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Cora is solving the equation <strong>6n + 24 = 54</strong>. Her first step is shown below.\");\n\n    // Work shown card\n    const workCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    workCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").style(\"color\", \"#374151\").text(\"Cora's Work:\");\n\n    // Original equation\n    const eq1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#f0fdf4\").style(\"border-radius\", \"8px\");\n    eq1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#16a34a\").text(\"Equation:\");\n    eq1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"6n + 24 = 54\");\n\n    // Step 1\n    const step1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"12px\").style(\"padding\", \"12px\").style(\"background\", \"#eff6ff\").style(\"border-radius\", \"8px\");\n    step1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#2563eb\").text(\"Step 1:\");\n    step1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"6n + 24 <span style='color:#dc2626'>- 24</span> = 54 <span style='color:#dc2626'>- 24</span>\");\n\n    // Result after step 1\n    const result1 = workCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"margin-bottom\", \"16px\").style(\"padding\", \"12px\").style(\"background\", \"#fef3c7\").style(\"border-radius\", \"8px\");\n    result1.append(\"span\").style(\"font-weight\", \"600\").style(\"margin-right\", \"12px\").style(\"color\", \"#d97706\").text(\"Result:\");\n    result1.append(\"span\").style(\"font-size\", \"18px\").style(\"font-family\", \"serif\").html(\"6n = 30\");\n\n    // Question about step 2\n    const questionCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    questionCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"Use the dropdown to describe her second step:\");\n\n    const selectRow = questionCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\").style(\"flex-wrap\", \"wrap\");\n    selectRow.append(\"span\").text(\"The second step is to\");\n\n    stepSelect = selectRow.append(\"select\")\n      .style(\"padding\", \"10px 16px\")\n      .style(\"border\", \"2px solid #3b82f6\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"16px\")\n      .style(\"min-width\", \"160px\")\n      .style(\"background\", \"#ffffff\")\n      .style(\"cursor\", \"pointer\")\n      .on(\"change\", function () {\n        chartState.secondStep = this.value;\n        sendChartState();\n      });\n\n    stepSelect.append(\"option\").attr(\"value\", \"\").text(\"Select...\");\n    stepSelect.append(\"option\").attr(\"value\", \"add 6\").text(\"add 6\");\n    stepSelect.append(\"option\").attr(\"value\", \"subtract 6\").text(\"subtract 6\");\n    stepSelect.append(\"option\").attr(\"value\", \"multiply by 6\").text(\"multiply by 6\");\n    stepSelect.append(\"option\").attr(\"value\", \"divide by 6\").text(\"divide by 6\");\n\n    selectRow.append(\"span\").text(\"on both sides.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      secondStep: typeof incoming.secondStep === \"string\" ? incoming.secondStep : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student selects \"divide by 6\" from the dropdown\n- The equation shown is 6n + 24 = 54\n- First step shown: 6n + 24 - 24 = 54 - 24 resulting in 6n = 30\n- Second step: student selects the correct operation (divide by 6)"
            }
          }
        },
        {
          "questions": {
            "id": 24249,
            "questionContent": {
              "questionText": "Naomi wants to solve the equation 5x - 15 = 35.\n\nDrag tiles to show the steps needed to solve the equation.",
              "explanation": "To solve 5x - 15 = 35:\n- Step 1: Add 15 to both sides: 5x - 15 + 15 = 35 + 15, which gives 5x = 50\n- Step 2: Divide both sides by 5: 5x / 5 = 50 / 5, which gives x = 10\n\nThe solution is x = 10.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  // Draggable operation tiles\n  const DRAG_TILES = [\n    { id: \"multiply-5\", text: \"multiply both sides by 5\" },\n    { id: \"divide-5\", text: \"divide both sides by 5\" },\n    { id: \"add-15\", text: \"add 15 to both sides\" },\n    { id: \"subtract-15\", text: \"subtract 15 from both sides\" },\n    { id: \"add-5\", text: \"add 5 to both sides\" },\n    { id: \"subtract-5\", text: \"subtract 5 from both sides\" },\n  ];\n\n  function createDefaultState() {\n    return { step1: null, step2: null };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let step1Zone = null;\n  let step2Zone = null;\n  let currentD3 = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", {\n      step1: chartState.step1,\n      step2: chartState.step2\n    });\n  }\n\n  function renderDropZones(d3) {\n    // Render Step 1 zone\n    if (step1Zone) {\n      step1Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step1) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step1);\n        if (tile) {\n          step1Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#dbeafe\")\n            .style(\"border\", \"2px solid #3b82f6\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step1 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n\n    // Render Step 2 zone\n    if (step2Zone) {\n      step2Zone.selectAll(\".dropped-tile\").remove();\n      if (chartState.step2) {\n        const tile = DRAG_TILES.find(t => t.id === chartState.step2);\n        if (tile) {\n          step2Zone.append(\"div\")\n            .attr(\"class\", \"dropped-tile\")\n            .style(\"padding\", \"10px 16px\")\n            .style(\"background\", \"#fef3c7\")\n            .style(\"border\", \"2px solid #d97706\")\n            .style(\"border-radius\", \"8px\")\n            .style(\"font-size\", \"14px\")\n            .style(\"cursor\", interactivityLocked ? \"default\" : \"pointer\")\n            .text(tile.text)\n            .on(\"click\", function() {\n              if (interactivityLocked) return;\n              chartState.step2 = null;\n              sendChartState();\n              renderDropZones(d3);\n            });\n        }\n      }\n    }\n  }\n\n  function renderControls(d3) {\n    renderDropZones(d3);\n  }\n\n  function setInteractivity(enabled) {\n    interactivityLocked = !enabled;\n    if (currentD3) renderControls(currentD3);\n  }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Naomi wants to solve the equation below.\");\n\n    // Equation display\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-size\", \"24px\").style(\"font-family\", \"serif\").style(\"text-align\", \"center\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"16px\").html(\"5<em>x</em>  15 = 35\");\n\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Drag tiles to the table to show how she can solve the equation in two steps.\");\n\n    // Steps table\n    const stepsTable = eqCard.append(\"div\").style(\"display\", \"flex\").style(\"flex-direction\", \"column\").style(\"gap\", \"8px\").style(\"margin-bottom\", \"24px\");\n\n    // Step 1 row\n    const step1Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step1Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 1\");\n\n    step1Zone = step1Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"1\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#3b82f6\").style(\"background\", \"#eff6ff\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step1 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Step 2 row\n    const step2Row = stepsTable.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"12px\");\n    step2Row.append(\"span\").style(\"font-weight\", \"600\").style(\"min-width\", \"60px\").text(\"Step 2\");\n\n    step2Zone = step2Row.append(\"div\")\n      .attr(\"class\", \"drop-zone\")\n      .attr(\"data-step\", \"2\")\n      .style(\"flex\", \"1\")\n      .style(\"min-height\", \"50px\")\n      .style(\"border\", \"2px dashed #9ca3af\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"8px\")\n      .style(\"background\", \"#fff\")\n      .on(\"dragover\", function(event) {\n        event.preventDefault();\n        d3.select(this).style(\"border-color\", \"#d97706\").style(\"background\", \"#fef9c3\");\n      })\n      .on(\"dragleave\", function() {\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n      })\n      .on(\"drop\", function(event) {\n        event.preventDefault();\n        if (interactivityLocked) return;\n        d3.select(this).style(\"border-color\", \"#9ca3af\").style(\"background\", \"#fff\");\n        const tileId = event.dataTransfer.getData(\"text/plain\");\n        if (tileId && DRAG_TILES.find(t => t.id === tileId)) {\n          chartState.step2 = tileId;\n          sendChartState();\n          renderDropZones(d3);\n        }\n      });\n\n    // Draggable tiles\n    const tilesContainer = eqCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"flex-wrap\", \"wrap\")\n      .style(\"gap\", \"8px\")\n      .style(\"justify-content\", \"center\")\n      .style(\"padding\", \"16px\")\n      .style(\"background\", \"#f9fafb\")\n      .style(\"border-radius\", \"12px\");\n\n    DRAG_TILES.forEach(tile => {\n      tilesContainer.append(\"div\")\n        .attr(\"draggable\", \"true\")\n        .attr(\"data-tile-id\", tile.id)\n        .style(\"padding\", \"10px 16px\")\n        .style(\"background\", \"#ffffff\")\n        .style(\"border\", \"1px solid #d1d5db\")\n        .style(\"border-radius\", \"8px\")\n        .style(\"font-size\", \"14px\")\n        .style(\"cursor\", \"grab\")\n        .style(\"user-select\", \"none\")\n        .text(tile.text)\n        .on(\"dragstart\", function(event) {\n          if (interactivityLocked) {\n            event.preventDefault();\n            return;\n          }\n          d3.select(this).style(\"opacity\", \"0.5\");\n          event.dataTransfer.setData(\"text/plain\", tile.id);\n        })\n        .on(\"dragend\", function() {\n          d3.select(this).style(\"opacity\", \"1\");\n        });\n    });\n\n    // Instruction\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"13px\")\n      .style(\"color\", \"#6b7280\")\n      .style(\"margin-top\", \"12px\")\n      .style(\"text-align\", \"center\")\n      .text(\"Click a tile in a step box to remove it.\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) {\n    renderControls(d3);\n  }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      step1: typeof incoming.step1 === \"string\" ? incoming.step1 : null,\n      step2: typeof incoming.step2 === \"string\" ? incoming.step2 : null\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      currentD3 = d3;\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => {\n        chartState = createDefaultState();\n        renderFromState(d3);\n        sendMessage(\"selection_cleared\", null);\n        sendChartState();\n      };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Step 1: add 15 (to both sides)\n- Step 2: divide by 5 (both sides)\n- Student selects or drags the correct operations in the correct order"
            }
          }
        },
        {
          "questions": {
            "id": 24253,
            "questionContent": {
              "questionText": "Eight friends split the cost c at a restaurant. Each friend adds a $2 tip to their share and pays $12 total.\n\nThe equation is: c/8 + 2 = 12\n\nFind the total cost c of the meal before tip.",
              "explanation": "To solve c/8 + 2 = 12:\n- Step 1: Subtract 2 from both sides: c/8 + 2 - 2 = 12 - 2, which gives c/8 = 10\n- Step 2: Multiply both sides by 8: (c/8) * 8 = 10 * 8, which gives c = 80\n\nThe total cost of the meal before tip was $80.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").style(\"margin-bottom\", \"8px\").text(\"8 friends have lunch together at a restaurant. They split the total cost, c, evenly and then add in $2 each to tip the waiter.\");\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"Each person pays a total of $12.\");\n\n    // Equation and question card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"18px\")\n      .style(\"margin-bottom\", \"16px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"The equation\");\n\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\").style(\"margin\", \"0 4px\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"c\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"8\");\n\n    eqDisplay.append(\"span\").text(\"+ 2 = 12 models the scenario.\");\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Use the equation to find the total cost, c.\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"c = $\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters c = 80 or $80\n- Accept: 80, c=80, c = 80, $80"
            }
          }
        },
        {
          "questions": {
            "id": 24257,
            "questionContent": {
              "questionText": "Solve the equation: 12 + k/5 = 20",
              "explanation": "To solve 12 + k/5 = 20:\n- Step 1: Subtract 12 from both sides: 12 + k/5 - 12 = 20 - 12, which gives k/5 = 8\n- Step 2: Multiply both sides by 5: (k/5) * 5 = 8 * 5, which gives k = 40\n\nThe solution is k = 40.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Problem card\n    const problemCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n\n    problemCard.append(\"div\")\n      .style(\"font-size\", \"16px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"Solve the equation:\");\n\n    // Equation display\n    const eqDisplay = problemCard.append(\"div\")\n      .style(\"font-size\", \"20px\")\n      .style(\"margin-bottom\", \"24px\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    eqDisplay.append(\"span\").text(\"12 +\");\n\n    // k/5 as fraction\n    const frac = eqDisplay.append(\"span\").style(\"display\", \"inline-flex\").style(\"flex-direction\", \"column\").style(\"align-items\", \"center\");\n    frac.append(\"span\").style(\"font-style\", \"italic\").text(\"k\");\n    frac.append(\"div\").style(\"width\", \"15px\").style(\"height\", \"1px\").style(\"background\", \"#374151\");\n    frac.append(\"span\").text(\"5\");\n\n    eqDisplay.append(\"span\").text(\"= 20\");\n\n    // Answer input\n    const answerRow = problemCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-style\", \"italic\")\n      .text(\"k =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters k = 40\n- Accept: 40, k=40, k = 40"
            }
          }
        },
        {
          "questions": {
            "id": 24261,
            "questionContent": {
              "questionText": "Solve the equation: 21 = 3x - 6",
              "explanation": "To solve 21 = 3x - 6:\n- Step 1: Add 6 to both sides: 21 + 6 = 3x - 6 + 6, which gives 27 = 3x\n- Step 2: Divide both sides by 3: 27 / 3 = 3x / 3, which gives 9 = x or x = 9\n\nThe solution is x = 9.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"EMOJI\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").html(\"Solve the equation below.\");\n\n    // Equation card\n    const eqCard = createStandardCard(d3, container, { marginBottom: \"24px\" });\n    eqCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"16px\").text(\"Equation:\");\n\n    // Display equation\n    eqCard.append(\"div\")\n      .style(\"font-size\", \"28px\")\n      .style(\"font-family\", \"serif\")\n      .style(\"text-align\", \"center\")\n      .style(\"padding\", \"20px\")\n      .style(\"background\", \"#f0fdf4\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"margin-bottom\", \"16px\")\n      .text(\"21 = 3x - 6\");\n\n    // Answer input\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    answerCard.append(\"div\").style(\"font-weight\", \"600\").style(\"margin-bottom\", \"12px\").text(\"What is the solution?\");\n\n    const answerRow = answerCard.append(\"div\").style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"gap\", \"8px\");\n    answerRow.append(\"span\").style(\"font-size\", \"20px\").style(\"font-style\", \"italic\").text(\"x =\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"2px solid #10b981\")\n      .style(\"border-radius\", \"8px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .attr(\"placeholder\", \"?\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 9\n- Accept: 9, x=9, x = 9"
            }
          }
        },
        {
          "questions": {
            "id": 24265,
            "questionContent": {
              "questionText": "A mini golf course charges $5 per round, plus a $3 club rental fee. Jake spent $23 at the mini golf course. How many rounds did he play?\n\nThe equation is: 5x + 3 = 23\n\nFind x, the number of rounds Jake played.",
              "explanation": "To solve 5x + 3 = 23:\n- Step 1: Subtract 3 from both sides: 5x + 3 - 3 = 23 - 3, which gives 5x = 20\n- Step 2: Divide both sides by 5: 5x / 5 = 20 / 5, which gives x = 4\n\nJake played 4 rounds.",
              "type": "d3",
              "d3Content": "(function () {\n  \"use strict\";\n\n  const CARD_STYLES = {\n    large: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"16px\", padding: \"24px\", boxShadow: \"0 6px 16px rgba(15,23,42,0.05)\" },\n    small: { background: \"#ffffff\", border: \"1px solid #e5e7eb\", borderRadius: \"12px\", padding: \"16px\", boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" },\n  };\n\n  function createStandardCard(d3, container, options) {\n    options = options || {};\n    const styles = CARD_STYLES[options.size || \"large\"];\n    return container.append(\"div\")\n      .style(\"background\", styles.background).style(\"border\", styles.border)\n      .style(\"border-radius\", styles.borderRadius).style(\"padding\", styles.padding)\n      .style(\"box-shadow\", styles.boxShadow).style(\"margin-bottom\", options.marginBottom || \"32px\");\n  }\n\n  function createVideoAccordion(d3, container, videoUrl) {\n    if (!videoUrl) return null;\n    container.append(\"div\").style(\"font-size\", \"14px\").style(\"margin-top\", \"32px\").style(\"margin-bottom\", \"8px\").style(\"color\", \"#6b7280\").text(\"Optional:\");\n    const accordion = container.append(\"details\").style(\"background\", \"#f9fafb\").style(\"border\", \"1px solid #e5e7eb\").style(\"border-radius\", \"12px\").style(\"padding\", \"16px\").style(\"margin-bottom\", \"20px\");\n    accordion.append(\"summary\").style(\"cursor\", \"pointer\").style(\"font-weight\", \"600\").style(\"font-size\", \"15px\").style(\"color\", \"#3b82f6\").style(\"list-style\", \"none\").text(\" [If you're stuck] Watch the Worked Example Video Again\");\n    accordion.append(\"div\").style(\"margin-top\", \"16px\").append(\"video\").attr(\"controls\", true).attr(\"src\", videoUrl).style(\"width\", \"100%\").style(\"max-width\", \"600px\").style(\"border-radius\", \"8px\");\n    return accordion;\n  }\n\n  const VIDEO_URL = \"https://yjzd1yycpsrqsbyd.public.blob.vercel-storage.com/roadmaps/skill-179/worked-example-video.mp4\";\n\n  function createDefaultState() {\n    return { answer: \"\" };\n  }\n\n  let chartState = createDefaultState();\n  let interactivityLocked = false;\n  let d3Promise = null;\n  let messageHandlerRegistered = false;\n  let answerInput = null;\n\n  function ensureD3() {\n    if (window.d3) return Promise.resolve(window.d3);\n    if (d3Promise) return d3Promise;\n    d3Promise = new Promise((resolve, reject) => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js\";\n      script.onload = () => resolve(window.d3);\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n    return d3Promise;\n  }\n\n  function sendMessage(type, payload) {\n    const msg = { type, payload };\n    if (window.parent) window.parent.postMessage(msg, \"*\");\n    window.postMessage(msg, \"*\");\n  }\n\n  function sendChartState() {\n    sendMessage(\"response_updated\", { answer: chartState.answer });\n  }\n\n  function renderControls() {\n    if (answerInput && answerInput.node().value !== chartState.answer) {\n      answerInput.node().value = chartState.answer;\n    }\n    if (answerInput) answerInput.property(\"disabled\", interactivityLocked);\n  }\n\n  function setInteractivity(enabled) { interactivityLocked = !enabled; renderControls(); }\n\n  function buildLayout(d3, containerSelector) {\n    const container = d3.select(containerSelector);\n    container.html(\"\");\n    container.style(\"font-family\", \"'Inter', system-ui, -apple-system\").style(\"color\", \"#1f2937\").style(\"line-height\", \"1.6\").style(\"overflow\", \"auto\");\n\n    // Intro with emoji\n    const introContainer = container.append(\"div\").style(\"display\", \"grid\").style(\"grid-template-columns\", \"auto 1fr\").style(\"gap\", \"16px\").style(\"margin-bottom\", \"24px\").style(\"align-items\", \"center\");\n    const emojiCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    emojiCard.style(\"display\", \"flex\").style(\"align-items\", \"center\").style(\"justify-content\", \"center\").append(\"div\").style(\"font-size\", \"48px\").text(\"\");\n    const textCard = createStandardCard(d3, introContainer, { size: \"small\", marginBottom: \"0\" });\n    textCard.append(\"div\").style(\"font-size\", \"16px\").text(\"A mini golf course charges $5 per round, plus a $3 club rental fee. Jake spent $23 at the mini golf course. How many rounds did he play?\");\n\n    // Answer input card\n    const answerCard = createStandardCard(d3, container, { size: \"small\", marginBottom: \"24px\" });\n    const answerRow = answerCard.append(\"div\")\n      .style(\"display\", \"flex\")\n      .style(\"align-items\", \"center\")\n      .style(\"gap\", \"8px\");\n\n    answerInput = answerRow.append(\"input\")\n      .attr(\"type\", \"text\")\n      .attr(\"inputmode\", \"numeric\")\n      .style(\"width\", \"80px\")\n      .style(\"padding\", \"10px\")\n      .style(\"border\", \"1px solid #d1d5db\")\n      .style(\"border-radius\", \"4px\")\n      .style(\"font-size\", \"18px\")\n      .style(\"text-align\", \"center\")\n      .on(\"input\", function () {\n        chartState.answer = this.value;\n        sendChartState();\n      });\n\n    answerRow.append(\"span\")\n      .style(\"font-size\", \"16px\")\n      .text(\"rounds\");\n\n    createVideoAccordion(d3, container, VIDEO_URL);\n  }\n\n  function renderFromState(d3) { renderControls(); }\n\n  function applyInitialState(payload) {\n    const incoming = payload || {};\n    chartState = {\n      answer: typeof incoming.answer === \"string\" ? incoming.answer : \"\"\n    };\n    sendChartState();\n  }\n\n  function setupMessageHandlers(d3) {\n    if (messageHandlerRegistered) return;\n    messageHandlerRegistered = true;\n    window.addEventListener(\"message\", (e) => {\n      const { data } = e;\n      if (!data) return;\n      if (data.type === \"setInitialState\") { applyInitialState(data.payload); renderFromState(d3); }\n      if (data.type === \"set_lock\") setInteractivity(data.payload === false);\n      if (data.type === \"check_answer\") sendChartState();\n    });\n  }\n\n  function createChart(containerSelector) {\n    ensureD3().then((d3) => {\n      buildLayout(d3, containerSelector);\n      renderFromState(d3);\n      window.clearChart = () => { chartState = createDefaultState(); renderFromState(d3); sendMessage(\"selection_cleared\", null); sendChartState(); };\n      window.getSvg = () => \"\";\n      window.setInteractivity = setInteractivity;\n      setupMessageHandlers(d3);\n    }).catch(console.error);\n  }\n\n  window.createChart = createChart;\n  window.createArtifact = createChart;\n})();\n",
              "acceptanceCriteria": "- Student enters x = 4\n- Accept: 4, x=4, x = 4, 4 rounds"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 2: Keeping the Equation Balanced",
      "assignment_id": 19206,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19206/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22759,
            "questionContent": {
              "questionText": "Here is a hanger that is in balance. We don't know how much any of its shapes weigh.\n\n![A balanced hanger. Left side, 2 circles, 4 squares. Right side, 2 squares, 2 triangles, 2 circles, 2 triangles.](https://cms-assets.illustrativemathematics.org/vh7lhopdujziedymhh0p9foyx101)1\\. How could you remove shapes from the hanger and keep it in balance? Describe in words or draw a new diagram. 2. How could you add shapes to the hanger and keep it in balance? Describe in words or draw a new diagram.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 91.58019909152004,
                        "y": 207.79923624476768,
                        "z": 0.6396997312229804
                      },
                      "pageId": "page:LuxLjIDTnVXEm62eHpW69",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:LuxLjIDTnVXEm62eHpW69",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "document:document": {
                      "id": "document:document",
                      "meta": {},
                      "name": "",
                      "gridSize": 10,
                      "typeName": "document"
                    },
                    "page:LuxLjIDTnVXEm62eHpW69": {
                      "id": "page:LuxLjIDTnVXEm62eHpW69",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:xFW4_95RKVy77hPJ5JtOt": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:xFW4_95RKVy77hPJ5JtOt",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1502,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:78233106-e705-4b78-8a2e-a3bd50c2c98e",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:LuxLjIDTnVXEm62eHpW69",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:78233106-e705-4b78-8a2e-a3bd50c2c98e": {
                      "id": "asset:78233106-e705-4b78-8a2e-a3bd50c2c98e",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1502,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1595",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.shape.tape-diagram": 0,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1608",
              "acceptanceCriteria": "- Describe how to remove shapes from both sides to keep the hanger balanced\n- Describe how to add shapes to both sides to keep the hanger balanced\n\nSample responses:\n\n1. I can remove 2 circles from each side.\n2. I can add 1 triangle to each side.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 3: Balanced Moves",
      "assignment_id": 19207,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19207/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22760,
            "questionContent": {
              "questionText": "1. Match these pairs of equations with the description of what is done in each step.\n\n   Step 1: (12x - 6) / (6x - 3) = 10 / 5 A: Add 3 to each side\n\n   Step 2: (6x - 3) / 6x = 5 / 8 B: Multiply each side by 1/6\n\n   Step 3: (6x) / x = 8 / (4/3) C: Divide each side by 2\n\n2. You are given the equation 3(x - 2) = 8. Is your first step to distribute or divide? Explain your reasoning.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:Dky13x6wQ5heWMU6MYEbh",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:Dky13x6wQ5heWMU6MYEbh",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:Dky13x6wQ5heWMU6MYEbh": {
                      "id": "page:Dky13x6wQ5heWMU6MYEbh",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:X14deewUVNBmDJjo_rngL": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:X14deewUVNBmDJjo_rngL",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1414,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:9eee9a18-215e-495b-be7f-436628dbfa02",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:Dky13x6wQ5heWMU6MYEbh",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:9eee9a18-215e-495b-be7f-436628dbfa02": {
                      "id": "asset:9eee9a18-215e-495b-be7f-436628dbfa02",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1414,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1596",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1596",
              "acceptanceCriteria": "- Correctly match each step with the corresponding operation\n- Provide a reasoned explanation for whether to distribute or divide first when solving 3(x - 2) = 8\n\nSample responses:\n\n1. Step 1: C, Step 2: A, Step 3: B\n2. Sample responses:\n   - I would distribute the 3. That way I do not need to deal with fractions like 8/3 until the end.\n   - I would divide each side by 3. Then there are fewer terms to manage while solving.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 4: More Balanced Moves",
      "assignment_id": 19208,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19208/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22761,
            "questionContent": {
              "questionText": "Examine Lin's solution to 8(x - 3) + 7 = 2x(4 - 17).\n\nLin's solution:\n\n![Lin's solution showing steps](https://cms-assets.illustrativemathematics.org/vq175rpna20vu8uxgxehcrtp59l4)1\\. For each step, determine if the 2 equations are equivalent. If they are not, describe the error. 2. What is the correct solution to the original equation?",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:dc8xo8GOJ8rZf7dbqUCBA",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:dc8xo8GOJ8rZf7dbqUCBA",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:dc8xo8GOJ8rZf7dbqUCBA": {
                      "id": "page:dc8xo8GOJ8rZf7dbqUCBA",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:_y05UWgRMMFGPVCW4kYaK": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:_y05UWgRMMFGPVCW4kYaK",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1370,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:248b24c4-f1c5-4c9c-9113-8c9f74582e80",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:dc8xo8GOJ8rZf7dbqUCBA",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:248b24c4-f1c5-4c9c-9113-8c9f74582e80": {
                      "id": "asset:248b24c4-f1c5-4c9c-9113-8c9f74582e80",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1370,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1597",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1597",
              "acceptanceCriteria": "- Identify whether each step in Lin's solution produces equivalent equations\n- Describe any errors found in the steps\n- Provide the correct solution to the original equation\n\nSample response:\n\n1. ![Solution showing error analysis](https://cms-assets.illustrativemathematics.org/zd59nxdulr0upyimc14hdjp2wqsa)\n2. x = 1/2 or equivalent",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 5: Solving Any Linear Equation",
      "assignment_id": 19209,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19209/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22762,
            "questionContent": {
              "questionText": "Noah tries to solve the equation (1/2)(7x - 6) = 6x - 10.\n\nCheck Noah's work. If it is not correct, describe what is wrong and show the correct work.\n\n(1/2)(7x - 6) = 6x - 10 7x - 6 = 12x - 10 7x = 12x - 4 -5x = -4 x = 4/5",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:pdqPUSuRlB-hSMXAr0tPD",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:pdqPUSuRlB-hSMXAr0tPD",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:pdqPUSuRlB-hSMXAr0tPD": {
                      "id": "page:pdqPUSuRlB-hSMXAr0tPD",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:TXA70eqhRcd5R7Fl7-T4W": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:TXA70eqhRcd5R7Fl7-T4W",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 922,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:2eede4d7-2989-4e78-aac5-7ddff7c2d8cf",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:pdqPUSuRlB-hSMXAr0tPD",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:2eede4d7-2989-4e78-aac5-7ddff7c2d8cf": {
                      "id": "asset:2eede4d7-2989-4e78-aac5-7ddff7c2d8cf",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 922,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1598",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1598",
              "acceptanceCriteria": "- Identify the error in Noah's work\n- Explain what Noah did wrong\n- Provide the correct solution\n\nSample response: Going from line 1 to line 2, Noah tried to multiply each side of the equation by 2, but did not multiply the 10. When you double each side of an equation, each term needs to be multiplied by 2.\n\nCorrect work:\n(1/2)(7x - 6) = 6x - 10\n7x - 6 = 12x - 20\n7x = 12x - 14\n-5x = -14\nx = 14/5",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 6: Strategic Solving",
      "assignment_id": 19210,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19210/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22763,
            "questionContent": {
              "questionText": "1. Without solving, identify whether this equation has a solution that is positive, negative, or zero. Explain your reasoning.\n\n   3x - 5 = -3\n\n2. Solve the equation.\n\n   x - 5(x - 1) = x - (2x - 3)",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:sDcpdtyMMIwo_JxTx-2ie",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:sDcpdtyMMIwo_JxTx-2ie",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:sDcpdtyMMIwo_JxTx-2ie": {
                      "id": "page:sDcpdtyMMIwo_JxTx-2ie",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:ijhABOWT9ZHHGGX9Nubnh": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:ijhABOWT9ZHHGGX9Nubnh",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 888,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:1be1f303-8260-47e0-a28a-8a1af72de209",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:sDcpdtyMMIwo_JxTx-2ie",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:1be1f303-8260-47e0-a28a-8a1af72de209": {
                      "id": "asset:1be1f303-8260-47e0-a28a-8a1af72de209",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 888,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1599",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1599",
              "acceptanceCriteria": "- Identify whether the solution is positive, negative, or zero without solving\n- Provide reasoning for the determination\n- Solve the equation correctly\n\nSample responses:\n\n1. Positive. Sample reasoning: If 3x - 5 = -3, then the x must be positive. If x is negative, then subtracting 5 from 3x would result in a number less than -3. For similar reasons, x cannot be zero.\n\n2. x = 2/3 (or equivalent)",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 7: All, Some, or No Solutions",
      "assignment_id": 19211,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19211/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22764,
            "questionContent": {
              "questionText": "3x + 8 = 3x + \\__\\_\n\nWhat value could you write in after \"3x + \" that would make the equation true for:\n\n1. no values of x?\n2. all values of x?\n3. just one value of x?",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:SIfoDub2WrXrPiV_iwCTX",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:SIfoDub2WrXrPiV_iwCTX",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:SIfoDub2WrXrPiV_iwCTX": {
                      "id": "page:SIfoDub2WrXrPiV_iwCTX",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:BEVflcKapA9BWCOktn_DZ": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:BEVflcKapA9BWCOktn_DZ",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1014,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:96f573e7-a8ca-48fa-bba8-b9a7a5c338c6",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:SIfoDub2WrXrPiV_iwCTX",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:96f573e7-a8ca-48fa-bba8-b9a7a5c338c6": {
                      "id": "asset:96f573e7-a8ca-48fa-bba8-b9a7a5c338c6",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1014,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1600",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1600",
              "acceptanceCriteria": "- Identify a value that makes the equation have no solutions\n- Identify a value that makes the equation have all values of x as solutions\n- Identify a value (or type of value) that makes the equation have exactly one solution\n\nSample responses:\n\n1. Any value other than 8.\n2. 8\n3. Any variable term, like x or 2x, in order to create an equation with one solution.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 9: When Are They the Same?",
      "assignment_id": 19212,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19212/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22765,
            "questionContent": {
              "questionText": "To own and operate a home printer, it costs $100 for the printer and an additional $0.05 per page for ink. To print out pages at an office store, it costs $0.25 per page. Let p represent number of pages.\n\n1. What does the equation 100 + 0.05p = 0.25p represent?\n2. The solution to that equation is p = 500. What does the solution mean?",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:V1q56-pYuxZNq5aNLJ_1W",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:V1q56-pYuxZNq5aNLJ_1W",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:V1q56-pYuxZNq5aNLJ_1W": {
                      "id": "page:V1q56-pYuxZNq5aNLJ_1W",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:i2bWETKMGpvL7_opWgHtB": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:i2bWETKMGpvL7_opWgHtB",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 860,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:b73979c1-3207-437c-9834-f7e95c3480b5",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:V1q56-pYuxZNq5aNLJ_1W",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:b73979c1-3207-437c-9834-f7e95c3480b5": {
                      "id": "asset:b73979c1-3207-437c-9834-f7e95c3480b5",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 860,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1601",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1601",
              "acceptanceCriteria": "- Explain what the equation represents in the context of the problem\n- Interpret the meaning of the solution p = 500 in context\n\nSample responses:\n\n1. The equation represents when the cost for owning and operating a home printer is equal to the cost for printing at an office store.\n2. The solution of p = 500 means that the costs are equal for printing 500 pages.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 10: On or Off the Line?",
      "assignment_id": 19213,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19213/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22766,
            "questionContent": {
              "questionText": "On the coordinate plane shown, one line shows combinations of dimes and quarters that are worth $3. The other line shows combinations of dimes and quarters that total to 12 coins.\n\n![Graph of two intersecting lines in the x y plane, origin 0, with grid. Horizontal axis, number of quarters, scale 0 to 20, by 1s. Vertical axis, number of dimes, scale 0 to 20 by 1s. A line, labeled 12 coins all together, crosses the y axis at 12 and slants downward and to the right. It passes through the points 1 comma 11, 2 comma 10, 3 comma 9, 4 comma 8, 5 comma 7, 6 comma 6, 7 comma 5, 8 comma 4, 9 comma 3, 10 comma 2, 11 comma 1, and 12 comma 0. Another line, labeled dimes and quarters that total to 3 dollars slants downward and to the right. It passes through the points 6 comma 15, 8 comma 10 and 10 comma 5.](https://cms-assets.illustrativemathematics.org/zyz07k3tl6g48jox1o6zzzinbnic)1\\. Name one combination of 12 coins shown on the graph. How does the graph show that the combination is true? 2. Name one combination of coins shown on the graph that total to $3. 3. How many quarters and dimes would you need to have both 12 coins and $3 at the same time? How does the graph show that this is true?",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:ySKxB93B5GFYpYDUa9-Az",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:ySKxB93B5GFYpYDUa9-Az",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:ySKxB93B5GFYpYDUa9-Az": {
                      "id": "page:ySKxB93B5GFYpYDUa9-Az",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:eNctdYcbqBPrVPPrmEhkr": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:eNctdYcbqBPrVPPrmEhkr",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1834,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:6dee9e0c-8ed9-4c30-b37b-f1d1bdf70a51",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:ySKxB93B5GFYpYDUa9-Az",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:6dee9e0c-8ed9-4c30-b37b-f1d1bdf70a51": {
                      "id": "asset:6dee9e0c-8ed9-4c30-b37b-f1d1bdf70a51",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1834,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1602",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1602",
              "acceptanceCriteria": "- Identify a combination of 12 coins from the graph\n- Explain how the graph shows this combination is true\n- Identify a combination of coins that total $3\n- Determine the combination that satisfies both conditions\n- Explain how the graph shows the solution to both conditions\n\nSample responses:\n\n1. Sample responses: 6 quarters and 6 dimes. 11 quarters and 1 dime. The point (6, 6) (or (11, 1)) is on the graph of the line representing 12 coins all together.\n2. Sample responses: 6 quarters and 15 dimes. 10 quarters and 5 dimes.\n3. 12 quarters and 0 dimes because the point (12, 0) is on both lines.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 11: On Both of the Lines",
      "assignment_id": 19214,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19214/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22767,
            "questionContent": {
              "questionText": "Andre and Noah start tracking their savings at the same time.\n\nAndre starts with $15 and deposits $5 per week.\n\nNoah starts with $2.50 and deposits $7.50 per week. The graph of Noah's savings is given, and his equation is y = 7.5x + 2.5, where x represents the number of weeks and y represents his savings.\n\nWrite the equation for Andre's savings, and graph it alongside Noah's. What does the intersection point mean in this situation?\n\n![Graph of a line in the x y plane, origin O, with grid. Horizontal axis, weeks, scale 0 to 12, by 1's. Vertical axis, savings in dollars, scale 0 to 45, by 5's. The line passes through the points 1 comma 10 and 3 comma 25.](https://cms-assets.illustrativemathematics.org/8svlkkmwdlt0kjcatniia2qdrh3u)",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:6Lh560BSfXndrm51mhIF3",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:6Lh560BSfXndrm51mhIF3",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:6Lh560BSfXndrm51mhIF3": {
                      "id": "page:6Lh560BSfXndrm51mhIF3",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:TOWds38tPaLq6RRLoRAuL": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:TOWds38tPaLq6RRLoRAuL",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1512,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:46445b50-bbad-4ffb-83fc-6ddb14dc58a9",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:6Lh560BSfXndrm51mhIF3",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:46445b50-bbad-4ffb-83fc-6ddb14dc58a9": {
                      "id": "asset:46445b50-bbad-4ffb-83fc-6ddb14dc58a9",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1512,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1603",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1603",
              "acceptanceCriteria": "- Write the equation for Andre's savings\n- Graph Andre's equation alongside Noah's\n- Explain the meaning of the intersection point in context\n\nSample response:\n\n![Graph showing both lines with intersection point](https://cms-assets.illustrativemathematics.org/pjz8rj3z5gwvuc00uveey1yghpfb-cp-68564)\n\nThe intersection at (5, 40) means that after 5 weeks, Noah and Andre each have $40.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 12: Systems of Equations",
      "assignment_id": 19215,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19215/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22768,
            "questionContent": {
              "questionText": "Lin's glass has 12 ounces of water and she drinks it at a rate of 1/3 ounce per second.\n\nDiego's glass has 20 ounces and he drinks it at a rate of 2/3 ounce per second.\n\n1. Graph this situation on the axes provided.\n\n   ![Empty x y plane, origin O, with grid. Horizontal axis, seconds, scale 0 to 42, by 3's. Vertical axis, ounces, scale 0 to 20, by 2's.](https://cms-assets.illustrativemathematics.org/kfozrwykcugyz5ixf8nxjlqyof8j)\n\n2. What does the graph tell you about the situation and how many solutions there are?",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:WmFDOc5Of__vC7uE0A2XI",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:WmFDOc5Of__vC7uE0A2XI",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:WmFDOc5Of__vC7uE0A2XI": {
                      "id": "page:WmFDOc5Of__vC7uE0A2XI",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:G-mTyROvrSIhHRXaZqxfU": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:G-mTyROvrSIhHRXaZqxfU",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 1566,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:98f7e9cb-4717-4d05-8ffb-4ccb26ad153f",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:WmFDOc5Of__vC7uE0A2XI",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:98f7e9cb-4717-4d05-8ffb-4ccb26ad153f": {
                      "id": "asset:98f7e9cb-4717-4d05-8ffb-4ccb26ad153f",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 1566,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1604",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1604",
              "acceptanceCriteria": "- Graph both situations correctly\n- Interpret the graph to determine the number of solutions\n- Explain what the solution means in context\n\nSample responses:\n\n1. ![Graph showing both lines with intersection point](https://cms-assets.illustrativemathematics.org/imetgmax6v3iajk1i276v3rgahtb-cp-68512)\n\n2. Sample response: There is one solution at (24, 4) meaning that after 24 seconds both of them have 4 ounces of water left.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 13: Solving Systems of Equations",
      "assignment_id": 19216,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19216/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22769,
            "questionContent": {
              "questionText": "![Two lines in an x y plane. One line slants upward and right. It crosses the x axis to the left of the origin. It crosses the y axis above the origin. A second line slants upward and right. It crosses the y axis below the origin. The lines do not intersect.](https://cms-assets.illustrativemathematics.org/zflfuhstyiteyt5vcime837rhpg5)1\\. Given the lines shown here, what are two possible equations for this system of equations? 2. How many solutions does this system of equations have? Explain your reasoning.",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:aTMBbOaZR8SMf7vm1AN5E",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:aTMBbOaZR8SMf7vm1AN5E",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:aTMBbOaZR8SMf7vm1AN5E": {
                      "id": "page:aTMBbOaZR8SMf7vm1AN5E",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:Hmz65CRCIZ-LtSkznc94Q": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:Hmz65CRCIZ-LtSkznc94Q",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 906,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:c0f374b0-43db-4c84-9454-63a9e9a5e861",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:aTMBbOaZR8SMf7vm1AN5E",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:c0f374b0-43db-4c84-9454-63a9e9a5e861": {
                      "id": "asset:c0f374b0-43db-4c84-9454-63a9e9a5e861",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 906,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1605",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1605",
              "acceptanceCriteria": "- Write two equations that represent the system shown in the graph\n- Determine the number of solutions for the system\n- Provide reasoning based on the characteristics of the lines\n\nSample responses:\n\n1. Any two equations with the same positive slope for each linear equation yet one with a negative y-intercept and the other a positive y-intercept\n2. 0. Sample reasoning: Since the lines are parallel and do not intersect, there are no solutions to the system of equations.",
              "recording": "optional"
            }
          }
        }
      ]
    },
    {
      "group_name": "802 - Alg 1",
      "assignment_name": "Lesson 14: Solving More Systems",
      "assignment_id": 19217,
      "module_name": "Alg 1 Unit 8.4",
      "assignment_url": "http://www.podsie.org/student/assignments/19217/352",
      "assignment_questions": [
        {
          "questions": {
            "id": 22770,
            "questionContent": {
              "questionText": "Solve this system of equations:\n\n{y = 2x {x = -y + 6",
              "type": "canvas",
              "teacherCanvasState": {
                "session": {
                  "version": 0,
                  "isGridMode": false,
                  "pageStates": [
                    {
                      "camera": {
                        "x": 0,
                        "y": 0,
                        "z": 1
                      },
                      "pageId": "page:_Ckndg3iJTcmirU_0HQEZ",
                      "focusedGroupId": null,
                      "selectedShapeIds": []
                    }
                  ],
                  "isDebugMode": false,
                  "isFocusMode": false,
                  "isToolLocked": false,
                  "currentPageId": "page:_Ckndg3iJTcmirU_0HQEZ",
                  "exportBackground": true
                },
                "document": {
                  "store": {
                    "page:_Ckndg3iJTcmirU_0HQEZ": {
                      "id": "page:_Ckndg3iJTcmirU_0HQEZ",
                      "meta": {},
                      "name": "Page 1",
                      "index": "a1",
                      "typeName": "page"
                    },
                    "shape:TisMoCfzNFxh--gDgd4SA": {
                      "x": 0,
                      "y": 0,
                      "id": "shape:TisMoCfzNFxh--gDgd4SA",
                      "meta": {
                        "creatorRole": "teacher",
                        "editableByStudents": false
                      },
                      "type": "image",
                      "index": "a1",
                      "props": {
                        "h": 448,
                        "w": 2000,
                        "url": "",
                        "crop": null,
                        "flipX": false,
                        "flipY": false,
                        "altText": "Cool-Down.png",
                        "assetId": "asset:618b0b64-361a-42f5-9abf-9303c83f7708",
                        "playing": true
                      },
                      "opacity": 1,
                      "isLocked": false,
                      "parentId": "page:_Ckndg3iJTcmirU_0HQEZ",
                      "rotation": 0,
                      "typeName": "shape"
                    },
                    "asset:618b0b64-361a-42f5-9abf-9303c83f7708": {
                      "id": "asset:618b0b64-361a-42f5-9abf-9303c83f7708",
                      "meta": {},
                      "type": "image",
                      "props": {
                        "h": 448,
                        "w": 2000,
                        "src": "https://www.podsie.org/api/public-assets/1606",
                        "name": "Cool-Down.png",
                        "mimeType": "image/png",
                        "isAnimated": false
                      },
                      "typeName": "asset"
                    }
                  },
                  "schema": {
                    "sequences": {
                      "com.tldraw.page": 1,
                      "com.tldraw.asset": 1,
                      "com.tldraw.shape": 4,
                      "com.tldraw.store": 4,
                      "com.tldraw.camera": 1,
                      "com.tldraw.pointer": 1,
                      "com.tldraw.document": 2,
                      "com.tldraw.instance": 25,
                      "com.tldraw.shape.geo": 10,
                      "com.tldraw.shape.draw": 2,
                      "com.tldraw.shape.line": 5,
                      "com.tldraw.shape.note": 9,
                      "com.tldraw.shape.text": 3,
                      "com.tldraw.asset.image": 5,
                      "com.tldraw.asset.video": 5,
                      "com.tldraw.shape.arrow": 6,
                      "com.tldraw.shape.embed": 4,
                      "com.tldraw.shape.frame": 1,
                      "com.tldraw.shape.group": 0,
                      "com.tldraw.shape.image": 5,
                      "com.tldraw.shape.video": 4,
                      "com.tldraw.binding.arrow": 1,
                      "com.tldraw.asset.bookmark": 2,
                      "com.tldraw.shape.bookmark": 2,
                      "com.tldraw.shape.highlight": 1,
                      "com.tldraw.instance_presence": 6,
                      "com.tldraw.instance_page_state": 5
                    },
                    "schemaVersion": 2
                  }
                }
              },
              "studentStartMode": "clone_teacher_canvas",
              "previewImageUrl": "https://www.podsie.org/api/public-assets/1606",
              "acceptanceCriteria": "- Solve the system of equations correctly\n- Show work or reasoning for the solution\n\nSample response: (2, 4). Sample Reasoning: Use the substitution method to rewrite the system as the one variable equation x = -(2x) + 6, then solve.",
              "recording": "optional"
            }
          }
        }
      ]
    }
  ]
}