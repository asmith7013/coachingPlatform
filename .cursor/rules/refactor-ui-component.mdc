---
description: Refactor UI files to use atomic components and token-based classes instead of raw HTML and Tailwind utilities.
globs: 
alwaysApply: false
---
âœ¨ Atomic UI Component Setup Instructions (Token-Aware, cn-Based)

Use these instructions as the standard for every new atomic component in src/components/ui/.

ğŸ§± 1. Component Structure
	â€¢	âœ… Use a functional TypeScript component
	â€¢	âœ… Always include className and children props
	â€¢	âœ… Accept optional semantic props:
padding, radius, variant, size, border, gap, fontSize, etc.
	â€¢	âœ… Props should be typed using keyof typeof from tokens.ts, e.g.:

padding?: keyof typeof spacing
radius?: keyof typeof radii

ğŸ¨ 2. Use Token-Based Utility Classes

âœ… Use token classNames only â€” never raw Tailwind values.

Token Group	Tailwind Equivalents	Source
spacing	p-md, px-lg, gap-sm	tokens.spacing
radii	rounded-md, rounded-full	tokens.radii
fontSizes	text-base, text-xl	tokens.fontSizes
colorVariants	bg-primary, text-muted	tokens.colorVariants
borders	border, border-width-md	tokens.borders

âš™ï¸ 3. Apply Token Props with Defaults

const paddingClass = spacing[padding ?? 'md']
const radiusClass = radii[radius ?? 'md']
const borderClass = border ? borders.default : undefined

return (
  <div className={cn('bg-surface', paddingClass, radiusClass, borderClass, className)}>
    {children}
  </div>
)

ğŸš« Common Gotchas to Avoid

Anti-pattern	Why itâ€™s a problem	Better Alternative
`px-${spacing.md}`	Outputs px-undefined at runtime	Use spacing.md directly
text-sm, rounded-lg (raw classes)	Breaks token abstraction	Use fontSizes.sm, radii.md
clsx()	Use your custom cn() instead	cn() handles token merging

ğŸ§  4. Component-Specific Token Props

Component	Recommended Token Props
Card	padding, radius, border
Button	variant, size, radius
Text	fontSize, color
FormSection	spacing, border, gap
ShellLayout	padding, fontSize, bg, title
Topbar	variant (solid | transparent), padding, radius

src
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ error-boundaries
â”‚   â”‚   â”œâ”€â”€ SentryBoundaryWrapper.tsx
â”‚   â”‚   â””â”€â”€ SentryErrorBoundary.tsx
â”‚   â”œâ”€â”€ features
â”‚   â”‚   â”œâ”€â”€ imRoutine
â”‚   â”‚   â”‚   â”œâ”€â”€ GradeUnitLessonSelector.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LessonCompactView.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LessonDetailView.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RoutineFilter.tsx
â”‚   â”‚   â”œâ”€â”€ lookFors
â”‚   â”‚   â”‚   (empty directory)
â”‚   â”‚   â”œâ”€â”€ schools
â”‚   â”‚   â”‚   (empty directory)
â”‚   â”‚   â””â”€â”€ shared
â”‚   â”‚       â”œâ”€â”€ form
â”‚   â”‚       â”‚   â”œâ”€â”€ BulkUploadForm.tsx
â”‚   â”‚       â”‚   â””â”€â”€ GenericAddForm.tsx
â”‚   â”‚       â””â”€â”€ ResourceHeader.tsx
â”‚   â””â”€â”€ ui
â”‚       â”œâ”€â”€ fields
â”‚       â”‚   â”œâ”€â”€ Checkbox.tsx
â”‚       â”‚   â”œâ”€â”€ FieldWrapper.tsx
â”‚       â”‚   â”œâ”€â”€ Input.tsx
â”‚       â”‚   â”œâ”€â”€ Label.tsx
â”‚       â”‚   â”œâ”€â”€ Select.tsx
â”‚       â”‚   â”œâ”€â”€ Switch.tsx
â”‚       â”‚   â””â”€â”€ Textarea.tsx
â”‚       â”œâ”€â”€ layout
â”‚       â”‚   â”œâ”€â”€ shell-layout.tsx
â”‚       â”‚   â”œâ”€â”€ sidebar.tsx
â”‚       â”‚   â””â”€â”€ topbar.tsx
â”‚       â”œâ”€â”€ table
â”‚       â”‚   â”œâ”€â”€ variants
â”‚       â”‚   â”‚   â”œâ”€â”€ compact.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ paginated.tsx
â”‚       â”‚   â”‚   â””â”€â”€ sticky-header.tsx
â”‚       â”‚   â”œâ”€â”€ table-actions.tsx
â”‚       â”‚   â”œâ”€â”€ table-cell.tsx
â”‚       â”‚   â”œâ”€â”€ table-empty.tsx
â”‚       â”‚   â”œâ”€â”€ table-header.tsx
â”‚       â”‚   â”œâ”€â”€ table-row.tsx
â”‚       â”‚   â””â”€â”€ table.tsx
â”‚       â”œâ”€â”€ typography
â”‚       â”‚   â”œâ”€â”€ Heading.tsx
â”‚       â”‚   â””â”€â”€ Text.tsx
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ card.tsx
â”‚       â”œâ”€â”€ empty-state.tsx
â”‚       â”œâ”€â”€ form-section.tsx
â”‚       â”œâ”€â”€ form.tsx
â”‚       â””â”€â”€ page-header.tsx


âœï¸ 5. Style Consistency Rules

âœ… Always use token-based utility classes
âœ… Props > hardcoded classNames
âŒ Never use things like text-gray-500 or rounded-lg
âœ… Use semantic wrappers and text elements (<section>, <h1>, etc.)

ğŸ” Example Reference

Use components/ui/card.tsx as a model for:
	â€¢	âœ… Prop structure
	â€¢	âœ… Class merging
	â€¢	âœ… Token application
	â€¢	âœ… Variant support

ğŸª„ 6. Best Practice Philosophy

Principle	Description
âœ… Design tokens power all UI	Changes to token values cascade globally
ğŸ¤ Minimal but semantic props	Keep tokens limited to those that matter per component
ğŸ§  Default props reduce clutter	Use defaults like padding="md" wherever possible
ğŸ”„ mergeTokens() optional	Compose token groups dynamically when needed
ğŸ”’ Token-first = future-safe	Never worry about restyling things manually later





